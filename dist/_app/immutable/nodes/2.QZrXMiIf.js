import{s as ln,O as je,e as Mt,c as At,b as Xt,f as wt,P as Vl,i as Se,n as zl,Q as Kn,R as Vp,r as fh,q as zp,S as Gp,T as _a,x as bn,U as Nr,V as yn,p as Gl,k as ph,l as jl,a as ie,g as se,W as kr,v as kt,h as pt,X as Or,Y as jp,Z as Wp,u as Wl,m as Yl,o as Xl,A as Yp,t as Pi,d as Ni,j as ba}from"../chunks/scheduler.BYDFU4yR.js";import{S as cn,i as un,f as Br,b as Oe,d as Me,m as Ae,t as Dt,a as Nt,e as Ce,g as wo,c as xo}from"../chunks/index.zY4ZX0Vm.js";import{w as mh}from"../chunks/index.OlxSRmeQ.js";function wa(t,e){const n={},r={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const l in o)l in a||(r[l]=1);for(const l in a)i[l]||(n[l]=a[l],i[l]=1);t[s]=a}else for(const l in o)i[l]=1}for(const o in r)o in n||(n[o]=void 0);return n}function gh(t){return typeof t=="object"&&t!==null?t:{}}var vh=(t=>(t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout",t))(vh||{}),yh=(t=>(t.SHOW="show-modal",t.HIDE="hide-modal",t))(yh||{}),_h=(t=>(t.UPDATE="model-update",t))(_h||{}),bh=(t=>(t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click",t.SHOW_TOOLTIP="toolbar-show-tooltip",t.HIDE_TOOLTIP="toolbar-hide-tooltip",t))(bh||{}),wh=(t=>(t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end",t))(wh||{}),xh=(t=>(t.CHANGE="zoom-domain-change",t))(xh||{}),Eh=(t=>(t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out",t))(Eh||{}),Th=(t=>(t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete",t))(Th||{}),Sh=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(Sh||{}),Oh=(t=>(t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout",t))(Oh||{}),Mh=(t=>(t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout",t))(Mh||{}),Ah=(t=>(t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout",t))(Ah||{}),Ch=(t=>(t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout",t))(Ch||{}),Dh=(t=>(t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout",t))(Dh||{}),Lh=(t=>(t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout",t))(Lh||{}),kh=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(kh||{}),Rh=(t=>(t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",t))(Rh||{}),$h=(t=>(t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout",t))($h||{}),Ih=(t=>(t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout",t))(Ih||{}),Ph=(t=>(t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip",t))(Ph||{}),Nh=(t=>(t.SHOW="show-threshold",t.HIDE="hide-threshold",t))(Nh||{}),Bh=(t=>(t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update",t))(Bh||{}),Uh=(t=>(t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",t))(Uh||{}),Hh=(t=>(t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove",t))(Hh||{}),Fh=(t=>(t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove",t))(Fh||{}),Vh=(t=>(t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove",t))(Vh||{}),zh=(t=>(t.CHOROPLETH_MOUSEOVER="choropleth-mouseover",t.CHOROPLETH_CLICK="choropleth-click",t.CHOROPLETH_MOUSEOUT="choropleth-mouseout",t.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",t))(zh||{});const Xp=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:Hh,Area:Sh,Axis:Th,Bar:Ch,Boxplot:Dh,CanvasZoom:Eh,Chart:vh,Choropleth:zh,CirclePack:Uh,Gauge:Ah,Heatmap:Vh,Legend:Bh,Line:kh,Meter:Fh,Modal:yh,Model:_h,Pie:Mh,Radar:Rh,Scatter:Lh,Threshold:Nh,Toolbar:bh,Tooltip:Ph,Tree:$h,Treemap:Ih,WordCloud:Oh,ZoomBar:wh,ZoomDomain:xh},Symbol.toStringTag,{value:"Module"})),S=Xp;var ot=(t=>(t.HTML="html",t.SVG="svg",t))(ot||{}),Gh=(t=>(t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10",t))(Gh||{}),Ut=(t=>(t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip",t))(Ut||{}),C=(t=>(t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom",t))(C||{}),Te=(t=>(t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view",t))(Te||{}),ve=(t=>(t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none",t))(ve||{}),qt=(t=>(t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t))(qt||{}),z=(t=>(t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio",t))(z||{}),Rr=(t=>(t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom",t))(Rr||{}),ae=(t=>(t.LEFT="left",t.CENTER="center",t.RIGHT="right",t))(ae||{}),Ur=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(Ur||{}),jh=(t=>(t.TREE="tree",t.DENDROGRAM="dendrogram",t))(jh||{}),Ot=(t=>(t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse",t))(Ot||{}),at=(t=>(t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch",t))(at||{}),Qr=(t=>(t.CENTER="center",t))(Qr||{}),_i=(t=>(t.LEFT="left",t.RIGHT="right",t))(_i||{}),gn=(t=>(t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut",t))(gn||{}),Wh=(t=>(t.SEMI="semi",t.FULL="full",t))(Wh||{}),bi=(t=>(t.ALWAYS="always",t.AUTO="auto",t.NEVER="never",t))(bi||{}),en=(t=>(t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area",t))(en||{}),ft=(t=>(t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.EXIT_FULLSCREEN="Exit fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom",t))(ft||{}),Eo=(t=>(t.LEFT="left",t.RIGHT="right",t))(Eo||{}),Bt=(t=>(t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom",t))(Bt||{}),wi=(t=>(t.LINEAR="linear",t.QUANTIZE="quantize",t))(wi||{}),$r=(t=>(t.ON="on",t.AUTO="auto",t.OFF="off",t))($r||{}),fs=(t=>(t.DEFAULT="default",t.HOVERABLE="hoverable",t))(fs||{}),Yh=(t=>(t.geoEqualEarth="geoEqualEarth",t.geoAlbers="geoAlbers",t.geoConicEqualArea="geoConicEqualArea",t.geoConicEquidistant="geoConicEquidistant",t.geoEquirectangular="geoEquirectangular",t.geoMercator="geoMercator",t.geoNaturalEarth1="geoNaturalEarth1",t))(Yh||{});function xi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qp(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xa(t){let e,n,r;t.length!==2?(e=xi,n=(a,l)=>xi(t(a),l),r=(a,l)=>t(a)-l):(e=t===xi||t===qp?t:Zp,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=i(a,l,c,u-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:o,right:s}}function Zp(){return 0}function Kp(t){return t===null?NaN:+t}const Qp=xa(xi),Ea=Qp.right;xa(Kp).center;function Jp(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function on(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class ql extends Map{constructor(e,n=nm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Zl(this,e))}has(e){return super.has(Zl(this,e))}set(e,n){return super.set(tm(this,e),n)}delete(e){return super.delete(em(this,e))}}function Zl({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function tm({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function em({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function nm(t){return t!==null&&typeof t=="object"?t.valueOf():t}function rm(t){return t}var im=Array.prototype,sm=im.slice;function Fs(t){return()=>t}const om=Math.sqrt(50),am=Math.sqrt(10),lm=Math.sqrt(2);function Bi(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=om?10:s>=am?5:s>=lm?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Bi(t,e,n*2):[a,l,c]}function Ui(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Bi(e,t,n):Bi(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function Qn(t,e,n){return e=+e,t=+t,n=+n,Bi(t,e,n)[2]}function To(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Qn(e,t,n):Qn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function cm(t,e,n){let r;for(;;){const i=Qn(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function um(t){return Math.max(1,Math.ceil(Math.log(Jp(t))/Math.LN2)+1)}function hm(){var t=rm,e=on,n=um;function r(i){Array.isArray(i)||(i=Array.from(i));var s,o=i.length,a,l,c=new Array(o);for(s=0;s<o;++s)c[s]=t(i[s],s,i);var u=e(c),h=u[0],d=u[1],f=n(c,h,d);if(!Array.isArray(f)){const _=d,T=+f;if(e===on&&([h,d]=cm(h,d,T)),f=Ui(h,d,T),f[0]<=h&&(l=Qn(h,d,T)),f[f.length-1]>=d)if(_>=d&&e===on){const x=Qn(h,d,T);isFinite(x)&&(x>0?d=(Math.floor(d/x)+1)*x:x<0&&(d=(Math.ceil(d*-x)+1)/-x))}else f.pop()}for(var p=f.length,m=0,g=p;f[m]<=h;)++m;for(;f[g-1]>d;)--g;(m||g<p)&&(f=f.slice(m,g),p=g-m);var v=new Array(p+1),b;for(s=0;s<=p;++s)b=v[s]=[],b.x0=s>0?f[s-1]:h,b.x1=s<p?f[s]:d;if(isFinite(l)){if(l>0)for(s=0;s<o;++s)(a=c[s])!=null&&h<=a&&a<=d&&v[Math.min(p,Math.floor((a-h)/l))].push(i[s]);else if(l<0){for(s=0;s<o;++s)if((a=c[s])!=null&&h<=a&&a<=d){const _=Math.floor((h-a)*l);v[Math.min(p,_+(f[_]<=a))].push(i[s])}}}else for(s=0;s<o;++s)(a=c[s])!=null&&h<=a&&a<=d&&v[Ea(f,a,0,p)].push(i[s]);return v}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Fs(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Fs([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Fs(Array.isArray(i)?sm.call(i):i),r):n},r}function dm(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function So(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function fm(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function pm(t){return t}var Ei=1,Ti=2,Oo=3,Mr=4,Kl=1e-6;function mm(t){return"translate("+t+",0)"}function gm(t){return"translate(0,"+t+")"}function vm(t){return e=>+t(e)}function ym(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function _m(){return!this.__axis}function ps(t,e){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Ei||t===Mr?-1:1,u=t===Mr||t===Ti?"x":"y",h=t===Ei||t===Oo?mm:gm;function d(f){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):pm),g=Math.max(s,0)+a,v=e.range(),b=+v[0]+l,_=+v[v.length-1]+l,T=(e.bandwidth?ym:vm)(e.copy(),l),x=f.selection?f.selection():f,E=x.selectAll(".domain").data([null]),O=x.selectAll(".tick").data(p,e).order(),A=O.exit(),M=O.enter().append("g").attr("class","tick"),L=O.select("line"),I=O.select("text");E=E.merge(E.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(M),L=L.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),I=I.merge(M.append("text").attr("fill","currentColor").attr(u,c*g).attr("dy",t===Ei?"0em":t===Oo?"0.71em":"0.32em")),f!==x&&(E=E.transition(f),O=O.transition(f),L=L.transition(f),I=I.transition(f),A=A.transition(f).attr("opacity",Kl).attr("transform",function(V){return isFinite(V=T(V))?h(V+l):this.getAttribute("transform")}),M.attr("opacity",Kl).attr("transform",function(V){var $=this.parentNode.__axis;return h(($&&isFinite($=$(V))?$:T(V))+l)})),A.remove(),E.attr("d",t===Mr||t===Ti?o?"M"+c*o+","+b+"H"+l+"V"+_+"H"+c*o:"M"+l+","+b+"V"+_:o?"M"+b+","+c*o+"V"+l+"H"+_+"V"+c*o:"M"+b+","+l+"H"+_),O.attr("opacity",1).attr("transform",function(V){return h(T(V)+l)}),L.attr(u+"2",c*s),I.attr(u,c*g).text(m),x.filter(_m).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ti?"start":t===Mr?"end":"middle"),x.each(function(){this.__axis=T})}return d.scale=function(f){return arguments.length?(e=f,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(f){return arguments.length?(n=f==null?[]:Array.from(f),d):n.slice()},d.tickValues=function(f){return arguments.length?(r=f==null?null:Array.from(f),d):r&&r.slice()},d.tickFormat=function(f){return arguments.length?(i=f,d):i},d.tickSize=function(f){return arguments.length?(s=o=+f,d):s},d.tickSizeInner=function(f){return arguments.length?(s=+f,d):s},d.tickSizeOuter=function(f){return arguments.length?(o=+f,d):o},d.tickPadding=function(f){return arguments.length?(a=+f,d):a},d.offset=function(f){return arguments.length?(l=+f,d):l},d}function bm(t){return ps(Ei,t)}function wm(t){return ps(Ti,t)}function Xh(t){return ps(Oo,t)}function xm(t){return ps(Mr,t)}var Em={value:()=>{}};function Ta(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Si(n)}function Si(t){this._=t}function Tm(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Si.prototype=Ta.prototype={constructor:Si,on:function(t,e){var n=this._,r=Tm(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Sm(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Ql(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ql(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Si(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Sm(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ql(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Em,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Mo="http://www.w3.org/1999/xhtml";const Jl={svg:"http://www.w3.org/2000/svg",xhtml:Mo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ms(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Jl.hasOwnProperty(e)?{space:Jl[e],local:t}:t}function Om(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Mo&&e.documentElement.namespaceURI===Mo?e.createElement(t):e.createElementNS(n,t)}}function Mm(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qh(t){var e=ms(t);return(e.local?Mm:Om)(e)}function Am(){}function Sa(t){return t==null?Am:function(){return this.querySelector(t)}}function Cm(t){typeof t!="function"&&(t=Sa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new le(r,this._parents)}function Dm(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Lm(){return[]}function Zh(t){return t==null?Lm:function(){return this.querySelectorAll(t)}}function km(t){return function(){return Dm(t.apply(this,arguments))}}function Rm(t){typeof t=="function"?t=km(t):t=Zh(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new le(r,i)}function Kh(t){return function(){return this.matches(t)}}function Qh(t){return function(e){return e.matches(t)}}var $m=Array.prototype.find;function Im(t){return function(){return $m.call(this.children,t)}}function Pm(){return this.firstElementChild}function Nm(t){return this.select(t==null?Pm:Im(typeof t=="function"?t:Qh(t)))}var Bm=Array.prototype.filter;function Um(){return Array.from(this.children)}function Hm(t){return function(){return Bm.call(this.children,t)}}function Fm(t){return this.selectAll(t==null?Um:Hm(typeof t=="function"?t:Qh(t)))}function Vm(t){typeof t!="function"&&(t=Kh(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new le(r,this._parents)}function Jh(t){return new Array(t.length)}function zm(){return new le(this._enter||this._groups.map(Jh),this._parents)}function Hi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Hi.prototype={constructor:Hi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Gm(t){return function(){return t}}function jm(t,e,n,r,i,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new Hi(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function Wm(t,e,n,r,i,s,o){var a,l,c=new Map,u=e.length,h=s.length,d=new Array(u),f;for(a=0;a<u;++a)(l=e[a])&&(d[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?i[a]=l:c.set(f,l));for(a=0;a<h;++a)f=o.call(t,s[a],a,s)+"",(l=c.get(f))?(r[a]=l,l.__data__=s[a],c.delete(f)):n[a]=new Hi(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(d[a])===l&&(i[a]=l)}function Ym(t){return t.__data__}function Xm(t,e){if(!arguments.length)return Array.from(this,Ym);var n=e?Wm:jm,r=this._parents,i=this._groups;typeof t!="function"&&(t=Gm(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=i[c],d=h.length,f=qm(t.call(u,u&&u.__data__,c,r)),p=f.length,m=a[c]=new Array(p),g=o[c]=new Array(p),v=l[c]=new Array(d);n(u,h,m,g,v,f,e);for(var b=0,_=0,T,x;b<p;++b)if(T=m[b]){for(b>=_&&(_=b+1);!(x=g[_])&&++_<p;);T._next=x||null}}return o=new le(o,r),o._enter=a,o._exit=l,o}function qm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Zm(){return new le(this._exit||this._groups.map(Jh),this._parents)}function Km(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Qm(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],h=c.length,d=a[l]=new Array(h),f,p=0;p<h;++p)(f=c[p]||u[p])&&(d[p]=f);for(;l<i;++l)a[l]=n[l];return new le(a,this._parents)}function Jm(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function tg(t){t||(t=eg);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new le(i,this._parents).order()}function eg(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ng(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function rg(){return Array.from(this)}function ig(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function sg(){let t=0;for(const e of this)++t;return t}function og(){return!this.node()}function ag(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function lg(t){return function(){this.removeAttribute(t)}}function cg(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ug(t,e){return function(){this.setAttribute(t,e)}}function hg(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function dg(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function fg(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function pg(t,e){var n=ms(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?cg:lg:typeof e=="function"?n.local?fg:dg:n.local?hg:ug)(n,e))}function td(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function mg(t){return function(){this.style.removeProperty(t)}}function gg(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vg(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function yg(t,e,n){return arguments.length>1?this.each((e==null?mg:typeof e=="function"?vg:gg)(t,e,n??"")):Jn(this.node(),t)}function Jn(t,e){return t.style.getPropertyValue(e)||td(t).getComputedStyle(t,null).getPropertyValue(e)}function _g(t){return function(){delete this[t]}}function bg(t,e){return function(){this[t]=e}}function wg(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function xg(t,e){return arguments.length>1?this.each((e==null?_g:typeof e=="function"?wg:bg)(t,e)):this.node()[t]}function ed(t){return t.trim().split(/^|\s+/)}function Oa(t){return t.classList||new nd(t)}function nd(t){this._node=t,this._names=ed(t.getAttribute("class")||"")}nd.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function rd(t,e){for(var n=Oa(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function id(t,e){for(var n=Oa(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Eg(t){return function(){rd(this,t)}}function Tg(t){return function(){id(this,t)}}function Sg(t,e){return function(){(e.apply(this,arguments)?rd:id)(this,t)}}function Og(t,e){var n=ed(t+"");if(arguments.length<2){for(var r=Oa(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Sg:e?Eg:Tg)(n,e))}function Mg(){this.textContent=""}function Ag(t){return function(){this.textContent=t}}function Cg(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Dg(t){return arguments.length?this.each(t==null?Mg:(typeof t=="function"?Cg:Ag)(t)):this.node().textContent}function Lg(){this.innerHTML=""}function kg(t){return function(){this.innerHTML=t}}function Rg(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function $g(t){return arguments.length?this.each(t==null?Lg:(typeof t=="function"?Rg:kg)(t)):this.node().innerHTML}function Ig(){this.nextSibling&&this.parentNode.appendChild(this)}function Pg(){return this.each(Ig)}function Ng(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bg(){return this.each(Ng)}function Ug(t){var e=typeof t=="function"?t:qh(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Hg(){return null}function Fg(t,e){var n=typeof t=="function"?t:qh(t),r=e==null?Hg:typeof e=="function"?e:Sa(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Vg(){var t=this.parentNode;t&&t.removeChild(this)}function zg(){return this.each(Vg)}function Gg(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jg(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wg(t){return this.select(t?jg:Gg)}function Yg(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Xg(t){return function(e){t.call(this,e,this.__data__)}}function qg(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Zg(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Kg(t,e,n){return function(){var r=this.__on,i,s=Xg(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Qg(t,e,n){var r=qg(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?Kg:Zg,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function sd(t,e,n){var r=td(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Jg(t,e){return function(){return sd(this,t,e)}}function tv(t,e){return function(){return sd(this,t,e.apply(this,arguments))}}function ev(t,e){return this.each((typeof e=="function"?tv:Jg)(t,e))}function*nv(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var od=[null];function le(t,e){this._groups=t,this._parents=e}function Jr(){return new le([[document.documentElement]],od)}function rv(){return this}le.prototype=Jr.prototype={constructor:le,select:Cm,selectAll:Rm,selectChild:Nm,selectChildren:Fm,filter:Vm,data:Xm,enter:zm,exit:Zm,join:Km,merge:Qm,selection:rv,order:Jm,sort:tg,call:ng,nodes:rg,node:ig,size:sg,empty:og,each:ag,attr:pg,style:yg,property:xg,classed:Og,text:Dg,html:$g,raise:Pg,lower:Bg,append:Ug,insert:Fg,remove:zg,clone:Wg,datum:Yg,on:Qg,dispatch:ev,[Symbol.iterator]:nv};function D(t){return typeof t=="string"?new le([[document.querySelector(t)]],[document.documentElement]):new le([[t]],od)}function iv(t){let e;for(;e=t.sourceEvent;)t=e;return t}function wn(t,e){if(t=iv(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ao={capture:!0,passive:!1};function Co(t){t.preventDefault(),t.stopImmediatePropagation()}function sv(t){var e=t.document.documentElement,n=D(t).on("dragstart.drag",Co,Ao);"onselectstart"in e?n.on("selectstart.drag",Co,Ao):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ov(t,e){var n=t.document.documentElement,r=D(t).on("dragstart.drag",null);e&&(r.on("click.drag",Co,Ao),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ma(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ad(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ti(){}var Hr=.7,Fi=1/Hr,Yn="\\s*([+-]?\\d+)\\s*",Fr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",De="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",av=/^#([0-9a-f]{3,8})$/,lv=new RegExp(`^rgb\\(${Yn},${Yn},${Yn}\\)$`),cv=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),uv=new RegExp(`^rgba\\(${Yn},${Yn},${Yn},${Fr}\\)$`),hv=new RegExp(`^rgba\\(${De},${De},${De},${Fr}\\)$`),dv=new RegExp(`^hsl\\(${Fr},${De},${De}\\)$`),fv=new RegExp(`^hsla\\(${Fr},${De},${De},${Fr}\\)$`),tc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ma(ti,xn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ec,formatHex:ec,formatHex8:pv,formatHsl:mv,formatRgb:nc,toString:nc});function ec(){return this.rgb().formatHex()}function pv(){return this.rgb().formatHex8()}function mv(){return ld(this).formatHsl()}function nc(){return this.rgb().formatRgb()}function xn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=av.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rc(e):n===3?new te(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ai(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ai(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lv.exec(t))?new te(e[1],e[2],e[3],1):(e=cv.exec(t))?new te(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uv.exec(t))?ai(e[1],e[2],e[3],e[4]):(e=hv.exec(t))?ai(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dv.exec(t))?oc(e[1],e[2]/100,e[3]/100,1):(e=fv.exec(t))?oc(e[1],e[2]/100,e[3]/100,e[4]):tc.hasOwnProperty(t)?rc(tc[t]):t==="transparent"?new te(NaN,NaN,NaN,0):null}function rc(t){return new te(t>>16&255,t>>8&255,t&255,1)}function ai(t,e,n,r){return r<=0&&(t=e=n=NaN),new te(t,e,n,r)}function gv(t){return t instanceof ti||(t=xn(t)),t?(t=t.rgb(),new te(t.r,t.g,t.b,t.opacity)):new te}function Do(t,e,n,r){return arguments.length===1?gv(t):new te(t,e,n,r??1)}function te(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ma(te,Do,ad(ti,{brighter(t){return t=t==null?Fi:Math.pow(Fi,t),new te(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Hr:Math.pow(Hr,t),new te(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new te(_n(this.r),_n(this.g),_n(this.b),Vi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ic,formatHex:ic,formatHex8:vv,formatRgb:sc,toString:sc}));function ic(){return`#${vn(this.r)}${vn(this.g)}${vn(this.b)}`}function vv(){return`#${vn(this.r)}${vn(this.g)}${vn(this.b)}${vn((isNaN(this.opacity)?1:this.opacity)*255)}`}function sc(){const t=Vi(this.opacity);return`${t===1?"rgb(":"rgba("}${_n(this.r)}, ${_n(this.g)}, ${_n(this.b)}${t===1?")":`, ${t})`}`}function Vi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function _n(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vn(t){return t=_n(t),(t<16?"0":"")+t.toString(16)}function oc(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ge(t,e,n,r)}function ld(t){if(t instanceof ge)return new ge(t.h,t.s,t.l,t.opacity);if(t instanceof ti||(t=xn(t)),!t)return new ge;if(t instanceof ge)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new ge(o,a,l,t.opacity)}function yv(t,e,n,r){return arguments.length===1?ld(t):new ge(t,e,n,r??1)}function ge(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ma(ge,yv,ad(ti,{brighter(t){return t=t==null?Fi:Math.pow(Fi,t),new ge(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Hr:Math.pow(Hr,t),new ge(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new te(Vs(t>=240?t-240:t+120,i,r),Vs(t,i,r),Vs(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ge(ac(this.h),li(this.s),li(this.l),Vi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Vi(this.opacity);return`${t===1?"hsl(":"hsla("}${ac(this.h)}, ${li(this.s)*100}%, ${li(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ac(t){return t=(t||0)%360,t<0?t+360:t}function li(t){return Math.max(0,Math.min(1,t||0))}function Vs(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Aa=t=>()=>t;function _v(t,e){return function(n){return t+n*e}}function bv(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function wv(t){return(t=+t)==1?cd:function(e,n){return n-e?bv(e,n,t):Aa(isNaN(e)?n:e)}}function cd(t,e){var n=e-t;return n?_v(t,n):Aa(isNaN(t)?e:t)}const zi=function t(e){var n=wv(e);function r(i,s){var o=n((i=Do(i)).r,(s=Do(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=cd(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function xv(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Ev(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Tv(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ei(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Sv(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function oe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ov(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ei(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Lo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zs=new RegExp(Lo.source,"g");function Mv(t){return function(){return t}}function Av(t){return function(e){return t(e)+""}}function ud(t,e){var n=Lo.lastIndex=zs.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Lo.exec(t))&&(i=zs.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:oe(r,i)})),n=zs.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Av(l[0].x):Mv(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function ei(t,e){var n=typeof e,r;return e==null||n==="boolean"?Aa(e):(n==="number"?oe:n==="string"?(r=xn(e))?(e=r,zi):ud:e instanceof xn?zi:e instanceof Date?Sv:Ev(e)?xv:Array.isArray(e)?Tv:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ov:oe)(t,e)}function hd(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var lc=180/Math.PI,ko={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dd(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*lc,skewX:Math.atan(l)*lc,scaleX:o,scaleY:a}}var ci;function Cv(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ko:dd(e.a,e.b,e.c,e.d,e.e,e.f)}function Dv(t){return t==null||(ci||(ci=document.createElementNS("http://www.w3.org/2000/svg","g")),ci.setAttribute("transform",t),!(t=ci.transform.baseVal.consolidate()))?ko:(t=t.matrix,dd(t.a,t.b,t.c,t.d,t.e,t.f))}function fd(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,h,d,f,p){if(c!==h||u!==d){var m=f.push("translate(",null,e,null,n);p.push({i:m-4,x:oe(c,h)},{i:m-2,x:oe(u,d)})}else(h||d)&&f.push("translate("+h+e+d+n)}function o(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:oe(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function a(c,u,h,d){c!==u?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:oe(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,d,f,p){if(c!==h||u!==d){var m=f.push(i(f)+"scale(",null,",",null,")");p.push({i:m-4,x:oe(c,h)},{i:m-2,x:oe(u,d)})}else(h!==1||d!==1)&&f.push(i(f)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,d),o(c.rotate,u.rotate,h,d),a(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(f){for(var p=-1,m=d.length,g;++p<m;)h[(g=d[p]).i]=g.x(f);return h.join("")}}}var Lv=fd(Cv,"px, ","px)","deg)"),kv=fd(Dv,", ",")",")");function Rv(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var tr=0,Ar=0,mr=0,pd=1e3,Gi,Cr,ji=0,En=0,gs=0,Vr=typeof performance=="object"&&performance.now?performance:Date,md=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ca(){return En||(md($v),En=Vr.now()+gs)}function $v(){En=0}function Wi(){this._call=this._time=this._next=null}Wi.prototype=gd.prototype={constructor:Wi,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ca():+n)+(e==null?0:+e),!this._next&&Cr!==this&&(Cr?Cr._next=this:Gi=this,Cr=this),this._call=t,this._time=n,Ro()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ro())}};function gd(t,e,n){var r=new Wi;return r.restart(t,e,n),r}function Iv(){Ca(),++tr;for(var t=Gi,e;t;)(e=En-t._time)>=0&&t._call.call(void 0,e),t=t._next;--tr}function cc(){En=(ji=Vr.now())+gs,tr=Ar=0;try{Iv()}finally{tr=0,Nv(),En=0}}function Pv(){var t=Vr.now(),e=t-ji;e>pd&&(gs-=e,ji=t)}function Nv(){for(var t,e=Gi,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Gi=n);Cr=t,Ro(r)}function Ro(t){if(!tr){Ar&&(Ar=clearTimeout(Ar));var e=t-En;e>24?(t<1/0&&(Ar=setTimeout(cc,t-Vr.now()-gs)),mr&&(mr=clearInterval(mr))):(mr||(ji=Vr.now(),mr=setInterval(Pv,pd)),tr=1,md(cc))}}function uc(t,e,n){var r=new Wi;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Bv=Ta("start","end","cancel","interrupt"),Uv=[],vd=0,hc=1,$o=2,Oi=3,dc=4,Io=5,Mi=6;function vs(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Hv(t,n,{name:e,index:r,group:i,on:Bv,tween:Uv,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:vd})}function Da(t,e){var n=be(t,e);if(n.state>vd)throw new Error("too late; already scheduled");return n}function Re(t,e){var n=be(t,e);if(n.state>Oi)throw new Error("too late; already running");return n}function be(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Hv(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=gd(s,0,n.time);function s(c){n.state=hc,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,d,f;if(n.state!==hc)return l();for(u in r)if(f=r[u],f.name===n.name){if(f.state===Oi)return uc(o);f.state===dc?(f.state=Mi,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=Mi,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(uc(function(){n.state===Oi&&(n.state=dc,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=$o,n.on.call("start",t,t.__data__,n.index,n.group),n.state===$o){for(n.state=Oi,i=new Array(d=n.tween.length),u=0,h=-1;u<d;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=f);i.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Io,1),h=-1,d=i.length;++h<d;)i[h].call(t,u);n.state===Io&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Mi,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Po(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>$o&&r.state<Io,r.state=Mi,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Fv(t){return this.each(function(){Po(this,t)})}function Vv(t,e){var n,r;return function(){var i=Re(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function zv(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Re(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}s.tween=i}}function Gv(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=be(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Vv:zv)(n,t,e))}function La(t,e,n){var r=t._id;return t.each(function(){var i=Re(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return be(i,r).value[e]}}function yd(t,e){var n;return(typeof e=="number"?oe:e instanceof xn?zi:(n=xn(e))?(e=n,zi):ud)(t,e)}function jv(t){return function(){this.removeAttribute(t)}}function Wv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yv(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function Xv(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function qv(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function Zv(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function Kv(t,e){var n=ms(t),r=n==="transform"?kv:yd;return this.attrTween(t,typeof e=="function"?(n.local?Zv:qv)(n,r,La(this,"attr."+t,e)):e==null?(n.local?Wv:jv)(n):(n.local?Xv:Yv)(n,r,e))}function Qv(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Jv(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ty(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Jv(t,s)),n}return i._value=e,i}function ey(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Qv(t,s)),n}return i._value=e,i}function ny(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=ms(t);return this.tween(n,(r.local?ty:ey)(r,e))}function ry(t,e){return function(){Da(this,t).delay=+e.apply(this,arguments)}}function iy(t,e){return e=+e,function(){Da(this,t).delay=e}}function sy(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ry:iy)(e,t)):be(this.node(),e).delay}function oy(t,e){return function(){Re(this,t).duration=+e.apply(this,arguments)}}function ay(t,e){return e=+e,function(){Re(this,t).duration=e}}function ly(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oy:ay)(e,t)):be(this.node(),e).duration}function cy(t,e){if(typeof e!="function")throw new Error;return function(){Re(this,t).ease=e}}function uy(t){var e=this._id;return arguments.length?this.each(cy(e,t)):be(this.node(),e).ease}function hy(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Re(this,t).ease=n}}function dy(t){if(typeof t!="function")throw new Error;return this.each(hy(this._id,t))}function fy(t){typeof t!="function"&&(t=Kh(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new We(r,this._parents,this._name,this._id)}function py(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,h=o[a]=new Array(u),d,f=0;f<u;++f)(d=l[f]||c[f])&&(h[f]=d);for(;a<r;++a)o[a]=e[a];return new We(o,this._parents,this._name,this._id)}function my(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function gy(t,e,n){var r,i,s=my(e)?Da:Re;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function vy(t,e){var n=this._id;return arguments.length<2?be(this.node(),n).on.on(t):this.each(gy(n,t,e))}function yy(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function _y(){return this.on("end.remove",yy(this._id))}function by(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sa(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,h,d=0;d<l;++d)(u=a[d])&&(h=t.call(u,u.__data__,d,a))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,vs(c[d],e,n,d,c,be(u,n)));return new We(s,this._parents,e,n)}function wy(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Zh(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=t.call(u,u.__data__,h,l),f,p=be(u,n),m=0,g=d.length;m<g;++m)(f=d[m])&&vs(f,e,n,m,d,p);s.push(d),o.push(u)}return new We(s,o,e,n)}var xy=Jr.prototype.constructor;function Ey(){return new xy(this._groups,this._parents)}function Ty(t,e){var n,r,i;return function(){var s=Jn(this,t),o=(this.style.removeProperty(t),Jn(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function _d(t){return function(){this.style.removeProperty(t)}}function Sy(t,e,n){var r,i=n+"",s;return function(){var o=Jn(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function Oy(t,e,n){var r,i,s;return function(){var o=Jn(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Jn(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function My(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=Re(this,t),c=l.on,u=l.value[s]==null?a||(a=_d(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function Ay(t,e,n){var r=(t+="")=="transform"?Lv:yd;return e==null?this.styleTween(t,Ty(t,r)).on("end.style."+t,_d(t)):typeof e=="function"?this.styleTween(t,Oy(t,r,La(this,"style."+t,e))).each(My(this._id,t)):this.styleTween(t,Sy(t,r,e),n).on("end.style."+t,null)}function Cy(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Dy(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Cy(t,o,n)),r}return s._value=e,s}function Ly(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Dy(t,e,n??""))}function ky(t){return function(){this.textContent=t}}function Ry(t){return function(){var e=t(this);this.textContent=e??""}}function $y(t){return this.tween("text",typeof t=="function"?Ry(La(this,"text",t)):ky(t==null?"":t+""))}function Iy(t){return function(e){this.textContent=t.call(this,e)}}function Py(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Iy(i)),e}return r._value=t,r}function Ny(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Py(t))}function By(){for(var t=this._name,e=this._id,n=bd(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=be(l,e);vs(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new We(r,this._parents,t,n)}function Uy(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var c=Re(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&s()})}var Hy=0;function We(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function bd(){return++Hy}var Be=Jr.prototype;We.prototype={constructor:We,select:by,selectAll:wy,selectChild:Be.selectChild,selectChildren:Be.selectChildren,filter:fy,merge:py,selection:Ey,transition:By,call:Be.call,nodes:Be.nodes,node:Be.node,size:Be.size,empty:Be.empty,each:Be.each,on:vy,attr:Kv,attrTween:ny,style:Ay,styleTween:Ly,text:$y,textTween:Ny,remove:_y,tween:Gv,delay:sy,duration:ly,ease:uy,easeVarying:dy,end:Uy,[Symbol.iterator]:Be[Symbol.iterator]};const Fy=t=>+t;function wd(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Vy={time:null,delay:0,duration:250,ease:wd};function zy(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Gy(t){var e,n;t instanceof We?(e=t._id,t=t._name):(e=bd(),(n=Vy).time=Ca(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&vs(l,t,e,c,o,n||zy(l,e));return new We(r,this._parents,t,e)}Jr.prototype.interrupt=Fv;Jr.prototype.transition=Gy;const Gs=t=>()=>t;function jy(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Wy(t){t.stopImmediatePropagation()}function js(t){t.preventDefault(),t.stopImmediatePropagation()}var fc={name:"drag"},Ws={name:"space"},Bn={name:"handle"},Un={name:"center"};const{abs:pc,max:Vt,min:zt}=Math;function mc(t){return[+t[0],+t[1]]}function gc(t){return[mc(t[0]),mc(t[1])]}var Ai={name:"x",handles:["w","e"].map(Yi),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ys={name:"y",handles:["n","s"].map(Yi),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ue={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},vc={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},yc={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Yy={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Xy={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Yi(t){return{type:t}}function qy(t){return!t.ctrlKey&&!t.button}function Zy(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ky(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xs(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Qy(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function xd(){return Jy(Ai)}function Jy(t){var e=Zy,n=qy,r=Ky,i=!0,s=Ta("start","brush","end"),o=6,a;function l(g){var v=g.property("__brush",m).selectAll(".overlay").data([Yi("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ue.overlay).merge(v).each(function(){var _=Xs(this).extent;D(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([Yi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ue.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=g.selectAll(".handle").data(t.handles,function(_){return _.type});b.exit().remove(),b.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Ue[_.type]}),g.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(g,v,b){g.tween?g.on("start.brush",function(_){u(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){u(this,arguments).end(_)}).tween("brush",function(){var _=this,T=_.__brush,x=u(_,arguments),E=T.selection,O=t.input(typeof v=="function"?v.apply(this,arguments):v,T.extent),A=ei(E,O);function M(L){T.selection=L===1&&O===null?null:A(L),c.call(_),x.brush()}return E!==null&&O!==null?M:M(1)}):g.each(function(){var _=this,T=arguments,x=_.__brush,E=t.input(typeof v=="function"?v.apply(_,T):v,x.extent),O=u(_,T).beforestart();Po(_),x.selection=E===null?null:E,c.call(_),O.start(b).brush(b).end(b)})},l.clear=function(g,v){l.move(g,null,v)};function c(){var g=D(this),v=Xs(this).selection;v?(g.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?v[1][0]-o/2:v[0][0]-o/2}).attr("y",function(b){return b.type[0]==="s"?v[1][1]-o/2:v[0][1]-o/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?v[1][0]-v[0][0]+o:o}).attr("height",function(b){return b.type==="e"||b.type==="w"?v[1][1]-v[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(g,v,b){var _=g.__brush.emitter;return _&&(!b||!_.clean)?_:new h(g,v,b)}function h(g,v,b){this.that=g,this.args=v,this.state=g.__brush,this.active=0,this.clean=b}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,v){return this.starting?(this.starting=!1,this.emit("start",g,v)):this.emit("brush",g),this},brush:function(g,v){return this.emit("brush",g,v),this},end:function(g,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,v)),this},emit:function(g,v,b){var _=D(this.that).datum();s.call(g,this.that,new jy(g,{sourceEvent:v,target:l,selection:t.output(this.state.selection),mode:b,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var v=this,b=g.target.__data__.type,_=(i&&g.metaKey?b="overlay":b)==="selection"?fc:i&&g.altKey?Un:Bn,T=t===Ys?null:Yy[b],x=t===Ai?null:Xy[b],E=Xs(v),O=E.extent,A=E.selection,M=O[0][0],L,I,V=O[0][1],$,U,K=O[1][0],W,N,J=O[1][1],q,Z,it=0,Y=0,Lt,tt=T&&x&&i&&g.shiftKey,gt,H,X=Array.from(g.touches||[g],j=>{const vt=j.identifier;return j=wn(j,v),j.point0=j.slice(),j.identifier=vt,j});Po(v);var st=u(v,arguments,!0).beforestart();if(b==="overlay"){A&&(Lt=!0);const j=[X[0],X[1]||X[0]];E.selection=A=[[L=t===Ys?M:zt(j[0][0],j[1][0]),$=t===Ai?V:zt(j[0][1],j[1][1])],[W=t===Ys?K:Vt(j[0][0],j[1][0]),q=t===Ai?J:Vt(j[0][1],j[1][1])]],X.length>1&&ht(g)}else L=A[0][0],$=A[0][1],W=A[1][0],q=A[1][1];I=L,U=$,N=W,Z=q;var P=D(v).attr("pointer-events","none"),G=P.selectAll(".overlay").attr("cursor",Ue[b]);if(g.touches)st.moved=k,st.ended=lt;else{var Q=D(g.view).on("mousemove.brush",k,!0).on("mouseup.brush",lt,!0);i&&Q.on("keydown.brush",Rt,!0).on("keyup.brush",St,!0),sv(g.view)}c.call(v),st.start(g,_.name);function k(j){for(const vt of j.changedTouches||[j])for(const Qe of X)Qe.identifier===vt.identifier&&(Qe.cur=wn(vt,v));if(tt&&!gt&&!H&&X.length===1){const vt=X[0];pc(vt.cur[0]-vt[0])>pc(vt.cur[1]-vt[1])?H=!0:gt=!0}for(const vt of X)vt.cur&&(vt[0]=vt.cur[0],vt[1]=vt.cur[1]);Lt=!0,js(j),ht(j)}function ht(j){const vt=X[0],Qe=vt.point0;var pe;switch(it=vt[0]-Qe[0],Y=vt[1]-Qe[1],_){case Ws:case fc:{T&&(it=Vt(M-L,zt(K-W,it)),I=L+it,N=W+it),x&&(Y=Vt(V-$,zt(J-q,Y)),U=$+Y,Z=q+Y);break}case Bn:{X[1]?(T&&(I=Vt(M,zt(K,X[0][0])),N=Vt(M,zt(K,X[1][0])),T=1),x&&(U=Vt(V,zt(J,X[0][1])),Z=Vt(V,zt(J,X[1][1])),x=1)):(T<0?(it=Vt(M-L,zt(K-L,it)),I=L+it,N=W):T>0&&(it=Vt(M-W,zt(K-W,it)),I=L,N=W+it),x<0?(Y=Vt(V-$,zt(J-$,Y)),U=$+Y,Z=q):x>0&&(Y=Vt(V-q,zt(J-q,Y)),U=$,Z=q+Y));break}case Un:{T&&(I=Vt(M,zt(K,L-it*T)),N=Vt(M,zt(K,W+it*T))),x&&(U=Vt(V,zt(J,$-Y*x)),Z=Vt(V,zt(J,q+Y*x)));break}}N<I&&(T*=-1,pe=L,L=W,W=pe,pe=I,I=N,N=pe,b in vc&&G.attr("cursor",Ue[b=vc[b]])),Z<U&&(x*=-1,pe=$,$=q,q=pe,pe=U,U=Z,Z=pe,b in yc&&G.attr("cursor",Ue[b=yc[b]])),E.selection&&(A=E.selection),gt&&(I=A[0][0],N=A[1][0]),H&&(U=A[0][1],Z=A[1][1]),(A[0][0]!==I||A[0][1]!==U||A[1][0]!==N||A[1][1]!==Z)&&(E.selection=[[I,U],[N,Z]],c.call(v),st.brush(j,_.name))}function lt(j){if(Wy(j),j.touches){if(j.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else ov(j.view,Lt),Q.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);P.attr("pointer-events","all"),G.attr("cursor",Ue.overlay),E.selection&&(A=E.selection),Qy(A)&&(E.selection=null,c.call(v)),st.end(j,_.name)}function Rt(j){switch(j.keyCode){case 16:{tt=T&&x;break}case 18:{_===Bn&&(T&&(W=N-it*T,L=I+it*T),x&&(q=Z-Y*x,$=U+Y*x),_=Un,ht(j));break}case 32:{(_===Bn||_===Un)&&(T<0?W=N-it:T>0&&(L=I-it),x<0?q=Z-Y:x>0&&($=U-Y),_=Ws,G.attr("cursor",Ue.selection),ht(j));break}default:return}js(j)}function St(j){switch(j.keyCode){case 16:{tt&&(gt=H=tt=!1,ht(j));break}case 18:{_===Un&&(T<0?W=N:T>0&&(L=I),x<0?q=Z:x>0&&($=U),_=Bn,ht(j));break}case 32:{_===Ws&&(j.altKey?(T&&(W=N-it*T,L=I+it*T),x&&(q=Z-Y*x,$=U+Y*x),_=Un):(T<0?W=N:T>0&&(L=I),x<0?q=Z:x>0&&($=U),_=Bn),G.attr("cursor",Ue[b]),ht(j));break}default:return}js(j)}}function f(g){u(this,arguments).moved(g)}function p(g){u(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=gc(e.apply(this,arguments)),g.dim=t,g}return l.extent=function(g){return arguments.length?(e=typeof g=="function"?g:Gs(gc(g)),l):e},l.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Gs(!!g),l):n},l.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Gs(!!g),l):r},l.handleSize=function(g){return arguments.length?(o=+g,l):o},l.keyModifiers=function(g){return arguments.length?(i=!!g,l):i},l.on=function(){var g=s.on.apply(s,arguments);return g===s?l:g},l}const No=Math.PI,Bo=2*No,dn=1e-6,t0=Bo-dn;function Ed(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function e0(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ed;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class n0{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ed:e0(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,u=o-e,h=a-n,d=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>dn)if(!(Math.abs(h*l-c*u)>dn)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-o,p=i-a,m=l*l+c*c,g=f*f+p*p,v=Math.sqrt(m),b=Math.sqrt(d),_=s*Math.tan((No-Math.acos((m+d-g)/(2*v*b)))/2),T=_/b,x=_/v;Math.abs(T-1)>dn&&this._append`L${e+T*u},${n+T*h}`,this._append`A${s},${s},0,0,${+(h*f>u*p)},${this._x1=e+x*l},${this._y1=n+x*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,h=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>dn||Math.abs(this._y1-u)>dn)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%Bo+Bo),d>t0?this._append`A${r},${r},0,1,${h},${e-a},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:d>dn&&this._append`A${r},${r},0,${+(d>=No)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function r0(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Xi(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function er(t){return t=Xi(Math.abs(t)),t?t[1]:NaN}function i0(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function s0(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var o0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zr(t){if(!(e=o0.exec(t)))throw new Error("invalid format: "+t);var e;return new ka({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}zr.prototype=ka.prototype;function ka(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ka.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function a0(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Td;function l0(t,e){var n=Xi(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Td=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Xi(t,Math.max(0,e+s-1))[0]}function _c(t,e){var n=Xi(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const bc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:r0,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>_c(t*100,e),r:_c,s:l0,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function wc(t){return t}var xc=Array.prototype.map,Ec=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function c0(t){var e=t.grouping===void 0||t.thousands===void 0?wc:i0(xc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?wc:s0(xc.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=zr(h);var d=h.fill,f=h.align,p=h.sign,m=h.symbol,g=h.zero,v=h.width,b=h.comma,_=h.precision,T=h.trim,x=h.type;x==="n"?(b=!0,x="g"):bc[x]||(_===void 0&&(_=12),T=!0,x="g"),(g||d==="0"&&f==="=")&&(g=!0,d="0",f="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",O=m==="$"?r:/[%p]/.test(x)?o:"",A=bc[x],M=/[defgprs%]/.test(x);_=_===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function L(I){var V=E,$=O,U,K,W;if(x==="c")$=A(I)+$,I="";else{I=+I;var N=I<0||1/I<0;if(I=isNaN(I)?l:A(Math.abs(I),_),T&&(I=a0(I)),N&&+I==0&&p!=="+"&&(N=!1),V=(N?p==="("?p:a:p==="-"||p==="("?"":p)+V,$=(x==="s"?Ec[8+Td/3]:"")+$+(N&&p==="("?")":""),M){for(U=-1,K=I.length;++U<K;)if(W=I.charCodeAt(U),48>W||W>57){$=(W===46?i+I.slice(U+1):I.slice(U))+$,I=I.slice(0,U);break}}}b&&!g&&(I=e(I,1/0));var J=V.length+I.length+$.length,q=J<v?new Array(v-J+1).join(d):"";switch(b&&g&&(I=e(q+I,q.length?v-$.length:1/0),q=""),f){case"<":I=V+I+$+q;break;case"=":I=V+q+I+$;break;case"^":I=q.slice(0,J=q.length>>1)+V+I+$+q.slice(J);break;default:I=q+V+I+$;break}return s(I)}return L.toString=function(){return h+""},L}function u(h,d){var f=c((h=zr(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(er(d)/3)))*3,m=Math.pow(10,-p),g=Ec[8+p/3];return function(v){return f(m*v)+g}}return{format:c,formatPrefix:u}}var ui,Ra,Sd;u0({thousands:",",grouping:[3],currency:["$",""]});function u0(t){return ui=c0(t),Ra=ui.format,Sd=ui.formatPrefix,ui}function h0(t){return Math.max(0,-er(Math.abs(t)))}function d0(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(er(e)/3)))*3-er(Math.abs(t)))}function f0(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,er(e)-er(t))+1}function hr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Tc=Symbol("implicit");function $a(){var t=new ql,e=[],n=[],r=Tc;function i(s){let o=t.get(s);if(o===void 0){if(r!==Tc)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new ql;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return $a(e,n).unknown(r)},hr.apply(i,arguments),i}function ys(){var t=$a().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var d=e().length,f=i<r,p=f?i:r,m=f?r:i;s=(m-p)/Math.max(1,d-l+c*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=fm(d).map(function(v){return p+s*v});return n(f?g.reverse():g)}return t.domain=function(d){return arguments.length?(e(d),h()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(d){return arguments.length?(a=!!d,h()):a},t.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),h()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),h()):l},t.paddingOuter=function(d){return arguments.length?(c=+d,h()):c},t.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),h()):u},t.copy=function(){return ys(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},hr.apply(h(),arguments)}function p0(t){return function(){return t}}function m0(t){return+t}var Sc=[0,1];function zn(t){return t}function Uo(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:p0(isNaN(e)?NaN:.5)}function g0(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function v0(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Uo(i,r),s=n(o,s)):(r=Uo(r,i),s=n(s,o)),function(a){return s(r(a))}}function y0(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Uo(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Ea(t,a,1,r)-1;return s[l](i[l](a))}}function Ia(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Od(){var t=Sc,e=Sc,n=ei,r,i,s,o=zn,a,l,c;function u(){var d=Math.min(t.length,e.length);return o!==zn&&(o=g0(t[0],t[d-1])),a=d>2?y0:v0,l=c=null,h}function h(d){return d==null||isNaN(d=+d)?s:(l||(l=a(t.map(r),e,n)))(r(o(d)))}return h.invert=function(d){return o(i((c||(c=a(e,t.map(r),oe)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,m0),u()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=hd,u()},h.clamp=function(d){return arguments.length?(o=d?!0:zn,u()):o!==zn},h.interpolate=function(d){return arguments.length?(n=d,u()):n},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,f){return r=d,i=f,u()}}function Md(){return Od()(zn,zn)}function _0(t,e,n,r){var i=To(t,e,n),s;switch(r=zr(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=d0(i,o))&&(r.precision=s),Sd(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=f0(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=h0(i))&&(r.precision=s-(r.type==="%")*2);break}}return Ra(r)}function Ad(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ui(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return _0(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=Qn(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function Tn(){var t=Md();return t.copy=function(){return Ia(t,Tn())},hr.apply(t,arguments),Ad(t)}function Cd(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function Oc(t){return Math.log(t)}function Mc(t){return Math.exp(t)}function b0(t){return-Math.log(-t)}function w0(t){return-Math.exp(-t)}function x0(t){return isFinite(t)?+("1e"+t):t<0?0:t}function E0(t){return t===10?x0:t===Math.E?Math.exp:e=>Math.pow(t,e)}function T0(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Ac(t){return(e,n)=>-t(-e,n)}function S0(t){const e=t(Oc,Mc),n=e.domain;let r=10,i,s;function o(){return i=T0(r),s=E0(r),n()[0]<0?(i=Ac(i),s=Ac(s),t(b0,w0)):t(Oc,Mc),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let d=i(c),f=i(u),p,m;const g=a==null?10:+a;let v=[];if(!(r%1)&&f-d<g){if(d=Math.floor(d),f=Math.ceil(f),c>0){for(;d<=f;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<c)){if(m>u)break;v.push(m)}}else for(;d<=f;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<c)){if(m>u)break;v.push(m)}v.length*2<g&&(v=Ui(c,u,g))}else v=Ui(d,f,Math.min(f-d,g)).map(s);return h?v.reverse():v},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=zr(l)).precision==null&&(l.trim=!0),l=Ra(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let h=u/s(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=c?l(u):""}},e.nice=()=>n(Cd(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function Dd(){const t=S0(Od()).domain([1,10]);return t.copy=()=>Ia(t,Dd()).base(t.base()),hr.apply(t,arguments),t}function Pa(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[Ea(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Pa().domain([t,e]).range(i).unknown(s)},hr.apply(Ad(o),arguments)}const qs=new Date,Zs=new Date;function It(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=s=>It(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(qs.setTime(+s),Zs.setTime(+o),t(qs),t(Zs),Math.floor(n(qs,Zs))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const qi=It(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);qi.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?It(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):qi);qi.range;const Fe=1e3,ue=Fe*60,Ve=ue*60,Ye=Ve*24,Na=Ye*7,Cc=Ye*30,Ks=Ye*365,Gn=It(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Fe)},(t,e)=>(e-t)/Fe,t=>t.getUTCSeconds());Gn.range;const Ba=It(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fe)},(t,e)=>{t.setTime(+t+e*ue)},(t,e)=>(e-t)/ue,t=>t.getMinutes());Ba.range;const O0=It(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ue)},(t,e)=>(e-t)/ue,t=>t.getUTCMinutes());O0.range;const Ua=It(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fe-t.getMinutes()*ue)},(t,e)=>{t.setTime(+t+e*Ve)},(t,e)=>(e-t)/Ve,t=>t.getHours());Ua.range;const M0=It(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ve)},(t,e)=>(e-t)/Ve,t=>t.getUTCHours());M0.range;const ni=It(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ue)/Ye,t=>t.getDate()-1);ni.range;const Ha=It(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ye,t=>t.getUTCDate()-1);Ha.range;const A0=It(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ye,t=>Math.floor(t/Ye));A0.range;function An(t){return It(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ue)/Na)}const _s=An(0),Zi=An(1),C0=An(2),D0=An(3),nr=An(4),L0=An(5),k0=An(6);_s.range;Zi.range;C0.range;D0.range;nr.range;L0.range;k0.range;function Cn(t){return It(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Na)}const Ld=Cn(0),Ki=Cn(1),R0=Cn(2),$0=Cn(3),rr=Cn(4),I0=Cn(5),P0=Cn(6);Ld.range;Ki.range;R0.range;$0.range;rr.range;I0.range;P0.range;const Fa=It(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Fa.range;const N0=It(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());N0.range;const Xe=It(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Xe.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:It(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Xe.range;const Sn=It(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Sn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:It(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Sn.range;function B0(t,e,n,r,i,s){const o=[[Gn,1,Fe],[Gn,5,5*Fe],[Gn,15,15*Fe],[Gn,30,30*Fe],[s,1,ue],[s,5,5*ue],[s,15,15*ue],[s,30,30*ue],[i,1,Ve],[i,3,3*Ve],[i,6,6*Ve],[i,12,12*Ve],[r,1,Ye],[r,2,2*Ye],[n,1,Na],[e,1,Cc],[e,3,3*Cc],[t,1,Ks]];function a(c,u,h){const d=u<c;d&&([c,u]=[u,c]);const f=h&&typeof h.range=="function"?h:l(c,u,h),p=f?f.range(c,+u+1):[];return d?p.reverse():p}function l(c,u,h){const d=Math.abs(u-c)/h,f=xa(([,,g])=>g).right(o,d);if(f===o.length)return t.every(To(c/Ks,u/Ks,h));if(f===0)return qi.every(Math.max(To(c,u,h),1));const[p,m]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return p.every(m)}return[a,l]}const[U0,H0]=B0(Xe,Fa,_s,ni,Ua,Ba);function Qs(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Js(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function gr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function F0(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=vr(i),u=yr(i),h=vr(s),d=yr(s),f=vr(o),p=yr(o),m=vr(a),g=yr(a),v=vr(l),b=yr(l),_={a:N,A:J,b:q,B:Z,c:null,d:Ic,e:Ic,f:u1,g:b1,G:x1,H:a1,I:l1,j:c1,L:kd,m:h1,M:d1,p:it,q:Y,Q:Bc,s:Uc,S:f1,u:p1,U:m1,V:g1,w:v1,W:y1,x:null,X:null,y:_1,Y:w1,Z:E1,"%":Nc},T={a:Lt,A:tt,b:gt,B:H,c:null,d:Pc,e:Pc,f:M1,g:N1,G:U1,H:T1,I:S1,j:O1,L:$d,m:A1,M:C1,p:X,q:st,Q:Bc,s:Uc,S:D1,u:L1,U:k1,V:R1,w:$1,W:I1,x:null,X:null,y:P1,Y:B1,Z:H1,"%":Nc},x={a:L,A:I,b:V,B:$,c:U,d:Rc,e:Rc,f:r1,g:kc,G:Lc,H:$c,I:$c,j:J0,L:n1,m:Q0,M:t1,p:M,q:K0,Q:s1,s:o1,S:e1,u:W0,U:Y0,V:X0,w:j0,W:q0,x:K,X:W,y:kc,Y:Lc,Z:Z0,"%":i1};_.x=E(n,_),_.X=E(r,_),_.c=E(e,_),T.x=E(n,T),T.X=E(r,T),T.c=E(e,T);function E(P,G){return function(Q){var k=[],ht=-1,lt=0,Rt=P.length,St,j,vt;for(Q instanceof Date||(Q=new Date(+Q));++ht<Rt;)P.charCodeAt(ht)===37&&(k.push(P.slice(lt,ht)),(j=Dc[St=P.charAt(++ht)])!=null?St=P.charAt(++ht):j=St==="e"?" ":"0",(vt=G[St])&&(St=vt(Q,j)),k.push(St),lt=ht+1);return k.push(P.slice(lt,ht)),k.join("")}}function O(P,G){return function(Q){var k=gr(1900,void 0,1),ht=A(k,P,Q+="",0),lt,Rt;if(ht!=Q.length)return null;if("Q"in k)return new Date(k.Q);if("s"in k)return new Date(k.s*1e3+("L"in k?k.L:0));if(G&&!("Z"in k)&&(k.Z=0),"p"in k&&(k.H=k.H%12+k.p*12),k.m===void 0&&(k.m="q"in k?k.q:0),"V"in k){if(k.V<1||k.V>53)return null;"w"in k||(k.w=1),"Z"in k?(lt=Js(gr(k.y,0,1)),Rt=lt.getUTCDay(),lt=Rt>4||Rt===0?Ki.ceil(lt):Ki(lt),lt=Ha.offset(lt,(k.V-1)*7),k.y=lt.getUTCFullYear(),k.m=lt.getUTCMonth(),k.d=lt.getUTCDate()+(k.w+6)%7):(lt=Qs(gr(k.y,0,1)),Rt=lt.getDay(),lt=Rt>4||Rt===0?Zi.ceil(lt):Zi(lt),lt=ni.offset(lt,(k.V-1)*7),k.y=lt.getFullYear(),k.m=lt.getMonth(),k.d=lt.getDate()+(k.w+6)%7)}else("W"in k||"U"in k)&&("w"in k||(k.w="u"in k?k.u%7:"W"in k?1:0),Rt="Z"in k?Js(gr(k.y,0,1)).getUTCDay():Qs(gr(k.y,0,1)).getDay(),k.m=0,k.d="W"in k?(k.w+6)%7+k.W*7-(Rt+5)%7:k.w+k.U*7-(Rt+6)%7);return"Z"in k?(k.H+=k.Z/100|0,k.M+=k.Z%100,Js(k)):Qs(k)}}function A(P,G,Q,k){for(var ht=0,lt=G.length,Rt=Q.length,St,j;ht<lt;){if(k>=Rt)return-1;if(St=G.charCodeAt(ht++),St===37){if(St=G.charAt(ht++),j=x[St in Dc?G.charAt(ht++):St],!j||(k=j(P,Q,k))<0)return-1}else if(St!=Q.charCodeAt(k++))return-1}return k}function M(P,G,Q){var k=c.exec(G.slice(Q));return k?(P.p=u.get(k[0].toLowerCase()),Q+k[0].length):-1}function L(P,G,Q){var k=f.exec(G.slice(Q));return k?(P.w=p.get(k[0].toLowerCase()),Q+k[0].length):-1}function I(P,G,Q){var k=h.exec(G.slice(Q));return k?(P.w=d.get(k[0].toLowerCase()),Q+k[0].length):-1}function V(P,G,Q){var k=v.exec(G.slice(Q));return k?(P.m=b.get(k[0].toLowerCase()),Q+k[0].length):-1}function $(P,G,Q){var k=m.exec(G.slice(Q));return k?(P.m=g.get(k[0].toLowerCase()),Q+k[0].length):-1}function U(P,G,Q){return A(P,e,G,Q)}function K(P,G,Q){return A(P,n,G,Q)}function W(P,G,Q){return A(P,r,G,Q)}function N(P){return o[P.getDay()]}function J(P){return s[P.getDay()]}function q(P){return l[P.getMonth()]}function Z(P){return a[P.getMonth()]}function it(P){return i[+(P.getHours()>=12)]}function Y(P){return 1+~~(P.getMonth()/3)}function Lt(P){return o[P.getUTCDay()]}function tt(P){return s[P.getUTCDay()]}function gt(P){return l[P.getUTCMonth()]}function H(P){return a[P.getUTCMonth()]}function X(P){return i[+(P.getUTCHours()>=12)]}function st(P){return 1+~~(P.getUTCMonth()/3)}return{format:function(P){var G=E(P+="",_);return G.toString=function(){return P},G},parse:function(P){var G=O(P+="",!1);return G.toString=function(){return P},G},utcFormat:function(P){var G=E(P+="",T);return G.toString=function(){return P},G},utcParse:function(P){var G=O(P+="",!0);return G.toString=function(){return P},G}}}var Dc={"-":"",_:" ",0:"0"},Ht=/^\s*\d+/,V0=/^%/,z0=/[\\^$*+?|[\]().{}]/g;function ut(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function G0(t){return t.replace(z0,"\\$&")}function vr(t){return new RegExp("^(?:"+t.map(G0).join("|")+")","i")}function yr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function j0(t,e,n){var r=Ht.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function W0(t,e,n){var r=Ht.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Y0(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function X0(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function q0(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Lc(t,e,n){var r=Ht.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function kc(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Z0(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function K0(t,e,n){var r=Ht.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Q0(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Rc(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function J0(t,e,n){var r=Ht.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function $c(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function t1(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function e1(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function n1(t,e,n){var r=Ht.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function r1(t,e,n){var r=Ht.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function i1(t,e,n){var r=V0.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function s1(t,e,n){var r=Ht.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function o1(t,e,n){var r=Ht.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Ic(t,e){return ut(t.getDate(),e,2)}function a1(t,e){return ut(t.getHours(),e,2)}function l1(t,e){return ut(t.getHours()%12||12,e,2)}function c1(t,e){return ut(1+ni.count(Xe(t),t),e,3)}function kd(t,e){return ut(t.getMilliseconds(),e,3)}function u1(t,e){return kd(t,e)+"000"}function h1(t,e){return ut(t.getMonth()+1,e,2)}function d1(t,e){return ut(t.getMinutes(),e,2)}function f1(t,e){return ut(t.getSeconds(),e,2)}function p1(t){var e=t.getDay();return e===0?7:e}function m1(t,e){return ut(_s.count(Xe(t)-1,t),e,2)}function Rd(t){var e=t.getDay();return e>=4||e===0?nr(t):nr.ceil(t)}function g1(t,e){return t=Rd(t),ut(nr.count(Xe(t),t)+(Xe(t).getDay()===4),e,2)}function v1(t){return t.getDay()}function y1(t,e){return ut(Zi.count(Xe(t)-1,t),e,2)}function _1(t,e){return ut(t.getFullYear()%100,e,2)}function b1(t,e){return t=Rd(t),ut(t.getFullYear()%100,e,2)}function w1(t,e){return ut(t.getFullYear()%1e4,e,4)}function x1(t,e){var n=t.getDay();return t=n>=4||n===0?nr(t):nr.ceil(t),ut(t.getFullYear()%1e4,e,4)}function E1(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ut(e/60|0,"0",2)+ut(e%60,"0",2)}function Pc(t,e){return ut(t.getUTCDate(),e,2)}function T1(t,e){return ut(t.getUTCHours(),e,2)}function S1(t,e){return ut(t.getUTCHours()%12||12,e,2)}function O1(t,e){return ut(1+Ha.count(Sn(t),t),e,3)}function $d(t,e){return ut(t.getUTCMilliseconds(),e,3)}function M1(t,e){return $d(t,e)+"000"}function A1(t,e){return ut(t.getUTCMonth()+1,e,2)}function C1(t,e){return ut(t.getUTCMinutes(),e,2)}function D1(t,e){return ut(t.getUTCSeconds(),e,2)}function L1(t){var e=t.getUTCDay();return e===0?7:e}function k1(t,e){return ut(Ld.count(Sn(t)-1,t),e,2)}function Id(t){var e=t.getUTCDay();return e>=4||e===0?rr(t):rr.ceil(t)}function R1(t,e){return t=Id(t),ut(rr.count(Sn(t),t)+(Sn(t).getUTCDay()===4),e,2)}function $1(t){return t.getUTCDay()}function I1(t,e){return ut(Ki.count(Sn(t)-1,t),e,2)}function P1(t,e){return ut(t.getUTCFullYear()%100,e,2)}function N1(t,e){return t=Id(t),ut(t.getUTCFullYear()%100,e,2)}function B1(t,e){return ut(t.getUTCFullYear()%1e4,e,4)}function U1(t,e){var n=t.getUTCDay();return t=n>=4||n===0?rr(t):rr.ceil(t),ut(t.getUTCFullYear()%1e4,e,4)}function H1(){return"+0000"}function Nc(){return"%"}function Bc(t){return+t}function Uc(t){return Math.floor(+t/1e3)}var Hn,Pd;F1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function F1(t){return Hn=F0(t),Pd=Hn.format,Hn.parse,Hn.utcFormat,Hn.utcParse,Hn}function V1(t){return new Date(t)}function z1(t){return t instanceof Date?+t:+new Date(+t)}function Nd(t,e,n,r,i,s,o,a,l,c){var u=Md(),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),b=c("%b %d"),_=c("%B"),T=c("%Y");function x(E){return(l(E)<E?f:a(E)<E?p:o(E)<E?m:s(E)<E?g:r(E)<E?i(E)<E?v:b:n(E)<E?_:T)(E)}return u.invert=function(E){return new Date(h(E))},u.domain=function(E){return arguments.length?d(Array.from(E,z1)):d().map(V1)},u.ticks=function(E){var O=d();return t(O[0],O[O.length-1],E??10)},u.tickFormat=function(E,O){return O==null?x:c(O)},u.nice=function(E){var O=d();return(!E||typeof E.range!="function")&&(E=e(O[0],O[O.length-1],E??10)),E?d(Cd(O,E)):u},u.copy=function(){return Ia(u,Nd(t,e,n,r,i,s,o,a,l,c))},u}function Bd(){return hr.apply(Nd(U0,H0,Xe,Fa,_s,ni,Ua,Ba,Gn,Pd).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rt(t){return function(){return t}}const Hc=Math.abs,Gt=Math.atan2,hn=Math.cos,G1=Math.max,to=Math.min,Ee=Math.sin,jn=Math.sqrt,jt=1e-12,Gr=Math.PI,Qi=Gr/2,Ci=2*Gr;function j1(t){return t>1?0:t<-1?Gr:Math.acos(t)}function Fc(t){return t>=1?Qi:t<=-1?-Qi:Math.asin(t)}function Va(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new n0(e)}function W1(t){return t.innerRadius}function Y1(t){return t.outerRadius}function X1(t){return t.startAngle}function q1(t){return t.endAngle}function Z1(t){return t&&t.padAngle}function K1(t,e,n,r,i,s,o,a){var l=n-t,c=r-e,u=o-i,h=a-s,d=h*l-u*c;if(!(d*d<jt))return d=(u*(e-s)-h*(t-i))/d,[t+d*l,e+d*c]}function hi(t,e,n,r,i,s,o){var a=t-n,l=e-r,c=(o?s:-s)/jn(a*a+l*l),u=c*l,h=-c*a,d=t+u,f=e+h,p=n+u,m=r+h,g=(d+p)/2,v=(f+m)/2,b=p-d,_=m-f,T=b*b+_*_,x=i-s,E=d*m-p*f,O=(_<0?-1:1)*jn(G1(0,x*x*T-E*E)),A=(E*_-b*O)/T,M=(-E*b-_*O)/T,L=(E*_+b*O)/T,I=(-E*b+_*O)/T,V=A-g,$=M-v,U=L-g,K=I-v;return V*V+$*$>U*U+K*K&&(A=L,M=I),{cx:A,cy:M,x01:-u,y01:-h,x11:A*(i/x-1),y11:M*(i/x-1)}}function Ho(){var t=W1,e=Y1,n=rt(0),r=null,i=X1,s=q1,o=Z1,a=null,l=Va(c);function c(){var u,h,d=+t.apply(this,arguments),f=+e.apply(this,arguments),p=i.apply(this,arguments)-Qi,m=s.apply(this,arguments)-Qi,g=Hc(m-p),v=m>p;if(a||(a=u=l()),f<d&&(h=f,f=d,d=h),!(f>jt))a.moveTo(0,0);else if(g>Ci-jt)a.moveTo(f*hn(p),f*Ee(p)),a.arc(0,0,f,p,m,!v),d>jt&&(a.moveTo(d*hn(m),d*Ee(m)),a.arc(0,0,d,m,p,v));else{var b=p,_=m,T=p,x=m,E=g,O=g,A=o.apply(this,arguments)/2,M=A>jt&&(r?+r.apply(this,arguments):jn(d*d+f*f)),L=to(Hc(f-d)/2,+n.apply(this,arguments)),I=L,V=L,$,U;if(M>jt){var K=Fc(M/d*Ee(A)),W=Fc(M/f*Ee(A));(E-=K*2)>jt?(K*=v?1:-1,T+=K,x-=K):(E=0,T=x=(p+m)/2),(O-=W*2)>jt?(W*=v?1:-1,b+=W,_-=W):(O=0,b=_=(p+m)/2)}var N=f*hn(b),J=f*Ee(b),q=d*hn(x),Z=d*Ee(x);if(L>jt){var it=f*hn(_),Y=f*Ee(_),Lt=d*hn(T),tt=d*Ee(T),gt;if(g<Gr)if(gt=K1(N,J,Lt,tt,it,Y,q,Z)){var H=N-gt[0],X=J-gt[1],st=it-gt[0],P=Y-gt[1],G=1/Ee(j1((H*st+X*P)/(jn(H*H+X*X)*jn(st*st+P*P)))/2),Q=jn(gt[0]*gt[0]+gt[1]*gt[1]);I=to(L,(d-Q)/(G-1)),V=to(L,(f-Q)/(G+1))}else I=V=0}O>jt?V>jt?($=hi(Lt,tt,N,J,f,V,v),U=hi(it,Y,q,Z,f,V,v),a.moveTo($.cx+$.x01,$.cy+$.y01),V<L?a.arc($.cx,$.cy,V,Gt($.y01,$.x01),Gt(U.y01,U.x01),!v):(a.arc($.cx,$.cy,V,Gt($.y01,$.x01),Gt($.y11,$.x11),!v),a.arc(0,0,f,Gt($.cy+$.y11,$.cx+$.x11),Gt(U.cy+U.y11,U.cx+U.x11),!v),a.arc(U.cx,U.cy,V,Gt(U.y11,U.x11),Gt(U.y01,U.x01),!v))):(a.moveTo(N,J),a.arc(0,0,f,b,_,!v)):a.moveTo(N,J),!(d>jt)||!(E>jt)?a.lineTo(q,Z):I>jt?($=hi(q,Z,it,Y,d,-I,v),U=hi(N,J,Lt,tt,d,-I,v),a.lineTo($.cx+$.x01,$.cy+$.y01),I<L?a.arc($.cx,$.cy,I,Gt($.y01,$.x01),Gt(U.y01,U.x01),!v):(a.arc($.cx,$.cy,I,Gt($.y01,$.x01),Gt($.y11,$.x11),!v),a.arc(0,0,d,Gt($.cy+$.y11,$.cx+$.x11),Gt(U.cy+U.y11,U.cx+U.x11),v),a.arc(U.cx,U.cy,I,Gt(U.y11,U.x11),Gt(U.y01,U.x01),!v))):a.arc(0,0,d,x,T,v)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Gr/2;return[hn(h)*u,Ee(h)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:rt(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:rt(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:rt(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:rt(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:rt(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:rt(+u),c):s},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:rt(+u),c):o},c.context=function(u){return arguments.length?(a=u??null,c):a},c}function bs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ud(t){this._context=t}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function za(t){return new Ud(t)}function Hd(t){return t[0]}function Fd(t){return t[1]}function Ga(t,e){var n=rt(!0),r=null,i=za,s=null,o=Va(a);t=typeof t=="function"?t:t===void 0?Hd:rt(t),e=typeof e=="function"?e:e===void 0?Fd:rt(e);function a(l){var c,u=(l=bs(l)).length,h,d=!1,f;for(r==null&&(s=i(f=o())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(h,c,l),+e(h,c,l));if(f)return s=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:rt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:rt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:rt(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function ja(t,e,n){var r=null,i=rt(!0),s=null,o=za,a=null,l=Va(c);t=typeof t=="function"?t:t===void 0?Hd:rt(+t),e=typeof e=="function"?e:rt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Fd:rt(+n);function c(h){var d,f,p,m=(h=bs(h)).length,g,v=!1,b,_=new Array(m),T=new Array(m);for(s==null&&(a=o(b=l())),d=0;d<=m;++d){if(!(d<m&&i(g=h[d],d,h))===v)if(v=!v)f=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=f;--p)a.point(_[p],T[p]);a.lineEnd(),a.areaEnd()}v&&(_[d]=+t(g,d,h),T[d]=+e(g,d,h),a.point(r?+r(g,d,h):_[d],n?+n(g,d,h):T[d]))}if(b)return a=null,b+""||null}function u(){return Ga().defined(i).curve(o).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:rt(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:rt(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:rt(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:rt(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:rt(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:rt(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:rt(!!h),c):i},c.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),c):o},c.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),c):s},c}function Q1(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function J1(t){return t}function t_(){var t=J1,e=Q1,n=null,r=rt(0),i=rt(Ci),s=rt(0);function o(a){var l,c=(a=bs(a)).length,u,h,d=0,f=new Array(c),p=new Array(c),m=+r.apply(this,arguments),g=Math.min(Ci,Math.max(-Ci,i.apply(this,arguments)-m)),v,b=Math.min(Math.abs(g)/c,s.apply(this,arguments)),_=b*(g<0?-1:1),T;for(l=0;l<c;++l)(T=p[f[l]=l]=+t(a[l],l,a))>0&&(d+=T);for(e!=null?f.sort(function(x,E){return e(p[x],p[E])}):n!=null&&f.sort(function(x,E){return n(a[x],a[E])}),l=0,h=d?(g-c*_)/d:0;l<c;++l,m=v)u=f[l],T=p[u],v=m+(T>0?T*h:0)+_,p[u]={data:a[u],index:l,value:T,startAngle:m,endAngle:v,padAngle:b};return p}return o.value=function(a){return arguments.length?(t=typeof a=="function"?a:rt(+a),o):t},o.sortValues=function(a){return arguments.length?(e=a,n=null,o):e},o.sort=function(a){return arguments.length?(n=a,e=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:rt(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:rt(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:rt(+a),o):s},o}function an(){}function Ji(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ws(t){this._context=t}ws.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ji(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ji(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function e_(t){return new ws(t)}function Vd(t){this._context=t}Vd.prototype={areaStart:an,areaEnd:an,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ji(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function n_(t){return new Vd(t)}function zd(t){this._context=t}zd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ji(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function r_(t){return new zd(t)}function Gd(t,e){this._basis=new ws(t),this._beta=e}Gd.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const i_=function t(e){function n(r){return e===1?new ws(r):new Gd(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function ts(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Wa(t,e){this._context=t,this._k=(1-e)/6}Wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ts(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ts(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const s_=function t(e){function n(r){return new Wa(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Ya(t,e){this._context=t,this._k=(1-e)/6}Ya.prototype={areaStart:an,areaEnd:an,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ts(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const o_=function t(e){function n(r){return new Ya(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Xa(t,e){this._context=t,this._k=(1-e)/6}Xa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ts(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const a_=function t(e){function n(r){return new Xa(r,e)}return n.tension=function(r){return t(+r)},n}(0);function qa(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>jt){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>jt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function jd(t,e){this._context=t,this._alpha=e}jd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:qa(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const l_=function t(e){function n(r){return e?new jd(r,e):new Wa(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Wd(t,e){this._context=t,this._alpha=e}Wd.prototype={areaStart:an,areaEnd:an,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:qa(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const c_=function t(e){function n(r){return e?new Wd(r,e):new Ya(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Yd(t,e){this._context=t,this._alpha=e}Yd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qa(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const u_=function t(e){function n(r){return e?new Yd(r,e):new Xa(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Xd(t){this._context=t}Xd.prototype={areaStart:an,areaEnd:an,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function h_(t){return new Xd(t)}function Vc(t){return t<0?-1:1}function zc(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Vc(s)+Vc(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Gc(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function eo(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function es(t){this._context=t}es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:eo(this,this._t0,Gc(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,eo(this,Gc(this,n=zc(this,t,e)),n);break;default:eo(this,this._t0,n=zc(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function qd(t){this._context=new Zd(t)}(qd.prototype=Object.create(es.prototype)).point=function(t,e){es.prototype.point.call(this,e,t)};function Zd(t){this._context=t}Zd.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function d_(t){return new es(t)}function f_(t){return new qd(t)}function Kd(t){this._context=t}Kd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=jc(t),i=jc(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function jc(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function p_(t){return new Kd(t)}function xs(t,e){this._context=t,this._t=e}xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function m_(t){return new xs(t,.5)}function g_(t){return new xs(t,0)}function v_(t){return new xs(t,1)}function Wc(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Yc(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function y_(t,e){return t[e]}function __(t){const e=[];return e.key=t,e}function no(){var t=rt([]),e=Yc,n=Wc,r=y_;function i(s){var o=Array.from(t.apply(this,arguments),__),a,l=o.length,c=-1,u;for(const h of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(h,o[a].key,c,s)]).data=h;for(a=0,u=bs(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:rt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:rt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?Yc:typeof s=="function"?s:rt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Wc,i):n},i}function b_(t,e){if((l=t.length)>0)for(var n,r=0,i,s,o,a,l,c=t[e[0]].length;r<c;++r)for(o=a=0,n=0;n<l;++n)(s=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=s):s<0?(i[1]=a,i[0]=a+=s):(i[0]=0,i[1]=s)}function Dr(t,e,n){this.k=t,this.x=e,this.y=n}Dr.prototype={constructor:Dr,scale:function(t){return t===1?this:new Dr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Dr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Dr.prototype;function ro(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}function _r(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}function br(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?x_(a,h=>h.test(o)):w_(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function w_(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function x_(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function E_(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}function ct(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}let T_={};function Es(){return T_}function jr(t,e){var n,r,i,s;const o=Es(),a=(e==null?void 0:e.weekStartsOn)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.weekStartsOn)??o.weekStartsOn??((s=(i=o.locale)==null?void 0:i.options)==null?void 0:s.weekStartsOn)??0,l=ct(t),c=l.getDay(),u=(c<a?7:0)+c-a;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}const S_={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},O_=(t,e,n)=>{let r;const i=S_[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},M_={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},A_=(t,e,n,r)=>M_[t],C_={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},D_={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},L_={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},k_={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},R_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},I_=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},P_={ordinalNumber:I_,era:_r({values:C_,defaultWidth:"wide"}),quarter:_r({values:D_,defaultWidth:"wide",argumentCallback:t=>t-1}),month:_r({values:L_,defaultWidth:"wide"}),day:_r({values:k_,defaultWidth:"wide"}),dayPeriod:_r({values:R_,defaultWidth:"wide",formattingValues:$_,defaultFormattingWidth:"wide"})},N_=/^(\d+)(th|st|nd|rd)?/i,B_=/\d+/i,U_={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},H_={any:[/^b/i,/^(a|c)/i]},F_={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},V_={any:[/1/i,/2/i,/3/i,/4/i]},z_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},G_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},j_={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},W_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Y_={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},X_={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},q_={ordinalNumber:E_({matchPattern:N_,parsePattern:B_,valueCallback:t=>parseInt(t,10)}),era:br({matchPatterns:U_,defaultMatchWidth:"wide",parsePatterns:H_,defaultParseWidth:"any"}),quarter:br({matchPatterns:F_,defaultMatchWidth:"wide",parsePatterns:V_,defaultParseWidth:"any",valueCallback:t=>t+1}),month:br({matchPatterns:z_,defaultMatchWidth:"wide",parsePatterns:G_,defaultParseWidth:"any"}),day:br({matchPatterns:j_,defaultMatchWidth:"wide",parsePatterns:W_,defaultParseWidth:"any"}),dayPeriod:br({matchPatterns:Y_,defaultMatchWidth:"any",parsePatterns:X_,defaultParseWidth:"any"})},Z_={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},K_={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Q_={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},J_={date:ro({formats:Z_,defaultWidth:"full"}),time:ro({formats:K_,defaultWidth:"full"}),dateTime:ro({formats:Q_,defaultWidth:"full"})},Qd={code:"en-US",formatDistance:O_,formatLong:J_,formatRelative:A_,localize:P_,match:q_,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Jd=typeof global=="object"&&global&&global.Object===Object&&global,tb=typeof self=="object"&&self&&self.Object===Object&&self,we=Jd||tb||Function("return this")(),he=we.Symbol,tf=Object.prototype,eb=tf.hasOwnProperty,nb=tf.toString,wr=he?he.toStringTag:void 0;function rb(t){var e=eb.call(t,wr),n=t[wr];try{t[wr]=void 0;var r=!0}catch{}var i=nb.call(t);return r&&(e?t[wr]=n:delete t[wr]),i}var ib=Object.prototype,sb=ib.toString;function ob(t){return sb.call(t)}var ab="[object Null]",lb="[object Undefined]",Xc=he?he.toStringTag:void 0;function Dn(t){return t==null?t===void 0?lb:ab:Xc&&Xc in Object(t)?rb(t):ob(t)}function ke(t){return t!=null&&typeof t=="object"}var cb="[object Symbol]";function Ts(t){return typeof t=="symbol"||ke(t)&&Dn(t)==cb}function ub(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Wt=Array.isArray,hb=1/0,qc=he?he.prototype:void 0,Zc=qc?qc.toString:void 0;function ef(t){if(typeof t=="string")return t;if(Wt(t))return ub(t,ef)+"";if(Ts(t))return Zc?Zc.call(t):"";var e=t+"";return e=="0"&&1/t==-hb?"-0":e}function de(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Za(t){return t}var db="[object AsyncFunction]",fb="[object Function]",pb="[object GeneratorFunction]",mb="[object Proxy]";function Ka(t){if(!de(t))return!1;var e=Dn(t);return e==fb||e==pb||e==db||e==mb}var io=we["__core-js_shared__"],Kc=function(){var t=/[^.]+$/.exec(io&&io.keys&&io.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function gb(t){return!!Kc&&Kc in t}var vb=Function.prototype,yb=vb.toString;function Ln(t){if(t!=null){try{return yb.call(t)}catch{}try{return t+""}catch{}}return""}var _b=/[\\^$.*+?()[\]{}|]/g,bb=/^\[object .+?Constructor\]$/,wb=Function.prototype,xb=Object.prototype,Eb=wb.toString,Tb=xb.hasOwnProperty,Sb=RegExp("^"+Eb.call(Tb).replace(_b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ob(t){if(!de(t)||gb(t))return!1;var e=Ka(t)?Sb:bb;return e.test(Ln(t))}function Mb(t,e){return t==null?void 0:t[e]}function kn(t,e){var n=Mb(t,e);return Ob(n)?n:void 0}var Fo=kn(we,"WeakMap"),Qc=Object.create,Ab=function(){function t(){}return function(e){if(!de(e))return{};if(Qc)return Qc(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Cb(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Db(){}function Lb(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var kb=800,Rb=16,$b=Date.now;function Ib(t){var e=0,n=0;return function(){var r=$b(),i=Rb-(r-n);if(n=r,i>0){if(++e>=kb)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Pb(t){return function(){return t}}var ns=function(){try{var t=kn(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Nb=ns?function(t,e){return ns(t,"toString",{configurable:!0,enumerable:!1,value:Pb(e),writable:!0})}:Za;const Bb=Nb;var Ub=Ib(Bb);function Hb(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function Fb(t,e,n,r){for(var i=t.length,s=n+-1;++s<i;)if(e(t[s],s,t))return s;return-1}function Vb(t){return t!==t}function zb(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Gb(t,e,n){return e===e?zb(t,e,n):Fb(t,Vb,n)}function jb(t,e){var n=t==null?0:t.length;return!!n&&Gb(t,e,0)>-1}var Wb=9007199254740991,Yb=/^(?:0|[1-9]\d*)$/;function Qa(t,e){var n=typeof t;return e=e??Wb,!!e&&(n=="number"||n!="symbol"&&Yb.test(t))&&t>-1&&t%1==0&&t<e}function Ss(t,e,n){e=="__proto__"&&ns?ns(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ri(t,e){return t===e||t!==t&&e!==e}var Xb=Object.prototype,qb=Xb.hasOwnProperty;function nf(t,e,n){var r=t[e];(!(qb.call(t,e)&&ri(r,n))||n===void 0&&!(e in t))&&Ss(t,e,n)}function Zb(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=t[a]),i?Ss(n,a,l):nf(n,a,l)}return n}var Jc=Math.max;function Kb(t,e,n){return e=Jc(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Jc(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),Cb(t,this,a)}}function Ja(t,e){return Ub(Kb(t,e,Za),t+"")}var Qb=9007199254740991;function tl(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Qb}function dr(t){return t!=null&&tl(t.length)&&!Ka(t)}function Jb(t,e,n){if(!de(n))return!1;var r=typeof e;return(r=="number"?dr(n)&&Qa(e,n.length):r=="string"&&e in n)?ri(n[e],t):!1}function tw(t){return Ja(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&Jb(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var ew=Object.prototype;function Os(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||ew;return t===n}function nw(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var rw="[object Arguments]";function tu(t){return ke(t)&&Dn(t)==rw}var rf=Object.prototype,iw=rf.hasOwnProperty,sw=rf.propertyIsEnumerable,ow=tu(function(){return arguments}())?tu:function(t){return ke(t)&&iw.call(t,"callee")&&!sw.call(t,"callee")};const ir=ow;function aw(){return!1}var sf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,eu=sf&&typeof module=="object"&&module&&!module.nodeType&&module,lw=eu&&eu.exports===sf,nu=lw?we.Buffer:void 0,cw=nu?nu.isBuffer:void 0,uw=cw||aw;const sr=uw;var hw="[object Arguments]",dw="[object Array]",fw="[object Boolean]",pw="[object Date]",mw="[object Error]",gw="[object Function]",vw="[object Map]",yw="[object Number]",_w="[object Object]",bw="[object RegExp]",ww="[object Set]",xw="[object String]",Ew="[object WeakMap]",Tw="[object ArrayBuffer]",Sw="[object DataView]",Ow="[object Float32Array]",Mw="[object Float64Array]",Aw="[object Int8Array]",Cw="[object Int16Array]",Dw="[object Int32Array]",Lw="[object Uint8Array]",kw="[object Uint8ClampedArray]",Rw="[object Uint16Array]",$w="[object Uint32Array]",bt={};bt[Ow]=bt[Mw]=bt[Aw]=bt[Cw]=bt[Dw]=bt[Lw]=bt[kw]=bt[Rw]=bt[$w]=!0;bt[hw]=bt[dw]=bt[Tw]=bt[fw]=bt[Sw]=bt[pw]=bt[mw]=bt[gw]=bt[vw]=bt[yw]=bt[_w]=bt[bw]=bt[ww]=bt[xw]=bt[Ew]=!1;function Iw(t){return ke(t)&&tl(t.length)&&!!bt[Dn(t)]}function el(t){return function(e){return t(e)}}var of=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ir=of&&typeof module=="object"&&module&&!module.nodeType&&module,Pw=Ir&&Ir.exports===of,so=Pw&&Jd.process,or=function(){try{var t=Ir&&Ir.require&&Ir.require("util").types;return t||so&&so.binding&&so.binding("util")}catch{}}(),ru=or&&or.isTypedArray,Nw=ru?el(ru):Iw;const Ms=Nw;var Bw=Object.prototype,Uw=Bw.hasOwnProperty;function af(t,e){var n=Wt(t),r=!n&&ir(t),i=!n&&!r&&sr(t),s=!n&&!r&&!i&&Ms(t),o=n||r||i||s,a=o?nw(t.length,String):[],l=a.length;for(var c in t)(e||Uw.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Qa(c,l)))&&a.push(c);return a}function lf(t,e){return function(n){return t(e(n))}}var Hw=lf(Object.keys,Object),Fw=Object.prototype,Vw=Fw.hasOwnProperty;function cf(t){if(!Os(t))return Hw(t);var e=[];for(var n in Object(t))Vw.call(t,n)&&n!="constructor"&&e.push(n);return e}function nl(t){return dr(t)?af(t):cf(t)}function zw(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Gw=Object.prototype,jw=Gw.hasOwnProperty;function Ww(t){if(!de(t))return zw(t);var e=Os(t),n=[];for(var r in t)r=="constructor"&&(e||!jw.call(t,r))||n.push(r);return n}function uf(t){return dr(t)?af(t,!0):Ww(t)}var Yw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xw=/^\w*$/;function rl(t,e){if(Wt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Ts(t)?!0:Xw.test(t)||!Yw.test(t)||e!=null&&t in Object(e)}var Wr=kn(Object,"create");function qw(){this.__data__=Wr?Wr(null):{},this.size=0}function Zw(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Kw="__lodash_hash_undefined__",Qw=Object.prototype,Jw=Qw.hasOwnProperty;function tx(t){var e=this.__data__;if(Wr){var n=e[t];return n===Kw?void 0:n}return Jw.call(e,t)?e[t]:void 0}var ex=Object.prototype,nx=ex.hasOwnProperty;function rx(t){var e=this.__data__;return Wr?e[t]!==void 0:nx.call(e,t)}var ix="__lodash_hash_undefined__";function sx(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Wr&&e===void 0?ix:e,this}function On(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}On.prototype.clear=qw;On.prototype.delete=Zw;On.prototype.get=tx;On.prototype.has=rx;On.prototype.set=sx;function ox(){this.__data__=[],this.size=0}function As(t,e){for(var n=t.length;n--;)if(ri(t[n][0],e))return n;return-1}var ax=Array.prototype,lx=ax.splice;function cx(t){var e=this.__data__,n=As(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():lx.call(e,n,1),--this.size,!0}function ux(t){var e=this.__data__,n=As(e,t);return n<0?void 0:e[n][1]}function hx(t){return As(this.__data__,t)>-1}function dx(t,e){var n=this.__data__,r=As(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function qe(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qe.prototype.clear=ox;qe.prototype.delete=cx;qe.prototype.get=ux;qe.prototype.has=hx;qe.prototype.set=dx;var Yr=kn(we,"Map");function fx(){this.size=0,this.__data__={hash:new On,map:new(Yr||qe),string:new On}}function px(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Cs(t,e){var n=t.__data__;return px(e)?n[typeof e=="string"?"string":"hash"]:n.map}function mx(t){var e=Cs(this,t).delete(t);return this.size-=e?1:0,e}function gx(t){return Cs(this,t).get(t)}function vx(t){return Cs(this,t).has(t)}function yx(t,e){var n=Cs(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Ze(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ze.prototype.clear=fx;Ze.prototype.delete=mx;Ze.prototype.get=gx;Ze.prototype.has=vx;Ze.prototype.set=yx;var _x="Expected a function";function il(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(_x);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(il.Cache||Ze),n}il.Cache=Ze;var bx=500;function wx(t){var e=il(t,function(r){return n.size===bx&&n.clear(),r}),n=e.cache;return e}var xx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ex=/\\(\\)?/g,Tx=wx(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(xx,function(n,r,i,s){e.push(i?s.replace(Ex,"$1"):r||n)}),e});function Sx(t){return t==null?"":ef(t)}function hf(t,e){return Wt(t)?t:rl(t,e)?[t]:Tx(Sx(t))}var Ox=1/0;function Ds(t){if(typeof t=="string"||Ts(t))return t;var e=t+"";return e=="0"&&1/t==-Ox?"-0":e}function df(t,e){e=hf(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Ds(e[n++])];return n&&n==r?t:void 0}function rn(t,e,n){var r=t==null?void 0:df(t,e);return r===void 0?n:r}function ff(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var iu=he?he.isConcatSpreadable:void 0;function Mx(t){return Wt(t)||ir(t)||!!(iu&&t&&t[iu])}function pf(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=Mx),i||(i=[]);++s<o;){var a=t[s];n(a)?ff(i,a):r||(i[i.length]=a)}return i}var Ax=lf(Object.getPrototypeOf,Object);const mf=Ax;var Cx="[object Object]",Dx=Function.prototype,Lx=Object.prototype,gf=Dx.toString,kx=Lx.hasOwnProperty,Rx=gf.call(Object);function $x(t){if(!ke(t)||Dn(t)!=Cx)return!1;var e=mf(t);if(e===null)return!0;var n=kx.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&gf.call(n)==Rx}function Ix(){this.__data__=new qe,this.size=0}function Px(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Nx(t){return this.__data__.get(t)}function Bx(t){return this.__data__.has(t)}var Ux=200;function Hx(t,e){var n=this.__data__;if(n instanceof qe){var r=n.__data__;if(!Yr||r.length<Ux-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ze(r)}return n.set(t,e),this.size=n.size,this}function ye(t){var e=this.__data__=new qe(t);this.size=e.size}ye.prototype.clear=Ix;ye.prototype.delete=Px;ye.prototype.get=Nx;ye.prototype.has=Bx;ye.prototype.set=Hx;var vf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,su=vf&&typeof module=="object"&&module&&!module.nodeType&&module,Fx=su&&su.exports===vf,ou=Fx?we.Buffer:void 0,au=ou?ou.allocUnsafe:void 0;function yf(t,e){if(e)return t.slice();var n=t.length,r=au?au(n):new t.constructor(n);return t.copy(r),r}function Vx(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function zx(){return[]}var Gx=Object.prototype,jx=Gx.propertyIsEnumerable,lu=Object.getOwnPropertySymbols,Wx=lu?function(t){return t==null?[]:(t=Object(t),Vx(lu(t),function(e){return jx.call(t,e)}))}:zx;function Yx(t,e,n){var r=e(t);return Wt(t)?r:ff(r,n(t))}function Vo(t){return Yx(t,nl,Wx)}var zo=kn(we,"DataView"),Go=kn(we,"Promise"),Xn=kn(we,"Set"),cu="[object Map]",Xx="[object Object]",uu="[object Promise]",hu="[object Set]",du="[object WeakMap]",fu="[object DataView]",qx=Ln(zo),Zx=Ln(Yr),Kx=Ln(Go),Qx=Ln(Xn),Jx=Ln(Fo),fn=Dn;(zo&&fn(new zo(new ArrayBuffer(1)))!=fu||Yr&&fn(new Yr)!=cu||Go&&fn(Go.resolve())!=uu||Xn&&fn(new Xn)!=hu||Fo&&fn(new Fo)!=du)&&(fn=function(t){var e=Dn(t),n=e==Xx?t.constructor:void 0,r=n?Ln(n):"";if(r)switch(r){case qx:return fu;case Zx:return cu;case Kx:return uu;case Qx:return hu;case Jx:return du}return e});const ar=fn;var tE=Object.prototype,eE=tE.hasOwnProperty;function nE(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&eE.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var rs=we.Uint8Array;function sl(t){var e=new t.constructor(t.byteLength);return new rs(e).set(new rs(t)),e}function rE(t,e){var n=sl(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var iE=/\w*$/;function sE(t){var e=new t.constructor(t.source,iE.exec(t));return e.lastIndex=t.lastIndex,e}var pu=he?he.prototype:void 0,mu=pu?pu.valueOf:void 0;function oE(t){return mu?Object(mu.call(t)):{}}function _f(t,e){var n=e?sl(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var aE="[object Boolean]",lE="[object Date]",cE="[object Map]",uE="[object Number]",hE="[object RegExp]",dE="[object Set]",fE="[object String]",pE="[object Symbol]",mE="[object ArrayBuffer]",gE="[object DataView]",vE="[object Float32Array]",yE="[object Float64Array]",_E="[object Int8Array]",bE="[object Int16Array]",wE="[object Int32Array]",xE="[object Uint8Array]",EE="[object Uint8ClampedArray]",TE="[object Uint16Array]",SE="[object Uint32Array]";function OE(t,e,n){var r=t.constructor;switch(e){case mE:return sl(t);case aE:case lE:return new r(+t);case gE:return rE(t);case vE:case yE:case _E:case bE:case wE:case xE:case EE:case TE:case SE:return _f(t,n);case cE:return new r;case uE:case fE:return new r(t);case hE:return sE(t);case dE:return new r;case pE:return oE(t)}}function bf(t){return typeof t.constructor=="function"&&!Os(t)?Ab(mf(t)):{}}var ME="[object Map]";function AE(t){return ke(t)&&ar(t)==ME}var gu=or&&or.isMap,CE=gu?el(gu):AE,DE="[object Set]";function LE(t){return ke(t)&&ar(t)==DE}var vu=or&&or.isSet,kE=vu?el(vu):LE,RE=1,wf="[object Arguments]",$E="[object Array]",IE="[object Boolean]",PE="[object Date]",NE="[object Error]",xf="[object Function]",BE="[object GeneratorFunction]",UE="[object Map]",HE="[object Number]",Ef="[object Object]",FE="[object RegExp]",VE="[object Set]",zE="[object String]",GE="[object Symbol]",jE="[object WeakMap]",WE="[object ArrayBuffer]",YE="[object DataView]",XE="[object Float32Array]",qE="[object Float64Array]",ZE="[object Int8Array]",KE="[object Int16Array]",QE="[object Int32Array]",JE="[object Uint8Array]",tT="[object Uint8ClampedArray]",eT="[object Uint16Array]",nT="[object Uint32Array]",yt={};yt[wf]=yt[$E]=yt[WE]=yt[YE]=yt[IE]=yt[PE]=yt[XE]=yt[qE]=yt[ZE]=yt[KE]=yt[QE]=yt[UE]=yt[HE]=yt[Ef]=yt[FE]=yt[VE]=yt[zE]=yt[GE]=yt[JE]=yt[tT]=yt[eT]=yt[nT]=!0;yt[NE]=yt[xf]=yt[jE]=!1;function Di(t,e,n,r,i,s){var o,a=e&RE;if(o!==void 0)return o;if(!de(t))return t;var l=Wt(t);if(l)o=nE(t);else{var c=ar(t),u=c==xf||c==BE;if(sr(t))return yf(t,a);if(c==Ef||c==wf||u&&!i)o=u?{}:bf(t);else{if(!yt[c])return i?t:{};o=OE(t,c,a)}}s||(s=new ye);var h=s.get(t);if(h)return h;s.set(t,o),kE(t)?t.forEach(function(p){o.add(Di(p,e,n,p,t,s))}):CE(t)&&t.forEach(function(p,m){o.set(m,Di(p,e,n,m,t,s))});var d=Vo,f=l?void 0:d(t);return Hb(f||t,function(p,m){f&&(m=p,p=t[m]),nf(o,m,Di(p,e,n,m,t,s))}),o}var rT=1,iT=4;function lr(t){return Di(t,rT|iT)}var sT="__lodash_hash_undefined__";function oT(t){return this.__data__.set(t,sT),this}function aT(t){return this.__data__.has(t)}function Xr(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ze;++e<n;)this.add(t[e])}Xr.prototype.add=Xr.prototype.push=oT;Xr.prototype.has=aT;function Tf(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Sf(t,e){return t.has(e)}var lT=1,cT=2;function Of(t,e,n,r,i,s){var o=n&lT,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var h=-1,d=!0,f=n&cT?new Xr:void 0;for(s.set(t,e),s.set(e,t);++h<a;){var p=t[h],m=e[h];if(r)var g=o?r(m,p,h,e,t,s):r(p,m,h,t,e,s);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!Tf(e,function(v,b){if(!Sf(f,b)&&(p===v||i(p,v,n,r,s)))return f.push(b)})){d=!1;break}}else if(!(p===m||i(p,m,n,r,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function uT(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function ol(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var hT=1,dT=2,fT="[object Boolean]",pT="[object Date]",mT="[object Error]",gT="[object Map]",vT="[object Number]",yT="[object RegExp]",_T="[object Set]",bT="[object String]",wT="[object Symbol]",xT="[object ArrayBuffer]",ET="[object DataView]",yu=he?he.prototype:void 0,oo=yu?yu.valueOf:void 0;function TT(t,e,n,r,i,s,o){switch(n){case ET:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case xT:return!(t.byteLength!=e.byteLength||!s(new rs(t),new rs(e)));case fT:case pT:case vT:return ri(+t,+e);case mT:return t.name==e.name&&t.message==e.message;case yT:case bT:return t==e+"";case gT:var a=uT;case _T:var l=r&hT;if(a||(a=ol),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=dT,o.set(t,e);var u=Of(a(t),a(e),r,i,s,o);return o.delete(t),u;case wT:if(oo)return oo.call(t)==oo.call(e)}return!1}var ST=1,OT=Object.prototype,MT=OT.hasOwnProperty;function AT(t,e,n,r,i,s){var o=n&ST,a=Vo(t),l=a.length,c=Vo(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var d=a[h];if(!(o?d in e:MT.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++h<l;){d=a[h];var v=t[d],b=e[d];if(r)var _=o?r(b,v,d,e,t,s):r(v,b,d,t,e,s);if(!(_===void 0?v===b||i(v,b,n,r,s):_)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var T=t.constructor,x=e.constructor;T!=x&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof x=="function"&&x instanceof x)&&(m=!1)}return s.delete(t),s.delete(e),m}var CT=1,_u="[object Arguments]",bu="[object Array]",di="[object Object]",DT=Object.prototype,wu=DT.hasOwnProperty;function LT(t,e,n,r,i,s){var o=Wt(t),a=Wt(e),l=o?bu:ar(t),c=a?bu:ar(e);l=l==_u?di:l,c=c==_u?di:c;var u=l==di,h=c==di,d=l==c;if(d&&sr(t)){if(!sr(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new ye),o||Ms(t)?Of(t,e,n,r,i,s):TT(t,e,l,n,r,i,s);if(!(n&CT)){var f=u&&wu.call(t,"__wrapped__"),p=h&&wu.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return s||(s=new ye),i(m,g,n,r,s)}}return d?(s||(s=new ye),AT(t,e,n,r,i,s)):!1}function Ls(t,e,n,r,i){return t===e?!0:t==null||e==null||!ke(t)&&!ke(e)?t!==t&&e!==e:LT(t,e,n,r,Ls,i)}var kT=1,RT=2;function $T(t,e,n,r){var i=n.length,s=i;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var a=o[0],l=t[a],c=o[1];if(o[2]){if(l===void 0&&!(a in t))return!1}else{var u=new ye,h;if(!(h===void 0?Ls(c,l,kT|RT,r,u):h))return!1}}return!0}function Mf(t){return t===t&&!de(t)}function IT(t){for(var e=nl(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Mf(i)]}return e}function Af(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function PT(t){var e=IT(t);return e.length==1&&e[0][2]?Af(e[0][0],e[0][1]):function(n){return n===t||$T(n,t,e)}}function NT(t,e){return t!=null&&e in Object(t)}function BT(t,e,n){e=hf(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Ds(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&tl(i)&&Qa(o,i)&&(Wt(t)||ir(t)))}function UT(t,e){return t!=null&&BT(t,e,NT)}var HT=1,FT=2;function VT(t,e){return rl(t)&&Mf(e)?Af(Ds(t),e):function(n){var r=rn(n,t);return r===void 0&&r===e?UT(n,t):Ls(e,r,HT|FT)}}function zT(t){return function(e){return e==null?void 0:e[t]}}function GT(t){return function(e){return df(e,t)}}function jT(t){return rl(t)?zT(Ds(t)):GT(t)}function al(t){return typeof t=="function"?t:t==null?Za:typeof t=="object"?Wt(t)?VT(t[0],t[1]):PT(t):jT(t)}function WT(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[++i];if(n(s[l],l,s)===!1)break}return e}}var Cf=WT();function jo(t,e,n){(n!==void 0&&!ri(t[e],n)||n===void 0&&!(e in t))&&Ss(t,e,n)}function Wo(t){return ke(t)&&dr(t)}function Yo(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function YT(t){return Zb(t,uf(t))}function XT(t,e,n,r,i,s,o){var a=Yo(t,n),l=Yo(e,n),c=o.get(l);if(c){jo(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,h=u===void 0;if(h){var d=Wt(l),f=!d&&sr(l),p=!d&&!f&&Ms(l);u=l,d||f||p?Wt(a)?u=a:Wo(a)?u=Lb(a):f?(h=!1,u=yf(l,!0)):p?(h=!1,u=_f(l,!0)):u=[]:$x(l)||ir(l)?(u=a,ir(a)?u=YT(a):(!de(a)||Ka(a))&&(u=bf(l))):h=!1}h&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),jo(t,n,u)}function Df(t,e,n,r,i){t!==e&&Cf(e,function(s,o){if(i||(i=new ye),de(s))XT(t,e,o,n,Df,r,i);else{var a=r?r(Yo(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),jo(t,o,a)}},uf)}function qT(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var ZT="[object Map]",KT="[object Set]",QT=Object.prototype,JT=QT.hasOwnProperty;function nn(t){if(t==null)return!0;if(dr(t)&&(Wt(t)||typeof t=="string"||typeof t.splice=="function"||sr(t)||Ms(t)||ir(t)))return!t.length;var e=ar(t);if(e==ZT||e==KT)return!t.size;if(Os(t))return!cf(t).length;for(var n in t)if(JT.call(t,n))return!1;return!0}var tS=tw(function(t,e,n){Df(t,e,n)});const et=tS;var eS=1/0,nS=Xn&&1/ol(new Xn([,-0]))[1]==eS?function(t){return new Xn(t)}:Db,rS=200;function Lf(t,e,n){var r=-1,i=jb,s=t.length,o=!0,a=[],l=a;if(s>=rS){var c=e?null:nS(t);if(c)return ol(c);o=!1,i=Sf,l=new Xr}else l=e?[]:a;t:for(;++r<s;){var u=t[r],h=e?e(u):u;if(u=u!==0?u:0,o&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),a.push(u)}else i(l,h,n)||(l!==a&&l.push(h),a.push(u))}return a}var iS=Ja(function(t){var e=qT(t);return Wo(e)&&(e=void 0),Lf(pf(t,1,Wo,!0),al(e))});function qr(t){return t&&t.length?Lf(t):[]}const Jt="cds",He={opacity:{unselected:.05,selected:.4}},sn={ticks:{number:7,rotateIfSmallerThan:30,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1,hover:{rectanglePadding:4}},xu={duration:1e3,ease:wd,zoomLevel:3},sS={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},hierarchyLevel:2},oS={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},aS={defaultBins:10},Tt={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},ao={opacity:{unselected:.3,selected:1},weight:{selected:2,unselected:1}},_t={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},Eu={minCellDividerDimension:16,chartPadding:.5},Tu={default:{size:24}},lS={defaultOffset:4,horizontalOffset:10},Su={default:{duration:300},pie_slice_mouseover:{duration:100},pie_slice_mouseout:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},re={height:{[Te.GRAPH_VIEW]:32,[Te.SLIDER_VIEW]:10},spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},cS=[{type:Bt.RADIUS,name:"Radius"},{type:Bt.AREA,name:"Poor area"},{type:Bt.AREA,name:"Satisfactory area"},{type:Bt.AREA,name:"Great area"},{type:Bt.QUARTILE,name:"Quartiles"}],Wn={type:ve.END_LINE,threshold:16,numCharacter:14},uS={code:typeof navigator<"u"&&(navigator==null?void 0:navigator.language)||"en-US",number:(t,e=(navigator==null?void 0:navigator.language)||"en-US")=>t.toLocaleString(e),date:(t,e=(navigator==null?void 0:navigator.language)||"en-US",n={},r=null)=>r||t.toLocaleDateString(e,n),time:(t,e=(navigator==null?void 0:navigator.language)||"en-US",n={},r=null)=>r||t.toLocaleTimeString(e,n),optionsObject:{"15seconds":{primary:{"MMM d, pp":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"MMM d, h:mm:ss.SSS a":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},secondary:{pp:{hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"h:mm:ss.SSS a":{hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},type:"time"},minute:{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},"30minutes":{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},hourly:{primary:{"MMM d, hh a":{month:"short",day:"numeric",hour:"2-digit",hourCycle:"h12"}},secondary:{"hh a":{hour:"2-digit",hourCycle:"h12"}},type:"time"},daily:{primary:{"MMM d":{month:"short",day:"numeric"}},secondary:{d:{day:"numeric"}},type:"date"},weekly:{primary:{"eee, MMM d":{weekday:"short",month:"short",day:"numeric"}},secondary:{eee:{weekday:"short"}},type:"date"},monthly:{primary:{"MMM yyyy":{month:"short",year:"numeric"}},secondary:{MMM:{month:"short"}},type:"date"},quarterly:{primary:{},secondary:{},type:"date"},yearly:{primary:{yyyy:{year:"numeric"}},secondary:{yyyy:{year:"numeric"}},type:"date"}},translations:{group:"Group",total:"Total",meter:{title:""},tabularRep:{title:"Tabular representation",downloadAsCSV:"Download as CSV"},toolbar:{exportAsCSV:"Export to CSV",exportAsJPG:"Export to JPG",exportAsPNG:"Export to PNG",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",moreOptions:"More options",makeFullScreen:"Make fullscreen",exitFullScreen:"Exit fullscreen",showAsTable:"Show as table"}}},hS={enabled:!0,position:Rr.BOTTOM,clickable:!0,truncation:Wn,alignment:ae.LEFT,order:null,additionalItems:[]},dS={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},fS={enabled:!0},kf={enabled:!0,showTotal:!0,truncation:Wn,groupLabel:"Group"},Rf={top:{visible:!0,includeZero:!0,truncation:Wn},bottom:{visible:!0,includeZero:!0,truncation:Wn},left:{visible:!0,includeZero:!0,truncation:Wn},right:{visible:!0,includeZero:!0,truncation:Wn}},ks={addSpaceOnEdges:1,showDayName:!1,localeObject:Qd,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}};let $f=!1;try{$f=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}catch(t){console.warn("Fullscreen capabilities check failed: ",t.message)}const Yt={width:null,height:null,resizable:!0,theme:Gh.WHITE,tooltip:kf,legend:hS,locale:uS,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:ft.SHOW_AS_DATATABLE},...$f?[{type:ft.MAKE_FULLSCREEN}]:[],{type:ft.EXPORT_CSV},{type:ft.EXPORT_PNG},{type:ft.EXPORT_JPG}]}},If=et({},Yt,{thematic:{projection:Yh.geoNaturalEarth1}}),ii=et({},Yt,{axes:Rf,timeScale:ks,grid:dS,ruler:fS,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:Te.GRAPH_VIEW}}}),Mn=et({},ii,{bars:{maxWidth:16,spacingFactor:.25},timeScale:et(ks,{addSpaceOnEdges:1})}),pS=et({},Mn,{}),mS=et({},Mn,{}),gS=et({},Mn,{bars:et({},Mn.bars,{dividerSize:1.5})}),vS=et({},Mn,{}),ll=et({},ii,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),yS=ll,Pf=et({},ll,{points:{radius:3,filled:!1,enabled:!0}}),Nf=et({},Pf,{timeScale:et(ks,{addSpaceOnEdges:0})}),_S=Nf,bS=et({},ii,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{const e=Math.min(t.width,t.height);return[e*3/400,e*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:Bt.RADIUS,name:"Radius"}]}}),wS=et({},ii,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:Bt.AREA,name:"Poor area"},{type:Bt.AREA,name:"Satisfactory area"},{type:Bt.AREA,name:"Great area"},{type:Bt.QUARTILE,name:"Quartiles"}]}}),xS=et({},Mn,{bars:{dividerSize:1.5},timeScale:et(ks,{addSpaceOnEdges:0})}),ES=et({},Yt,{tooltip:et({},kf,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{const e=Math.min(t.width,t.height);return[e*20/400,e*75/400]},wordMapsTo:"word"}}),Bf=et({},Yt,{pie:{labels:{formatter:null,enabled:!0},alignment:ae.LEFT,sortFunction:null,valueMapsTo:"value"}}),TS=et({},Yt,{legend:{enabled:!1},gauge:{type:Wh.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,alignment:ae.LEFT}}),SS=et({},Bf,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20)},alignment:ae.LEFT}}),Uf=et({},Yt,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),OS=et({},Uf,{legend:{enabled:!0}}),MS=et({},Yt,{radar:{axes:{angle:"key",value:"value"},alignment:ae.LEFT},tooltip:{gridline:{enabled:!0}}}),AS=et({},Mn,{comboChartTypes:[]}),CS=et({tree:{type:jh.TREE}},Yt,{}),DS=et({},Yt,{data:et(Yt.data,{groupMapsTo:"name"})}),LS=et({},Yt,sS,{data:et(Yt.data,{groupMapsTo:"name"})}),kS=et({},Yt,{alluvial:{data:et(Yt.data,{groupMapsTo:"source"}),nodeAlignment:ae.CENTER,nodePadding:24,monochrome:!1,nodes:[]}}),RS=et({},Yt,{axes:Rf,heatmap:{divider:{state:$r.AUTO},colorLegend:{type:"linear"}}}),$S=et({},If,{choropleth:{colorLegend:{type:"linear"}}}),cl={alluvialChart:kS,areaChart:Nf,axisChart:ii,boxplotChart:vS,bubbleChart:bS,bulletChart:wS,chart:Yt,circlePackChart:LS,choroplethChart:$S,comboChart:AS,donutChart:SS,gaugeChart:TS,groupedBarChart:mS,heatmapChart:RS,histogramChart:xS,lineChart:Pf,lollipopChart:yS,meterChart:Uf,pieChart:Bf,proportionalMeterChart:OS,radarChart:MS,scatterChart:ll,simpleBarChart:pS,stackedAreaChart:_S,stackedBarChart:gS,thematicChart:If,treeChart:CS,treemapChart:DS,wordCloudChart:ES};function IS(t,e,n){let r=null;return function(...i){const s=this;s.mousePosition=wn(i[0],n),clearTimeout(r),r=setTimeout(function(){t.apply(s,i)},e)}}function ul(t,e){var n;const r=lr(t),i=Object.keys(e.axes||{});(n=e==null?void 0:e.toolbar)!=null&&n.controls&&delete r.toolbar.controls,i.length===0&&delete r.axes;for(const s in r.axes)if(i.includes(s)){const o=e.axes[s];if((o.primary||o.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://charts.carbondesignsystem.com/?path=/story/docs-tutorials--tabular-data-format"),o.mapsTo==null){const l=o.scaleType;l==null?o.mapsTo="value":l===z.TIME?o.mapsTo="date":l===z.LABELS&&(o.mapsTo="key")}}else delete r.axes[s];return Hf(r,e),et(r,e)}function PS(t){if(!t)return;const e=/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/,n=t.getAttribute("transform").match(e);if(!n)return null;if(n[0]){const r=n[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:r[0],ty:r[1]}}return null}function NS(t){const e=/\(([^)]+)\)/.exec(t);if(e&&e.length>1){const n=e[1].split(",");if(n.length>1)return{x:parseFloat(n[0]),y:parseFloat(n[1])}}return{x:0,y:0}}function lo(t,e,n="value",r=!1){const i=t/e.reduce((s,o)=>s+o[n],0)*100;return r?i:i%1!==0?parseFloat(i.toFixed(1)):i}function Zr(t,e,n){if(n>t.length)return t;if(e===ve.MID_LINE)return t.substr(0,n/2)+"..."+t.substr(-n/2);if(e===ve.FRONT_LINE)return"..."+t.substr(-n);if(e===ve.END_LINE)return t.substr(0,n)+"..."}function Hf(t,e){const n=y(t,"legend","additionalItems"),r=y(e,"legend","additionalItems");if(n&&r){const i=r.map(a=>a.type),s=n.map(a=>a.type),o=cS.filter(a=>s.includes(a.type)&&!i.includes(a.type));t.legend.additionalItems=o,e.legend.additionalItems=iS(o,r,"name")}}const y=(t,...e)=>{let n=t;if(n){for(const r of e)if(n[r]!==null&&n[r]!==void 0)n=n[r];else return null;return n}return null},Ff=(t,e)=>e===qt.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,hl=(t,e)=>{const{x0:n,x1:r,y0:i,y1:s}=Ff(t,e);return`M${n},${i}L${n},${s}L${r},${s}L${r},${i}L${n},${i}`};function qn(t,e,n){return n===qt.VERTICAL?[t,e]:[e,t]}const Vf=6048e5,BS=864e5,zf=6e4,Gf=36e5;function Ou(t){const e=ct(t);return e.setHours(0,0,0,0),e}function Mu(t){const e=ct(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function jf(t,e){const n=Ou(t),r=Ou(e),i=+n-Mu(n),s=+r-Mu(r);return Math.round((i-s)/BS)}function _e(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function US(t){const e=ct(t),n=_e(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function HS(t){const e=ct(t);return jf(e,US(e))+1}function is(t){return jr(t,{weekStartsOn:1})}function Wf(t){const e=ct(t),n=e.getFullYear(),r=_e(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=is(r),s=_e(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=is(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function FS(t){const e=Wf(t),n=_e(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),is(n)}function VS(t){const e=ct(t),n=+is(e)-+FS(e);return Math.round(n/Vf)+1}function Yf(t,e){var n,r,i,s;const o=ct(t),a=o.getFullYear(),l=Es(),c=(e==null?void 0:e.firstWeekContainsDate)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??((s=(i=l.locale)==null?void 0:i.options)==null?void 0:s.firstWeekContainsDate)??1,u=_e(t,0);u.setFullYear(a+1,0,c),u.setHours(0,0,0,0);const h=jr(u,e),d=_e(t,0);d.setFullYear(a,0,c),d.setHours(0,0,0,0);const f=jr(d,e);return o.getTime()>=h.getTime()?a+1:o.getTime()>=f.getTime()?a:a-1}function zS(t,e){var n,r,i,s;const o=Es(),a=(e==null?void 0:e.firstWeekContainsDate)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.firstWeekContainsDate)??o.firstWeekContainsDate??((s=(i=o.locale)==null?void 0:i.options)==null?void 0:s.firstWeekContainsDate)??1,l=Yf(t,e),c=_e(t,0);return c.setFullYear(l,0,a),c.setHours(0,0,0,0),jr(c,e)}function GS(t,e){const n=ct(t),r=+jr(n,e)-+zS(n,e);return Math.round(r/Vf)+1}function mt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Je={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return mt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):mt(n+1,2)},d(t,e){return mt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return mt(t.getHours()%12||12,e.length)},H(t,e){return mt(t.getHours(),e.length)},m(t,e){return mt(t.getMinutes(),e.length)},s(t,e){return mt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return mt(i,e.length)}},Fn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Au={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Je.y(t,e)},Y:function(t,e,n,r){const i=Yf(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return mt(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):mt(s,e.length)},R:function(t,e){const n=Wf(t);return mt(n,e.length)},u:function(t,e){const n=t.getFullYear();return mt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return mt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return mt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Je.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return mt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=GS(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):mt(i,e.length)},I:function(t,e,n){const r=VS(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):mt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Je.d(t,e)},D:function(t,e,n){const r=HS(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):mt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return mt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return mt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return mt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Fn.noon:r===0?i=Fn.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Fn.evening:r>=12?i=Fn.afternoon:r>=4?i=Fn.morning:i=Fn.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Je.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Je.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):mt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):mt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Je.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Je.s(t,e)},S:function(t,e){return Je.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Du(r);case"XXXX":case"XX":return pn(r);case"XXXXX":case"XXX":default:return pn(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Du(r);case"xxxx":case"xx":return pn(r);case"xxxxx":case"xxx":default:return pn(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Cu(r,":");case"OOOO":default:return"GMT"+pn(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Cu(r,":");case"zzzz":default:return"GMT"+pn(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return mt(r,e.length)},T:function(t,e,n){const r=t.getTime();return mt(r,e.length)}};function Cu(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+mt(s,2)}function Du(t,e){return t%60===0?(t>0?"-":"+")+mt(Math.abs(t)/60,2):pn(t,e)}function pn(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=mt(Math.trunc(r/60),2),s=mt(r%60,2);return n+i+e+s}const Lu=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Xf=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},jS=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Lu(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Lu(r,e)).replace("{{time}}",Xf(i,e))},WS={p:Xf,P:jS},YS=/^D+$/,XS=/^Y+$/,qS=["D","DD","YY","YYYY"];function ZS(t){return YS.test(t)}function KS(t){return XS.test(t)}function QS(t,e,n){const r=JS(t,e,n);if(console.warn(r),qS.includes(t))throw new RangeError(r)}function JS(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function tO(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function eO(t){if(!tO(t)&&typeof t!="number")return!1;const e=ct(t);return!isNaN(Number(e))}const nO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,iO=/^'([^]*?)'?$/,sO=/''/g,oO=/[a-zA-Z]/;function Xo(t,e,n){var r,i,s,o,a,l,c,u;const h=Es(),d=(n==null?void 0:n.locale)??h.locale??Qd,f=(n==null?void 0:n.firstWeekContainsDate)??((i=(r=n==null?void 0:n.locale)==null?void 0:r.options)==null?void 0:i.firstWeekContainsDate)??h.firstWeekContainsDate??((o=(s=h.locale)==null?void 0:s.options)==null?void 0:o.firstWeekContainsDate)??1,p=(n==null?void 0:n.weekStartsOn)??((l=(a=n==null?void 0:n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??h.weekStartsOn??((u=(c=h.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,m=ct(t);if(!eO(m))throw new RangeError("Invalid time value");let g=e.match(rO).map(b=>{const _=b[0];if(_==="p"||_==="P"){const T=WS[_];return T(b,d.formatLong)}return b}).join("").match(nO).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const _=b[0];if(_==="'")return{isToken:!1,value:aO(b)};if(Au[_])return{isToken:!0,value:b};if(_.match(oO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:b}});d.localize.preprocessor&&(g=d.localize.preprocessor(m,g));const v={firstWeekContainsDate:f,weekStartsOn:p,locale:d};return g.map(b=>{if(!b.isToken)return b.value;const _=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&KS(_)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&ZS(_))&&QS(_,e,String(t));const T=Au[_[0]];return T(m,_,d.localize,v)}).join("")}function aO(t){const e=t.match(iO);return e?e[1].replace(sO,"'"):t}var qf=(t=>(t["15seconds"]="15seconds",t.minute="minute",t["30minutes"]="30minutes",t.hourly="hourly",t.daily="daily",t.weekly="weekly",t.monthly="monthly",t.quarterly="quarterly",t.yearly="yearly",t))(qf||{});const co=[["15seconds",15*1e3],["minute",60*1e3],["30minutes",30*60*1e3],["hourly",60*60*1e3],["daily",24*60*60*1e3],["monthly",30*24*60*60*1e3],["quarterly",3*30*24*60*60*1e3],["yearly",12*30*24*60*60*1e3]];function Zf(t,e,n,r,i){const s=e===0,o=Number(Xo(new Date(t),"c"))===2,a=Number(Xo(new Date(t),"q"))===1,l=e!==0?n[e-1]:null;switch(r){case"15seconds":return s||fi(t)||xr(t,l)||tn(t);case"minute":return s||fi(t)||xr(t,l)||tn(t);case"30minutes":return s||fi(t)||xr(t,l)||tn(t);case"hourly":return s||fi(t)||xr(t,l)||tn(t);case"daily":return i?s||o||tn(t):s||xr(t,l)||tn(t);case"weekly":return s||o||tn(t);case"monthly":return s||tn(t);case"quarterly":return s||a;case"yearly":return!1;default:throw new Error(`${r} is not a valid time interval.`)}}function qo(t,e,n,r,i,s){const o=i.showDayName,a=r==="daily"&&o?"weekly":r,l=new Date(t),c=y(i,"timeIntervalFormats")[a],u=y(c,"primary"),h=y(c,"secondary"),d=Zf(t,e,n,r,o);let f=d?u:h;r==="15seconds"&&l.getMilliseconds()!==0&&(f=f.replace("pp","h:mm:ss.SSS a"));const p=i.localeObject,{code:m,optionsObject:g}=s,v=g[r].type,b=g[r][d?"primary":"secondary"][f];if(r==="quarterly"||!b){const _=Xo(l,f,{locale:p}).split("").map(T=>{let x=Number(T);return T!==" "&&!Number.isNaN(x)?x.toLocaleString(m):T});return s[v](l,m,{},_.join(""))}else return s[v](l,m,b)}function ss(t){const e=new Date(t);return{M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()}}function lO(t){if(t)return t.slice(1).map((e,n)=>e-t[n])}function cO(t){const e=co.reduce((n,[,r],i)=>{const s=co[n][1],o=Math.abs(s-t),a=Math.abs(r-t);return o<a?n:i},0);return co[e][0]}function Zo(t,e){if(qf[e])return e;if(t.length===1)return"15seconds";const n=lO(t),r=So(n);return cO(r)}function fi(t){const{s:e,m:n,H:r}=ss(t);return r===0&&n===0&&e===0}function xr(t,e){const n=ss(t).M,r=ss(e).M;return n!==r}function tn(t){const{M:e,d:n,s:r,m:i,H:s}=ss(t);return e===1&&n===1&&s===0&&i===0&&r===0}function ku(t){return t===void 0?"":t.toISOString()}function Kf(t){const e=on(t,r=>r.value),n=Tn().domain(e).nice().domain();if(n[0]>0)n[0]=0;else if(n[0]===0&&n[1]===0)return[0,1];return n[0]<0&&n[1]>0&&(Math.abs(n[0])>n[1]?n[1]=Math.abs(n[0]):n[0]=-n[1]),n}function uO(t,e){const n=y(e,"gradient","colors"),r=!nn(n);let i=y(e,"pairing","option");const s=Kf(t),o=s[0]<0&&s[1]>0?"diverge":"mono";(i<1&&i>4&&o==="mono"||i<1&&i>2&&o==="diverge")&&(i=1);const a=r?n:[];if(!r){const l=o==="diverge"?17:11;for(let c=1;c<l+1;c++)a.push(`fill-${o}-${i}-${c}`)}return Pa().domain(s).range(a)}var xt=(t=>(t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img",t))(xt||{});function hO(t,e){return t&&Cf(t,e,nl)}function dO(t,e){return function(n,r){if(n==null)return n;if(!dr(n))return t(n,r);for(var i=n.length,s=-1,o=Object(n);++s<i&&r(o[s],s,o)!==!1;);return n}}var Qf=dO(hO);function fO(t,e,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;){var o=t[i];e(r,o,n(o),t)}return r}function pO(t,e,n,r){return Qf(t,function(i,s,o){e(r,i,n(i),o)}),r}function mO(t,e){return function(n,r){var i=Wt(n)?fO:pO,s={};return i(n,t,al(r),s)}}function gO(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}var vO=Object.prototype,yO=vO.hasOwnProperty,_O=mO(function(t,e,n){yO.call(t,n)?t[n].push(e):Ss(t,n,[e])});function bO(t){const e=t.trim();return["=","+","-","@","	","\r"].includes(e.charAt(0))?`${e}`:/[,\"\n]/.test(e)?`"${e}"`:e}let dl=class{constructor(e){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=e}formatTable({headers:e,cells:n}){const r=this.getOptions(),{code:i,date:s,number:o}=y(r,"locale"),a=y(r,"tabularRepModal","tableHeadingFormatter"),l=y(r,"tabularRepModal","tableCellFormatter"),{cartesianScales:c}=this.services,u=c==null?void 0:c.getDomainAxisScaleType();let h;return u===z.TIME&&(h=d=>s(d,i,{month:"short",day:"numeric",year:"numeric"})),[typeof a=="function"?a(e):e,...typeof l=="function"?l(n):n.map(d=>{h&&(d[1]=h(d[1]));for(let f in d){let p=d[f];typeof p=="number"&&(d[f]=o(p,i))}return d})]}getAllDataFromDomain(e){if(!this.getData())return null;const n=this.getOptions();let r=this.getData();const i=this.getDataGroups(),{groupMapsTo:s}=y(n,"data"),o=y(n,"axes");return e&&(r=r.filter(a=>e.includes(a[s]))),o&&Object.keys(o).forEach(a=>{const l=o[a].mapsTo,c=o[a].scaleType;if((c===z.LINEAR||c===z.LOG)&&(r=r.map(u=>({...u,[l]:u[l]===null?u[l]:Number(u[l])}))),l&&o[a].domain)if(c===z.LABELS)r=r.filter(u=>o[a].domain.includes(u[l]));else{const[u,h]=o[a].domain;r=r.filter(d=>!(l in d)||d[l]>=u&&d[l]<=h)}}),r.filter(a=>i.find(l=>l.name===a[s]))}getDisplayData(e){if(!this.get("data"))return null;const{ACTIVE:n}=Tt.items.status,r=this.getDataGroups(e),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(e).filter(s=>r.find(o=>o.name===s[i]&&o.status===n))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(e){const n=this.sanitize(lr(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),n}getDataGroups(e){return y(this.getOptions(),"data","loading")?[]:e?this.get("dataGroups").filter(n=>e.includes(n.name)):this.get("dataGroups")}getActiveDataGroups(e){const{ACTIVE:n}=Tt.items.status;return this.getDataGroups(e).filter(r=>r.status===n)}getDataGroupNames(e){return this.getDataGroups(e).map(n=>n.name)}getActiveDataGroupNames(e){return this.getActiveDataGroups(e).map(n=>n.name)}aggregateBinDataByGroup(e){return _O(e,"group")}getBinConfigurations(){const e=this.getDisplayData(),n=this.getOptions(),r=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),s=n.axes[r],{groupMapsTo:o}=n.data,{bins:a=aS.defaultBins}=s,l=Array.isArray(a),c=hm().value(f=>f[i]).thresholds(a)(e);if(l)c[c.length-1].x1=a[a.length-1];else{const f=c[0].x1-c[0].x0;c[c.length-1].x1=+c[c.length-1].x0+f}const u=l?[a[0],a[a.length-1]]:[c[0].x0,c[c.length-1].x1],h=Array.from(new Set(e.map(f=>f[o]))),d=[];return c.forEach(f=>{const p=`${f.x0}-${f.x1}`,m=this.aggregateBinDataByGroup(f);h.forEach(g=>{d.push({group:g,key:p,value:m[g]||0,bin:f.x0})})}),{bins:c,binsDomain:u}}getBinnedStackedData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),s=this.getDataValuesGroupedByKeys({bins:i});return no().keys(r)(s).map((o,a)=>Object.keys(o).filter(l=>!isNaN(l)).map(l=>{const c=o[l];return c[n]=r[a],c}))}getGroupedData(e){const n=this.getDisplayData(e),r={},{groupMapsTo:i}=this.getOptions().data;return n.map(s=>{const o=s[i];r[o]!==null&&r[o]!==void 0?r[o].push(s):r[o]=[s]}),Object.keys(r).map(s=>({name:s,data:r[s]}))}getStackKeys({bins:e=null,groups:n=null}={bins:null,groups:null}){const r=this.getOptions(),i=this.getDisplayData(n);let s;e?s=e.map(l=>`${l.x0}:${l.x1}`):s=qr(i.map(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return l[c]instanceof Date?ku(l[c]):l[c]&&typeof l[c].toString=="function"?l[c].toString():l[c]}));const o=this.services.cartesianScales.domainAxisPosition,a=r.axes[o].scaleType;return a===z.TIME?s.sort((l,c)=>{const u=new Date(l),h=new Date(c);return u-h}):(a===z.LOG||a===z.LINEAR)&&s.sort((l,c)=>l-c),s}getDataValuesGroupedByKeys({bins:e=null,groups:n=null}){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.getDisplayData(n),o=this.getDataGroupNames(),a=this.getStackKeys({bins:e,groups:n});return e?a.map(l=>{const[c,u]=l.split(":"),h={x0:c,x1:u},d=e.find(f=>f.x0.toString()===c.toString());return o.forEach(f=>{h[f]=d.filter(p=>p[i]===f).length}),h}):a.map(l=>{const c={sharedStackKey:l};return o.forEach(u=>{const h=s.find(f=>{const p=this.services.cartesianScales.getDomainIdentifier(f);return f[i]===u&&Object.prototype.hasOwnProperty.call(f,p)&&(f[p]instanceof Date?ku(f[p])===l:f[p].toString()===l)}),d=this.services.cartesianScales.getRangeIdentifier(c);c[u]=h?h[d]:null}),c})}getStackedData({percentage:e=!1,groups:n=null,divergent:r=!1}){const i=this.getOptions(),{groupMapsTo:s}=i.data,o=this.getActiveDataGroupNames(n),a=this.getDataValuesGroupedByKeys({groups:n});if(e){const l=gO(a.map(c=>[c.sharedStackKey,0]));a.forEach(c=>{o.forEach(u=>{l[c.sharedStackKey]+=c[u]})}),a.forEach(c=>{o.forEach(u=>{const h=l[c.sharedStackKey];l[c.sharedStackKey]?c[u]=c[u]/h*100:c[u]=0})})}return(r?no().offset(b_):no()).keys(o)(a).map((l,c)=>Object.keys(l).filter(u=>!isNaN(u)).map(u=>{const h=l[u];return h[s]=o[c],h}))}getOptions(){return this.state.options}set(e,n){this.state=Object.assign({},this.state,e);const r=Object.assign({skipUpdate:!1,animate:!0},n);r.skipUpdate||this.update(r.animate)}get(e){return e?this.state[e]:this.state}setOptions(e){const n=this.getOptions();Hf(n,e),this.set({options:et(n,e)})}update(e=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(S.Model.UPDATE,{animate:e}))}toggleDataLabel(e){const{ACTIVE:n,DISABLED:r}=Tt.items.status,i=this.getDataGroups(),s=i.some(c=>c.status===r),o=i.filter(c=>c.status===n);if(s)if(o.length===1&&o[0].name===e)i.forEach((c,u)=>{i[u].status=n});else{const c=i.findIndex(u=>u.name===e);i[c].status=i[c].status===r?n:r}else i.forEach((c,u)=>{i[u].status=c.name===e?n:r});const a=i.filter(c=>c.status===n),l=this.getOptions();i.some(c=>c.status===r)?l.data.selectedGroups=a.map(c=>c.name):l.data.selectedGroups=[],this.services.events.dispatchEvent(S.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(e,n,r,i){const s=this.getOptions();return s.getIsFilled?s.getIsFilled(e,n,r,i):i}getFillColor(e,n,r){const i=this.getOptions(),s=y(this.colorScale,e);return i.getFillColor?i.getFillColor(e,n,r,s):s}getStrokeColor(e,n,r){const i=this.getOptions(),s=y(this.colorScale,e);return i.getStrokeColor?i.getStrokeColor(e,n,r,s):s}isUserProvidedColorScaleValid(){const e=y(this.getOptions(),"color","scale"),n=this.getDataGroups();return e==null||Object.keys(e).length==0?!1:n.some(r=>Object.keys(e).includes(r.name))}getColorClassName(e){const n=this.colorClassNames(e.dataGroupName);let r=e.originalClassName;return e.classNameTypes.forEach(i=>r=e.originalClassName?`${r} ${i}-${n}`:`${i}-${n}`),r||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(e){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://charts.carbondesignsystem.com/?path=/story/docs-tutorials--tabular-data-format");const n=[],{datasets:r,labels:i}=e;return r.forEach(s=>{s.data.forEach((o,a)=>{let l;const c=y(s,"label");if(c===null){const h=y(i,a);h?l=h:l="Ungrouped"}else l=c;const u={group:l,key:i[a]};isNaN(o)?(u.value=o.value,u.date=o.date):u.value=o,n.push(u)})}),n}getTabularDataArray(){return[]}exportToCSV(){const e=this.getTabularDataArray().map(s=>s.map(o=>`"${(o==="&ndash;"?"":o).split(/[,;'"`]/).map(a=>bO(a)).join("")}"`)).map(s=>s.join(",")).join(`
`),n=this.getOptions();let r="myChart";const i=y(n,"fileDownload","fileName");typeof i=="function"?r=i("csv"):typeof i=="string"&&(r=i),this.services.files.downloadCSV(e,`${r}.csv`)}getTabularData(e){return Array.isArray(e)?e:this.transformToTabularData(e)}sanitize(e){return e=this.getTabularData(e),e}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(e=>{this.allDataGroups.indexOf(e)===-1&&this.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(e){const{groupMapsTo:n}=this.getOptions().data,{ACTIVE:r,DISABLED:i}=Tt.items.status,s=this.getOptions(),o=qr(e.map(l=>l[n]));s.data.selectedGroups.length&&(s.data.selectedGroups.every(l=>o.includes(l))||(s.data.selectedGroups=[]));const a=l=>!s.data.selectedGroups.length||s.data.selectedGroups.includes(l)?r:i;return o.map(l=>({name:l,status:a(l)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const e=this.getOptions(),n=y(e,"color","scale");Object.keys(n).forEach(r=>{this.allDataGroups.includes(r)||console.warn(`"${r}" does not exist in data groups.`)}),this.allDataGroups.filter(r=>n[r]).forEach(r=>this.colorScale[r]=n[r])}setColorClassNames(){const e=y(this.getOptions(),"color","pairing");let n=y(e,"numberOfVariants");(!n||n<this.allDataGroups.length)&&(n=this.allDataGroups.length);let r=y(e,"option");const i=oS.pairingOptions,s=n>5?14:n,o=`${s}-color`;r=r<=i[o]?r:1;const a=this.allDataGroups.map((l,c)=>`${s}-${r}-${c%14+1}`);this.colorClassNames=$a().range(a).domain(this.allDataGroups)}},Jf=class extends dl{constructor(e){super(e),this.axisFlavor=fs.DEFAULT}assignRangeAndDomains(){const{cartesianScales:e}=this.services,n=this.getOptions(),r=e.isDualAxes(),i={primaryDomain:e.domainAxisPosition,primaryRange:e.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return r&&(i.secondaryDomain=e.secondaryDomainAxisPosition,i.secondaryRange=e.secondaryRangeAxisPosition),Object.keys(i).forEach(s=>{const o=i[s];e.scales[o]?i[s]={position:o,label:e.getScaleLabel(o),identifier:y(n,"axes",o,"mapsTo")}:i[s]=null}),i}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{primaryDomain:i,primaryRange:s,secondaryDomain:o,secondaryRange:a}=this.assignRangeAndDomains(),{number:l,code:c}=y(this.getOptions(),"locale"),u=["Group",i.label,s.label,...o?[o.label]:[],...a?[a.label]:[]],h=e.map(d=>[d[r],d[i.identifier]===null?"&ndash;":d[i.identifier],d[s.identifier]===null||isNaN(d[s.identifier])?"&ndash;":l(d[s.identifier],c),...o?[d[o.identifier]===null?"&ndash;":d[o.identifier]]:[],...a?[d[a.identifier]===null||isNaN(d[a.identifier])?"&ndash;":d[a.identifier]]:[]]);return super.formatTable({headers:u,cells:h})}setData(e){let n;if(e&&(n=super.setData(e),y(this.getOptions(),"zoomBar",C.TOP,"enabled"))){const r=y(this.getOptions(),"zoomBar",C.TOP,"data");this.setZoomBarData(r)}return n}setZoomBarData(e){const n=e?this.sanitize(lr(e)):this.getDisplayData();let r=n;const{cartesianScales:i}=this.services;if(n&&i.domainAxisPosition&&i.rangeAxisPosition){const s=i.getDomainIdentifier(),o=i.getRangeIdentifier();let a=n.map(l=>l[s].getTime());a=qr(a).sort(),r=a.map(l=>{let c=0;const u={};return n.forEach(h=>{h[s].getTime()===l&&(c+=h[o])}),u[s]=new Date(l),u[o]=c,u})}this.set({zoomBarData:r})}getZoomBarData(){return this.get("zoomBarData")}sanitizeDateValues(e){const n=this.getOptions();if(!n.axes)return e;const r=[];return Object.keys(C).forEach(i=>{const s=C[i],o=n.axes[s];if(o&&o.scaleType===z.TIME){const a=o.mapsTo;(a!==null||a!==void 0)&&r.push(a)}}),r.length>0&&e.forEach(i=>{r.forEach(s=>{y(i,s,"getTime")===null&&(i[s]=new Date(i[s]))})}),e}sanitize(e){return e=super.sanitize(e),e=this.sanitizeDateValues(e),e}},wO=class extends dl{constructor(e){super(e)}getTabularData(e){const n=super.getTabularData(e);return e!==n&&n.forEach(r=>{r.key&&r.key!==r.group&&(r.group=r.key)}),n}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{valueMapsTo:i}=n.pie,{number:s,code:o}=y(n,"locale"),a=["Group","Value"],l=[...e.map(c=>[c[r],c[i]===null?"&ndash;":s(c[i],o)])];return super.formatTable({headers:a,cells:l})}sanitize(e){return this.getTabularData(e).sort((n,r)=>r.value-n.value)}},xO=class extends Jf{constructor(e){super(e),this.axisFlavor=fs.HOVERABLE,this._colorScale=void 0,this._domains=[],this._ranges=[],this._matrix={};const n=y(this.getOptions(),"axes");if(y(n,"left","scaleType")&&y(n,"left","scaleType")!==z.LABELS||y(n,"right","scaleType")&&y(n,"right","scaleType")!==z.LABELS||y(n,"top","scaleType")&&y(n,"top","scaleType")!==z.LABELS||y(n,"bottom","scaleType")&&y(n,"bottom","scaleType")!==z.LABELS)throw Error("Heatmap only supports label scaletypes.")}getValueDomain(){const e=on(this.getDisplayData(),r=>r.value),n=Tn().domain(e).nice().domain();if(n[0]>0)n[0]=0;else if(n[0]===0&&n[1]===0)return[0,1];return n[0]<0&&n[1]>0&&(Math.abs(n[0])>n[1]?n[1]=Math.abs(n[0]):n[0]=-n[1]),n}getFillColor(e){return this._colorScale(e)}getUniqueDomain(){if(nn(this._domains)){const e=this.getDisplayData(),{cartesianScales:n}=this.services,r=n.getDomainIdentifier(),i=n.getMainXAxisPosition(),s=n.getCustomDomainValuesByposition(i);if(s)return s;this._domains=Array.from(new Set(e.map(o=>o[r])))}return this._domains}getUniqueRanges(){if(nn(this._ranges)){const e=this.getDisplayData(),{cartesianScales:n}=this.services,r=n.getRangeIdentifier(),i=n.getMainYAxisPosition(),s=n.getCustomDomainValuesByposition(i);if(s)return s;this._ranges=Array.from(new Set(e.map(o=>o[r])))}return this._ranges}getMatrix(){if(nn(this._matrix)){const e=this.getUniqueDomain(),n=this.getUniqueRanges(),r=this.services.cartesianScales.getDomainIdentifier(),i=this.services.cartesianScales.getRangeIdentifier(),s={};n.forEach(o=>{s[o]={value:null,index:-1}}),e.forEach(o=>{this._matrix[o]=lr(s)}),this.getDisplayData().forEach((o,a)=>{this._matrix[o[r]][o[i]]={value:o.value,index:a}})}return this._matrix}setData(e){const n=this.sanitize(lr(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),this._domains=[],this._ranges=[],this._matrix={},n}getMatrixAsArray(){nn(this._matrix)&&this.getMatrix();const e=this.getUniqueDomain(),n=this.getUniqueRanges(),r=this.services.cartesianScales.getDomainIdentifier(),i=this.services.cartesianScales.getRangeIdentifier(),s=[];return e.forEach(o=>{n.forEach(a=>{const l={value:this._matrix[o][a].value,index:this._matrix[o][a].index};l[r]=o,l[i]=a,s.push(l)})}),s}getTabularDataArray(){const e=this.getDisplayData(),{primaryDomain:n,primaryRange:r}=this.assignRangeAndDomains(),{number:i,code:s}=y(this.getOptions(),"locale"),o=[n.label,r.label,"Value"],a=[...e.map(l=>[l[n.identifier]===null?"&ndash;":l[n.identifier],l[r.identifier]===null?"&ndash;":l[r.identifier],l.value===null?"&ndash;":i(l.value,s)])];return super.formatTable({headers:o,cells:a})}getColorClassName(e){return`${e.originalClassName} ${this._colorScale(e.value)}`}setColorClassNames(){const e=this.getOptions(),n=y(e,"color","gradient","colors"),r=!nn(n);let i=y(e,"color","pairing","option");const s=this.getValueDomain(),o=s[0]<0&&s[1]>0?"diverge":"mono";(i<1&&i>4&&o==="mono"||i<1&&i>2&&o==="diverge")&&(i=1);const a=r?n:[];if(!r){const c=o==="diverge"?17:11;for(let u=1;u<c+1;u++)a.push(`fill-${o}-${i}-${u}`)}this._colorScale=Pa().domain(s).range(a);const l=y(this.getOptions(),"color");this._colorScale=uO(this.getDisplayData(),l)}};var EO=/\s/;function TO(t){for(var e=t.length;e--&&EO.test(t.charAt(e)););return e}var SO=/^\s+/;function OO(t){return t&&t.slice(0,TO(t)+1).replace(SO,"")}var Ru=NaN,MO=/^[-+]0x[0-9a-f]+$/i,AO=/^0b[01]+$/i,CO=/^0o[0-7]+$/i,DO=parseInt;function Zn(t){if(typeof t=="number")return t;if(Ts(t))return Ru;if(de(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=de(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=OO(t);var n=AO.test(t);return n||CO.test(t)?DO(t.slice(2),n?2:8):MO.test(t)?Ru:+t}var uo=function(){return we.Date.now()},LO="Expected a function",kO=Math.max,RO=Math.min;function $O(t,e,n){var r,i,s,o,a,l,c=0,u=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(LO);e=Zn(e)||0,de(n)&&(u=!!n.leading,h="maxWait"in n,s=h?kO(Zn(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function f(E){var O=r,A=i;return r=i=void 0,c=E,o=t.apply(A,O),o}function p(E){return c=E,a=setTimeout(v,e),u?f(E):o}function m(E){var O=E-l,A=E-c,M=e-O;return h?RO(M,s-A):M}function g(E){var O=E-l,A=E-c;return l===void 0||O>=e||O<0||h&&A>=s}function v(){var E=uo();if(g(E))return b(E);a=setTimeout(v,m(E))}function b(E){return a=void 0,d&&r?f(E):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function T(){return a===void 0?o:b(uo())}function x(){var E=uo(),O=g(E);if(r=arguments,i=this,l=E,O){if(a===void 0)return p(l);if(h)return clearTimeout(a),a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return x.cancel=_,x.flush=T,x}function IO(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const PO=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function ze(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function os(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function NO(t){const e=os(t,"border-left-width"),n=os(t,"border-right-width");return t.clientWidth+e+n}function BO(t){const e=os(t,"border-top-width"),n=os(t,"border-bottom-width");return t.clientHeight+e+n}function tp(t,e={}){const n=e.width||NO(t),r=e.height||BO(t);return{width:n,height:r}}function UO(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const ne=16384;function HO(t){(t.width>ne||t.height>ne)&&(t.width>ne&&t.height>ne?t.width>t.height?(t.height*=ne/t.width,t.width=ne):(t.width*=ne/t.height,t.height=ne):t.width>ne?(t.height*=ne/t.width,t.width=ne):(t.width*=ne/t.height,t.height=ne))}function as(t){return new Promise((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function FO(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function VO(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),FO(i)}const ee=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||ee(n,e)};function zO(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function GO(t){return ze(t).map(e=>{const n=t.getPropertyValue(e),r=t.getPropertyPriority(e);return`${e}: ${n}${r?" !important":""};`}).join(" ")}function jO(t,e,n){const r=`.${t}:${e}`,i=n.cssText?zO(n):GO(n);return document.createTextNode(`${r}{${i}}`)}function $u(t,e,n){const r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(i===""||i==="none")return;const s=PO();try{e.className=`${e.className} ${s}`}catch{return}const o=document.createElement("style");o.appendChild(jO(s,n,r)),e.appendChild(o)}function WO(t,e){$u(t,e,":before"),$u(t,e,":after")}const Iu="application/font-woff",Pu="image/jpeg",YO={woff:Iu,woff2:Iu,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Pu,jpeg:Pu,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function XO(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function fl(t){const e=XO(t).toLowerCase();return YO[e]||""}function qO(t){return t.split(/,/)[1]}function Ko(t){return t.search(/^(data:)/)!==-1}function ZO(t,e){return`data:${e};base64,${t}`}async function ep(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{s(n({res:r,result:a.result}))}catch(l){o(l)}},a.readAsDataURL(i)})}const ho={};function KO(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function pl(t,e,n){const r=KO(t,e,n.includeQueryParams);if(ho[r]!=null)return ho[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await ep(t,n.fetchRequestInit,({res:o,result:a})=>(e||(e=o.headers.get("Content-Type")||""),qO(a)));i=ZO(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return ho[r]=i,i}async function QO(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):as(e)}async function JO(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o==null||o.drawImage(t,0,0,s.width,s.height);const a=s.toDataURL();return as(a)}const n=t.poster,r=fl(n),i=await pl(n,r,e);return as(i)}async function tM(t){var e;try{if(!((e=t==null?void 0:t.contentDocument)===null||e===void 0)&&e.body)return await Rs(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function eM(t,e){return ee(t,HTMLCanvasElement)?QO(t):ee(t,HTMLVideoElement)?JO(t,e):ee(t,HTMLIFrameElement)?tM(t):t.cloneNode(!1)}const nM=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT";async function rM(t,e,n){var r,i;let s=[];return nM(t)&&t.assignedNodes?s=ze(t.assignedNodes()):ee(t,HTMLIFrameElement)&&!((r=t.contentDocument)===null||r===void 0)&&r.body?s=ze(t.contentDocument.body.childNodes):s=ze(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||ee(t,HTMLVideoElement)||await s.reduce((o,a)=>o.then(()=>Rs(a,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function iM(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):ze(r).forEach(i=>{let s=r.getPropertyValue(i);i==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),ee(t,HTMLIFrameElement)&&i==="display"&&s==="inline"&&(s="block"),i==="d"&&e.getAttribute("d")&&(s=`path(${e.getAttribute("d")})`),n.setProperty(i,s,r.getPropertyPriority(i))})}function sM(t,e){ee(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),ee(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function oM(t,e){if(ee(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function aM(t,e){return ee(e,Element)&&(iM(t,e),WO(t,e),sM(t,e),oM(t,e)),e}async function lM(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const o=n[s].getAttribute("xlink:href");if(o){const a=t.querySelector(o),l=document.querySelector(o);!a&&l&&!r[o]&&(r[o]=await Rs(l,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(s,"defs");o.appendChild(a);for(let l=0;l<i.length;l++)a.appendChild(i[l]);t.appendChild(o)}return t}async function Rs(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>eM(r,e)).then(r=>rM(t,r,e)).then(r=>aM(t,r)).then(r=>lM(r,e))}const np=/url\((['"]?)([^'"]+?)\1\)/g,cM=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,uM=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function hM(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function dM(t){const e=[];return t.replace(np,(n,r,i)=>(e.push(i),n)),e.filter(n=>!Ko(n))}async function fM(t,e,n,r,i){try{const s=n?IO(e,n):e,o=fl(e);let a;return i||(a=await pl(s,o,r)),t.replace(hM(e),`$1${a}$3`)}catch{}return t}function pM(t,{preferredFontFormat:e}){return e?t.replace(uM,n=>{for(;;){const[r,,i]=cM.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function rp(t){return t.search(np)!==-1}async function ip(t,e,n){if(!rp(t))return t;const r=pM(t,n);return dM(r).reduce((i,s)=>i.then(o=>fM(o,s,e,n)),Promise.resolve(r))}async function pi(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await ip(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function mM(t,e){await pi("background",t,e)||await pi("background-image",t,e),await pi("mask",t,e)||await pi("mask-image",t,e)}async function gM(t,e){const n=ee(t,HTMLImageElement);if(!(n&&!Ko(t.src))&&!(ee(t,SVGImageElement)&&!Ko(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await pl(r,fl(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=o;const a=t;a.decode&&(a.decode=s),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function vM(t,e){const n=ze(t.childNodes).map(r=>sp(r,e));await Promise.all(n).then(()=>t)}async function sp(t,e){ee(t,Element)&&(await mM(t,e),await gM(t,e),await vM(t,e))}function yM(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const Nu={};async function Bu(t){let e=Nu[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},Nu[t]=e,e}async function Uu(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let o=s.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),ep(o,e.fetchRequestInit,({result:a})=>(n=n.replace(s,`url(${a})`),[s,a]))});return Promise.all(i).then(()=>n)}function Hu(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let l=s.exec(r);if(l===null){if(l=a.exec(r),l===null)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(l[0])}return e}async function _M(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{ze(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let a=o+1;const l=s.href,c=Bu(l).then(u=>Uu(u,e)).then(u=>Hu(u).forEach(h=>{try{i.insertRule(h,h.startsWith("@import")?a+=1:i.cssRules.length)}catch(d){console.error("Error inserting rule from remote css",{rule:h,error:d})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(c)}})}catch(s){const o=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(Bu(i.href).then(a=>Uu(a,e)).then(a=>Hu(a).forEach(l=>{o.insertRule(l,i.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{ze(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function bM(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>rp(e.style.getPropertyValue("src")))}async function wM(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=ze(t.ownerDocument.styleSheets),r=await _M(n,e);return bM(r)}async function xM(t,e){const n=await wM(t,e);return(await Promise.all(n.map(r=>{const i=r.parentStyleSheet?r.parentStyleSheet.href:null;return ip(r.cssText,i,e)}))).join(`
`)}async function EM(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await xM(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function TM(t,e={}){const{width:n,height:r}=tp(t,e),i=await Rs(t,e,!0);return await EM(i,e),await sp(i,e),yM(i,e),await VO(i,n,r)}async function op(t,e={}){const{width:n,height:r}=tp(t,e),i=await TM(t,e),s=await as(i),o=document.createElement("canvas"),a=o.getContext("2d"),l=e.pixelRatio||UO(),c=e.canvasWidth||n,u=e.canvasHeight||r;return o.width=c*l,o.height=u*l,e.skipAutoScale||HO(o),o.style.width=`${c}`,o.style.height=`${u}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function SM(t,e={}){return(await op(t,e)).toDataURL()}async function OM(t,e={}){return(await op(t,e)).toDataURL("image/jpeg",e.quality||1)}class Ke{constructor(e,n){this.model=e,this.services=n,this.init()}init(){}update(){}setModel(e){this.model=e}setServices(e){this.services=e}}const MM="DONT_STYLE_ME_css_styles_verifier";let R=class Qo extends Ke{constructor(e,n){super(e,n)}static getHTMLElementSize(e){return{width:e.clientWidth,height:e.clientHeight}}static getSVGElementSize(e,n={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){e.attr||(e=D(e));const r={width:0,height:0},i=d=>{d&&Object.keys(r).forEach(f=>{if(d[f]){const p=d[f],m=parseFloat(p);p&&m>r[f]&&(""+p).indexOf("%")===-1&&(r[f]=m)}})},s={width:e.attr("width"),height:e.attr("height")},o=e.node();let a,l,c,u;try{typeof o.getBBox=="function"&&(a=o.getBBox(),l={width:a.width,height:a.height})}catch(d){console.error(d)}try{typeof(o==null?void 0:o.getBoundingClientRect)=="function"&&(c=o.getBoundingClientRect(),u={width:c.width,height:c.height})}catch(d){console.error(d)}let h;if(o instanceof SVGSVGElement&&(h={width:o.clientWidth,height:o.clientHeight}),n){if(n.useAttrs&&(i(s),r.width>0&&r.height>0))return r;if(n.useClientDimensions&&(i(h),r.width>0&&r.height>0))return h;if(n.useBBox&&(i(l),r.width>0&&r.height>0))return l;if(n.useBoundingRect&&(i(u),r.width>0&&r.height>0))return u}try{const d={width:y(e.node(),"width","baseVal","value"),height:y(e.node(),"height","baseVal","value")};i(d)}catch{i(h),i(l),i(s)}return r}static appendOrSelect(e,n){const r=e.select(`${n}`);if(r.empty()){let i=n.split("#"),s,o;return i.length===2?(s=i[0],i=i[1].split("."),o=i[0]):(i=n.split("."),s=i[0]),e.append(s).attr("id",o).attr("class",i.slice(1).join(" "))}return r}init(){this.initializeID(),this.styleHolderElement(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}getElementOffset(e,n=!1){const r={left:0,top:0},i=e.getBoundingClientRect(),s=n?{left:0,top:0}:this.getHolder().getBoundingClientRect();try{r.left=i.left-s.left,r.top=i.top-s.top}catch(o){console.error(o)}return r}generateElementIDString(e){return`chart-${this.chartID}-${e}`}initializeID(){this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)}addMainContainer(){const e=this.model.getOptions(),n=y(e,"style","prefix"),r=D(this.getHolder()).append("div").classed(`${Jt}--${n}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");r.append("g").attr("class",MM),this.mainContainer=r.node()}update(){this.styleHolderElement()}styleHolderElement(){const e=this.getHolder(),{width:n,height:r,theme:i}=this.model.getOptions();n!==this.width&&(e.style.width=n,this.width=n),r!==this.height&&(e.style.height=r,this.height=r),D(this.getHolder()).classed(`${Jt}--chart-holder`,!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=D(r);i.classed("filled",!0),OM(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){var o;let a="myChart";const l=y(n,"fileDownload","fileName");typeof l=="function"?a=l("jpg"):typeof l=="string"&&(a=l),(o=e.services.files)==null||o.downloadImage(s,`${a}.jpg`),i.classed("filled",!1)})}exportToPNG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=D(r);i.classed("filled",!0),SM(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){var o;let a="myChart";const l=y(n,"fileDownload","fileName");typeof l=="function"?a=l("png"):typeof l=="string"&&(a=l),(o=e.services.files)==null||o.downloadImage(s,`${a}.png`),i.classed("filled",!1)}).catch(function(s){console.error("oops, something went wrong!",s)})}isFullScreenMode(){return D(this.getHolder()).classed("fullscreen")}toggleFullscreen(){const e=this.getHolder();D(e).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{const e=D(this.getHolder()),n=e.classed("fullscreen");e.classed("fullscreen",!n)})}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:e}=Qo.getSVGElementSize(D(this.mainContainer),{useBBox:!0}),n=D(this.mainContainer).attr("class"),r=D(this.mainContainer).selectAll(`.${n} > svg`);let i=0;r.nodes().forEach(function(s){i+=Number(Qo.getSVGElementSize(D(s),{useBBox:!0}).height)}),i<=e?D(this.mainContainer).attr("height",i):D(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const e=this.getHolder();e&&D(e).on("mouseover",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(S.Chart.MOUSEOVER)}).on("mouseout",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(S.Chart.MOUSEOUT)})}addResizeListener(){const e=this.getHolder();if(!e)return;let n=e.clientWidth,r=e.clientHeight;const i=$O(()=>{var s;e&&(Math.abs(n-e.clientWidth)>1||Math.abs(r-e.clientHeight)>1)&&(n=e.clientWidth,r=e.clientHeight,(s=this.services.events)==null||s.dispatchEvent(S.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(e)}};class Kr extends Ke{static appendOrUpdateLinearGradient(e){let n=e.svg.select(`defs linearGradient#${e.id}`);n.empty()&&(n=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),n.selectAll("stop").remove(),n.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",r=>r.offset).style("stop-color",r=>r.color).style("stop-opacity",r=>r.opacity)}static getOffsetRatio(e){return(Math.abs(e[1])*100/Math.abs(e[0]-e[1])).toFixed(2)+"%"}static getStops(e,n){const r=e[0]<0&&e[1]>0;let i=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return r&&(i=[{offset:"0%",color:n,opacity:"0.6"},{offset:Kr.getOffsetRatio(e),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),i}}function AM(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var CM={value:function(){}};function ap(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Li(n)}function Li(t){this._=t}function DM(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Li.prototype=ap.prototype={constructor:Li,on:function(t,e){var n=this._,r=DM(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=LM(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Fu(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Fu(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Li(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function LM(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Fu(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=CM,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const kM=Object.freeze(Object.defineProperty({__proto__:null,dispatch:ap},Symbol.toStringTag,{value:"Module"})),RM=AM(kM);RM.dispatch;function $M(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function IM(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=Zn(n),n=n===n?n:0),e!==void 0&&(e=Zn(e),e=e===e?e:0),$M(Zn(t),e,n)}var PM="Expected a function";function NM(t,e,n){if(typeof t!="function")throw new TypeError(PM);return setTimeout(function(){t.apply(void 0,n)},e)}var BM=Ja(function(t,e,n){return NM(t,Zn(e)||0,n)});function UM(t,e){return Ls(t,e)}function HM(t,e){var n;return Qf(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}function FM(t,e,n){var r=Wt(t)?Tf:HM;return r(t,al(e))}class Et{constructor(e,n,r){if(this.type="",this.renderType=ot.HTML,this.id="",this.parent=void 0,this.configs={},this.model=e,this.services=n,r&&(this.configs=r,this.configs.id)){const i=y(this.model.getOptions(),"style","prefix");this.id=`${i}--${this.configs.id}`}this.parent||this.setParent(D(this.services.domUtils.getMainContainer()))}init(){}render(e=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(e){this.model=e}setServices(e){this.services=e}setParent(e){var n;const r=this.parent;if(this.parent=e,!(r&&r.node()===e.node())&&this.type){const i=y(this.model.getOptions(),"style","prefix");(n=this.parent)==null||n.classed(`${Jt}--${i}--${this.type}`,!0),r&&r.classed(`${Jt}--${i}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(e={withinChartClip:!1}){if(this.type){const n=y(this.model.getOptions(),"style","prefix"),r=this.id?`#${this.id}`:"",i=R.appendOrSelect(this.parent,`${this.renderType===ot.SVG?"svg":"div"}${r}.${Jt}--${n}--${this.type}`);if(e.withinChartClip){const s=this.model.get("chartClipId");if(s){const o=D(`#${s}`).select("rect");o.size()!==0&&parseFloat(o.attr("height"))>0&&i.attr("clip-path",`url(#${s})`)}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?et({},this.model.getOptions(),this.configs.options):this.model.getOptions()}}/*! @license DOMPurify 3.1.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.0/LICENSE */const{entries:lp,setPrototypeOf:Vu,isFrozen:VM,getPrototypeOf:zM,getOwnPropertyDescriptor:GM}=Object;let{freeze:Zt,seal:fe,create:cp}=Object,{apply:Jo,construct:ta}=typeof Reflect<"u"&&Reflect;Zt||(Zt=function(t){return t});fe||(fe=function(t){return t});Jo||(Jo=function(t,e,n){return t.apply(e,n)});ta||(ta=function(t,e){return new t(...e)});const mi=ce(Array.prototype.forEach),zu=ce(Array.prototype.pop),Er=ce(Array.prototype.push),ki=ce(String.prototype.toLowerCase),fo=ce(String.prototype.toString),Gu=ce(String.prototype.match),Tr=ce(String.prototype.replace),jM=ce(String.prototype.indexOf),WM=ce(String.prototype.trim),me=ce(Object.prototype.hasOwnProperty),Qt=ce(RegExp.prototype.test),Sr=YM(TypeError);function ce(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Jo(t,e,r)}}function YM(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ta(t,n)}}function nt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ki;Vu&&Vu(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(VM(e)||(e[r]=s),i=s)}t[i]=!0}return t}function XM(t){for(let e=0;e<t.length;e++)me(t,e)||(t[e]=null);return t}function mn(t){const e=cp(null);for(const[n,r]of lp(t))me(t,n)&&(Array.isArray(r)?e[n]=XM(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=mn(r):e[n]=r);return e}function gi(t,e){for(;t!==null;){const r=GM(t,e);if(r){if(r.get)return ce(r.get);if(typeof r.value=="function")return ce(r.value)}t=zM(t)}function n(){return null}return n}const ju=Zt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),po=Zt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),mo=Zt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qM=Zt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),go=Zt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ZM=Zt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Wu=Zt(["#text"]),Yu=Zt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),vo=Zt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Xu=Zt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vi=Zt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),KM=fe(/\{\{[\w\W]*|[\w\W]*\}\}/gm),QM=fe(/<%[\w\W]*|[\w\W]*%>/gm),JM=fe(/\${[\w\W]*}/gm),tA=fe(/^data-[\-\w.\u00B7-\uFFFF]/),eA=fe(/^aria-[\-\w]+$/),up=fe(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nA=fe(/^(?:\w+script|data):/i),rA=fe(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hp=fe(/^html$/i),iA=fe(/^[a-z][.\w]*(-[.\w]+)+$/i);var qu=Object.freeze({__proto__:null,MUSTACHE_EXPR:KM,ERB_EXPR:QM,TMPLIT_EXPR:JM,DATA_ATTR:tA,ARIA_ATTR:eA,IS_ALLOWED_URI:up,IS_SCRIPT_OR_DATA:nA,ATTR_WHITESPACE:rA,DOCTYPE_NAME:hp,CUSTOM_ELEMENT:iA});const sA=function(){return typeof window>"u"?null:window},oA=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function dp(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sA();const e=w=>dp(w);if(e.version="3.1.0",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:f}=t,p=l.prototype,m=gi(p,"cloneNode"),g=gi(p,"nextSibling"),v=gi(p,"childNodes"),b=gi(p,"parentNode");if(typeof o=="function"){const w=n.createElement("template");w.content&&w.content.ownerDocument&&(n=w.content.ownerDocument)}let _,T="";const{implementation:x,createNodeIterator:E,createDocumentFragment:O,getElementsByTagName:A}=n,{importNode:M}=r;let L={};e.isSupported=typeof lp=="function"&&typeof b=="function"&&x&&x.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:I,ERB_EXPR:V,TMPLIT_EXPR:$,DATA_ATTR:U,ARIA_ATTR:K,IS_SCRIPT_OR_DATA:W,ATTR_WHITESPACE:N,CUSTOM_ELEMENT:J}=qu;let{IS_ALLOWED_URI:q}=qu,Z=null;const it=nt({},[...ju,...po,...mo,...go,...Wu]);let Y=null;const Lt=nt({},[...Yu,...vo,...Xu,...vi]);let tt=Object.seal(cp(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),gt=null,H=null,X=!0,st=!0,P=!1,G=!0,Q=!1,k=!0,ht=!1,lt=!1,Rt=!1,St=!1,j=!1,vt=!1,Qe=!0,pe=!1;const kp="user-content-";let Is=!0,fr=!1,Rn={},$n=null;const Sl=nt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ol=null;const Ml=nt({},["audio","video","img","source","image","track"]);let Ps=null;const Al=nt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),si="http://www.w3.org/1998/Math/MathML",oi="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml";let In=$e,Ns=!1,Bs=null;const Rp=nt({},[si,oi,$e],fo);let pr=null;const $p=["application/xhtml+xml","text/html"],Ip="text/html";let Pt=null,Pn=null;const Pp=n.createElement("form"),Cl=function(w){return w instanceof RegExp||w instanceof Function},Us=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Pn&&Pn===w)){if((!w||typeof w!="object")&&(w={}),w=mn(w),pr=$p.indexOf(w.PARSER_MEDIA_TYPE)===-1?Ip:w.PARSER_MEDIA_TYPE,Pt=pr==="application/xhtml+xml"?fo:ki,Z=me(w,"ALLOWED_TAGS")?nt({},w.ALLOWED_TAGS,Pt):it,Y=me(w,"ALLOWED_ATTR")?nt({},w.ALLOWED_ATTR,Pt):Lt,Bs=me(w,"ALLOWED_NAMESPACES")?nt({},w.ALLOWED_NAMESPACES,fo):Rp,Ps=me(w,"ADD_URI_SAFE_ATTR")?nt(mn(Al),w.ADD_URI_SAFE_ATTR,Pt):Al,Ol=me(w,"ADD_DATA_URI_TAGS")?nt(mn(Ml),w.ADD_DATA_URI_TAGS,Pt):Ml,$n=me(w,"FORBID_CONTENTS")?nt({},w.FORBID_CONTENTS,Pt):Sl,gt=me(w,"FORBID_TAGS")?nt({},w.FORBID_TAGS,Pt):{},H=me(w,"FORBID_ATTR")?nt({},w.FORBID_ATTR,Pt):{},Rn=me(w,"USE_PROFILES")?w.USE_PROFILES:!1,X=w.ALLOW_ARIA_ATTR!==!1,st=w.ALLOW_DATA_ATTR!==!1,P=w.ALLOW_UNKNOWN_PROTOCOLS||!1,G=w.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Q=w.SAFE_FOR_TEMPLATES||!1,k=w.SAFE_FOR_XML!==!1,ht=w.WHOLE_DOCUMENT||!1,St=w.RETURN_DOM||!1,j=w.RETURN_DOM_FRAGMENT||!1,vt=w.RETURN_TRUSTED_TYPE||!1,Rt=w.FORCE_BODY||!1,Qe=w.SANITIZE_DOM!==!1,pe=w.SANITIZE_NAMED_PROPS||!1,Is=w.KEEP_CONTENT!==!1,fr=w.IN_PLACE||!1,q=w.ALLOWED_URI_REGEXP||up,In=w.NAMESPACE||$e,tt=w.CUSTOM_ELEMENT_HANDLING||{},w.CUSTOM_ELEMENT_HANDLING&&Cl(w.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(tt.tagNameCheck=w.CUSTOM_ELEMENT_HANDLING.tagNameCheck),w.CUSTOM_ELEMENT_HANDLING&&Cl(w.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(tt.attributeNameCheck=w.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),w.CUSTOM_ELEMENT_HANDLING&&typeof w.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(tt.allowCustomizedBuiltInElements=w.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Q&&(st=!1),j&&(St=!0),Rn&&(Z=nt({},Wu),Y=[],Rn.html===!0&&(nt(Z,ju),nt(Y,Yu)),Rn.svg===!0&&(nt(Z,po),nt(Y,vo),nt(Y,vi)),Rn.svgFilters===!0&&(nt(Z,mo),nt(Y,vo),nt(Y,vi)),Rn.mathMl===!0&&(nt(Z,go),nt(Y,Xu),nt(Y,vi))),w.ADD_TAGS&&(Z===it&&(Z=mn(Z)),nt(Z,w.ADD_TAGS,Pt)),w.ADD_ATTR&&(Y===Lt&&(Y=mn(Y)),nt(Y,w.ADD_ATTR,Pt)),w.ADD_URI_SAFE_ATTR&&nt(Ps,w.ADD_URI_SAFE_ATTR,Pt),w.FORBID_CONTENTS&&($n===Sl&&($n=mn($n)),nt($n,w.FORBID_CONTENTS,Pt)),Is&&(Z["#text"]=!0),ht&&nt(Z,["html","head","body"]),Z.table&&(nt(Z,["tbody"]),delete gt.tbody),w.TRUSTED_TYPES_POLICY){if(typeof w.TRUSTED_TYPES_POLICY.createHTML!="function")throw Sr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof w.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Sr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=w.TRUSTED_TYPES_POLICY,T=_.createHTML("")}else _===void 0&&(_=oA(f,i)),_!==null&&typeof T=="string"&&(T=_.createHTML(""));Zt&&Zt(w),Pn=w}},Dl=nt({},["mi","mo","mn","ms","mtext"]),Ll=nt({},["foreignobject","desc","title","annotation-xml"]),Np=nt({},["title","style","font","a","script"]),kl=nt({},[...po,...mo,...qM]),Rl=nt({},[...go,...ZM]),Bp=function(w){let F=b(w);(!F||!F.tagName)&&(F={namespaceURI:In,tagName:"template"});const B=ki(w.tagName),dt=ki(F.tagName);return Bs[w.namespaceURI]?w.namespaceURI===oi?F.namespaceURI===$e?B==="svg":F.namespaceURI===si?B==="svg"&&(dt==="annotation-xml"||Dl[dt]):!!kl[B]:w.namespaceURI===si?F.namespaceURI===$e?B==="math":F.namespaceURI===oi?B==="math"&&Ll[dt]:!!Rl[B]:w.namespaceURI===$e?F.namespaceURI===oi&&!Ll[dt]||F.namespaceURI===si&&!Dl[dt]?!1:!Rl[B]&&(Np[B]||!kl[B]):!!(pr==="application/xhtml+xml"&&Bs[w.namespaceURI]):!1},Nn=function(w){Er(e.removed,{element:w});try{w.parentNode.removeChild(w)}catch{w.remove()}},Hs=function(w,F){try{Er(e.removed,{attribute:F.getAttributeNode(w),from:F})}catch{Er(e.removed,{attribute:null,from:F})}if(F.removeAttribute(w),w==="is"&&!Y[w])if(St||j)try{Nn(F)}catch{}else try{F.setAttribute(w,"")}catch{}},$l=function(w){let F=null,B=null;if(Rt)w="<remove></remove>"+w;else{const $t=Gu(w,/^[\r\n\t ]+/);B=$t&&$t[0]}pr==="application/xhtml+xml"&&In===$e&&(w='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+w+"</body></html>");const dt=_?_.createHTML(w):w;if(In===$e)try{F=new d().parseFromString(dt,pr)}catch{}if(!F||!F.documentElement){F=x.createDocument(In,"template",null);try{F.documentElement.innerHTML=Ns?T:dt}catch{}}const Ft=F.body||F.documentElement;return w&&B&&Ft.insertBefore(n.createTextNode(B),Ft.childNodes[0]||null),In===$e?A.call(F,ht?"html":"body")[0]:ht?F.documentElement:Ft},Il=function(w){return E.call(w.ownerDocument||w,w,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Up=function(w){return w instanceof h&&(typeof w.nodeName!="string"||typeof w.textContent!="string"||typeof w.removeChild!="function"||!(w.attributes instanceof u)||typeof w.removeAttribute!="function"||typeof w.setAttribute!="function"||typeof w.namespaceURI!="string"||typeof w.insertBefore!="function"||typeof w.hasChildNodes!="function")},Pl=function(w){return typeof a=="function"&&w instanceof a},Ie=function(w,F,B){L[w]&&mi(L[w],dt=>{dt.call(e,F,B,Pn)})},Nl=function(w){let F=null;if(Ie("beforeSanitizeElements",w,null),Up(w))return Nn(w),!0;const B=Pt(w.nodeName);if(Ie("uponSanitizeElement",w,{tagName:B,allowedTags:Z}),w.hasChildNodes()&&!Pl(w.firstElementChild)&&Qt(/<[/\w]/g,w.innerHTML)&&Qt(/<[/\w]/g,w.textContent)||w.nodeType===7||k&&w.nodeType===8&&Qt(/<[/\w]/g,w.data))return Nn(w),!0;if(!Z[B]||gt[B]){if(!gt[B]&&Ul(B)&&(tt.tagNameCheck instanceof RegExp&&Qt(tt.tagNameCheck,B)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(B)))return!1;if(Is&&!$n[B]){const dt=b(w)||w.parentNode,Ft=v(w)||w.childNodes;if(Ft&&dt){const $t=Ft.length;for(let Pe=$t-1;Pe>=0;--Pe)dt.insertBefore(m(Ft[Pe],!0),g(w))}}return Nn(w),!0}return w instanceof l&&!Bp(w)||(B==="noscript"||B==="noembed"||B==="noframes")&&Qt(/<\/no(script|embed|frames)/i,w.innerHTML)?(Nn(w),!0):(Q&&w.nodeType===3&&(F=w.textContent,mi([I,V,$],dt=>{F=Tr(F,dt," ")}),w.textContent!==F&&(Er(e.removed,{element:w.cloneNode()}),w.textContent=F)),Ie("afterSanitizeElements",w,null),!1)},Bl=function(w,F,B){if(Qe&&(F==="id"||F==="name")&&(B in n||B in Pp))return!1;if(!(st&&!H[F]&&Qt(U,F))&&!(X&&Qt(K,F))){if(!Y[F]||H[F]){if(!(Ul(w)&&(tt.tagNameCheck instanceof RegExp&&Qt(tt.tagNameCheck,w)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(w))&&(tt.attributeNameCheck instanceof RegExp&&Qt(tt.attributeNameCheck,F)||tt.attributeNameCheck instanceof Function&&tt.attributeNameCheck(F))||F==="is"&&tt.allowCustomizedBuiltInElements&&(tt.tagNameCheck instanceof RegExp&&Qt(tt.tagNameCheck,B)||tt.tagNameCheck instanceof Function&&tt.tagNameCheck(B))))return!1}else if(!Ps[F]&&!Qt(q,Tr(B,N,""))&&!((F==="src"||F==="xlink:href"||F==="href")&&w!=="script"&&jM(B,"data:")===0&&Ol[w])&&!(P&&!Qt(W,Tr(B,N,"")))&&B)return!1}return!0},Ul=function(w){return w!=="annotation-xml"&&Gu(w,J)},Hl=function(w){Ie("beforeSanitizeAttributes",w,null);const{attributes:F}=w;if(!F)return;const B={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y};let dt=F.length;for(;dt--;){const Ft=F[dt],{name:$t,namespaceURI:Pe,value:Ne}=Ft,xe=Pt($t);let Kt=$t==="value"?Ne:WM(Ne);if(B.attrName=xe,B.attrValue=Kt,B.keepAttr=!0,B.forceKeepAttr=void 0,Ie("uponSanitizeAttribute",w,B),Kt=B.attrValue,B.forceKeepAttr||(Hs($t,w),!B.keepAttr))continue;if(!G&&Qt(/\/>/i,Kt)){Hs($t,w);continue}Q&&mi([I,V,$],Fp=>{Kt=Tr(Kt,Fp," ")});const Fl=Pt(w.nodeName);if(Bl(Fl,xe,Kt)){if(pe&&(xe==="id"||xe==="name")&&(Hs($t,w),Kt=kp+Kt),_&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!Pe)switch(f.getAttributeType(Fl,xe)){case"TrustedHTML":{Kt=_.createHTML(Kt);break}case"TrustedScriptURL":{Kt=_.createScriptURL(Kt);break}}try{Pe?w.setAttributeNS(Pe,$t,Kt):w.setAttribute($t,Kt),zu(e.removed)}catch{}}}Ie("afterSanitizeAttributes",w,null)},Hp=function w(F){let B=null;const dt=Il(F);for(Ie("beforeSanitizeShadowDOM",F,null);B=dt.nextNode();)Ie("uponSanitizeShadowNode",B,null),!Nl(B)&&(B.content instanceof s&&w(B.content),Hl(B));Ie("afterSanitizeShadowDOM",F,null)};return e.sanitize=function(w){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=null,dt=null,Ft=null,$t=null;if(Ns=!w,Ns&&(w="<!-->"),typeof w!="string"&&!Pl(w))if(typeof w.toString=="function"){if(w=w.toString(),typeof w!="string")throw Sr("dirty is not a string, aborting")}else throw Sr("toString is not a function");if(!e.isSupported)return w;if(lt||Us(F),e.removed=[],typeof w=="string"&&(fr=!1),fr){if(w.nodeName){const xe=Pt(w.nodeName);if(!Z[xe]||gt[xe])throw Sr("root node is forbidden and cannot be sanitized in-place")}}else if(w instanceof a)B=$l("<!---->"),dt=B.ownerDocument.importNode(w,!0),dt.nodeType===1&&dt.nodeName==="BODY"||dt.nodeName==="HTML"?B=dt:B.appendChild(dt);else{if(!St&&!Q&&!ht&&w.indexOf("<")===-1)return _&&vt?_.createHTML(w):w;if(B=$l(w),!B)return St?null:vt?T:""}B&&Rt&&Nn(B.firstChild);const Pe=Il(fr?w:B);for(;Ft=Pe.nextNode();)Nl(Ft)||(Ft.content instanceof s&&Hp(Ft.content),Hl(Ft));if(fr)return w;if(St){if(j)for($t=O.call(B.ownerDocument);B.firstChild;)$t.appendChild(B.firstChild);else $t=B;return(Y.shadowroot||Y.shadowrootmode)&&($t=M.call(r,$t,!0)),$t}let Ne=ht?B.outerHTML:B.innerHTML;return ht&&Z["!doctype"]&&B.ownerDocument&&B.ownerDocument.doctype&&B.ownerDocument.doctype.name&&Qt(hp,B.ownerDocument.doctype.name)&&(Ne="<!DOCTYPE "+B.ownerDocument.doctype.name+`>
`+Ne),Q&&mi([I,V,$],xe=>{Ne=Tr(Ne,xe," ")}),_&&vt?_.createHTML(Ne):Ne},e.setConfig=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Us(w),lt=!0},e.clearConfig=function(){Pn=null,lt=!1},e.isValidAttribute=function(w,F,B){Pn||Us({});const dt=Pt(w),Ft=Pt(F);return Bl(dt,Ft,B)},e.addHook=function(w,F){typeof F=="function"&&(L[w]=L[w]||[],Er(L[w],F))},e.removeHook=function(w){if(L[w])return zu(L[w])},e.removeHooks=function(w){L[w]&&(L[w]=[])},e.removeAllHooks=function(){L={}},e}var ml=dp();const yi=t=>ml.sanitize(t,{USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),aA=t=>ml.sanitize(t,{NAMESPACE:"http://www.w3.org/2000/svg",USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),Le=t=>ml.sanitize(t,{ALLOWED_TAGS:[]}),fp=class pp extends Et{constructor(){super(...arguments),this.type="toolbar",this.renderType=ot.HTML}init(){const e=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(S.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",e)}),this.services.events.addEventListener(S.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",e)})}render(e=!0){const n=this.getComponentContainer().attr("role","toolbar").attr("aria-label","chart toolbar");if(y(this.getOptions(),"data","loading"))n.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=n.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:r,overflowMenuItemList:i}=this.getControlConfigs();i&&r.push(this.getOverflowButtonConfig());const s=n.selectAll("div.toolbar-control").data(r,l=>l.id);s.exit().remove();const o=s.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu"),a=this;o.merge(s).classed("disabled",l=>l.shouldBeDisabled()).attr("role","button").attr("aria-disabled",l=>l.shouldBeDisabled()).attr("aria-label",l=>l.title).html(l=>`
			<button
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${Le(l.id)}`)}" aria-label="${Le(l.title)}">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					${aA(l.iconSVG.content)}
				</svg>
			</button>`).each(function(l,c){D(this).select("svg").style("pointer-events","none").style("will-change","transform").style("width",l.iconSVG.width!==void 0?l.iconSVG.width:"20px").style("height",l.iconSVG.height!==void 0?l.iconSVG.height:"20px"),D(this).select("button").on("mouseover focus",function(u){const h=D(this);h.classed("hovered",!0),a.services.events.dispatchEvent(S.Toolbar.SHOW_TOOLTIP,{event:u,hoveredElement:h,content:l.title,noWrap:!0,placements:["top","bottom"]})}).on("mouseout blur",function(){a.services.events.dispatchEvent(S.Toolbar.HIDE_TOOLTIP)}).on("click",u=>{l.shouldBeDisabled()||a.triggerFunctionAndEvent(l,u,this)}).on("keydown",u=>{u.key&&u.key==="Enter"||u.key===" "?(u.preventDefault(),a.triggerFunctionAndEvent(l,u,this)):u.key&&u.key==="ArrowLeft"?a.focusOnPreviousEnabledToolbarItem(c):u.key&&u.key==="ArrowRight"&&a.focusOnNextEnabledToolbarItem(c)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:e}=this.getControlConfigs(),n=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(e,i=>y(i,"id"));n.exit().remove();const r=n.enter().append("li").attr("id",i=>this.services.domUtils.generateElementIDString(`control-${i.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);r.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),r.merge(n).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).attr("aria-disabled",i=>i.shouldBeDisabled()).selectAll("button").text(i=>i.title)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(e){this.overflowMenu&&(this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),D(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",e).classed("cds--overflow-menu--open",e)),e?this.services.events.dispatchEvent(S.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(S.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=D(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnNextEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=D(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnPreviousEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=D(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}focusOnNextEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=D(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}toggleOverflowMenu(e){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const n=this;this.getOverflowMenuItems().forEach((r,i)=>{const s=D(`#${this.services.domUtils.generateElementIDString(`control-${r.id}`)}`);s!==null&&(s.on("click",()=>{n.triggerFunctionAndEvent(r,e,s.node()),n.updateOverflowMenu(!1)}),s.on("keydown",o=>{o&&o.key==="Enter"?n.triggerFunctionAndEvent(r,e,s.node()):o&&o.key==="ArrowUp"?n.focusOnPreviousEnabledMenuItem(i):o&&o.key==="ArrowDown"?n.focusOnNextEnabledMenuItem(i):o&&o.key==="Escape"&&n.updateOverflowMenu(!1),o.preventDefault()}))}),n.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()}triggerFunctionAndEvent(e,n,r){typeof e.shouldBeDisabled=="function"&&e.shouldBeDisabled()||(typeof e.clickFunction=="function"&&e.clickFunction(n),this.services.events.dispatchEvent(S.Toolbar.BUTTON_CLICK,{control:e,event:n,element:r}))}getControlConfigs(){const e=y(this.getOptions(),"toolbar","numberOfIcons")-1,n=y(this.getOptions(),"toolbar","controls"),r=[],i=[],s=[];return n.forEach(o=>{let a=null;if(o.type===ft.CUSTOM)y(o,"id")===null&&(o.id=`toolbar-button-${pp.buttonID++}`),y(o,"shouldBeDisabled")===null&&(o.shouldBeDisabled=()=>!1),a=o;else{const l=this.services.domUtils.isFullScreenMode();o.type===ft.MAKE_FULLSCREEN&&l?o.type=ft.EXIT_FULLSCREEN:o.type===ft.EXIT_FULLSCREEN&&!l&&(o.type=ft.MAKE_FULLSCREEN),a=this.getControlConfigByType(o.type)}a&&(a.text=o.text?o.text:o.type,a.id.indexOf("toolbar-export")!==-1?r.push(a):i.length<e?y(a,"iconSVG","content")===null?s.push(a):i.push(a):s.push(a))}),s.push(...r),s.length?{buttonList:i,overflowMenuItemList:s}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:e,overflowMenuItemList:n}=this.getControlConfigs();return n&&e.push(this.getOverflowButtonConfig()),e||[]}getOverflowMenuItems(){const{overflowMenuItemList:e}=this.getControlConfigs();return e||[]}getOverflowButtonConfig(){const{moreOptions:e}=y(this.model.getOptions(),"locale","translations","toolbar");return{id:"toolbar-overflow-menu",title:e,shouldBeDisabled:()=>!1,iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:n=>this.toggleOverflowMenu(n)}}getControlConfigByType(e){const n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),r=this.model.getDisplayData(),i=this.model.getOptions(),{exportAsCSV:s,exportAsJPG:o,exportAsPNG:a,zoomIn:l,zoomOut:c,resetZoom:u,makeFullScreen:h,exitFullScreen:d,showAsTable:f}=y(i,"locale","translations","toolbar");let p;switch(e){case ft.ZOOM_IN:n&&(p={id:"toolbar-zoomIn",title:l,shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomIn()});break;case ft.ZOOM_OUT:n&&(p={id:"toolbar-zoomOut",title:c,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomOut()});break;case ft.RESET_ZOOM:n&&(p={id:"toolbar-resetZoom",title:u,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case ft.MAKE_FULLSCREEN:p={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:h,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case ft.EXIT_FULLSCREEN:p={id:"toolbar-exitfullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:d,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case ft.SHOW_AS_DATATABLE:p={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(e)},title:f,shouldBeDisabled:()=>r.length===0,clickFunction:()=>this.services.events.dispatchEvent(S.Modal.SHOW)};break;case ft.EXPORT_CSV:p={id:"toolbar-export-CSV",title:s,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.model.exportToCSV()};break;case ft.EXPORT_PNG:p={id:"toolbar-export-PNG",title:a,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case ft.EXPORT_JPG:p={id:"toolbar-export-JPG",title:o,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+e)}return p}getControlIconByType(e){switch(e){case ft.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case ft.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case ft.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case ft.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case ft.EXIT_FULLSCREEN:return'<polygon points="4 18 4 20 10.586 20 2 28.582 3.414 30 12 21.414 12 28 14 28 14 18 4 18"/><polygon points="30 3.416 28.592 2 20 10.586 20 4 18 4 18 14 28 14 28 12 21.414 12 30 3.416"/>';case ft.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case ft.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case ft.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case ft.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}}};fp.buttonID=0;let gl=fp;const mp=class gp extends Et{constructor(e,n,r,i){super(e,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=gp.instanceID++,this.init()}init(){this.children.forEach(e=>{e.components.forEach(n=>{n.init()})})}getPreferedAndFixedSizeSum(){const e=this.parent;let n=0;return e.selectAll(`div.layout-child-${this._instanceID}`).filter(r=>{const i=y(r,"growth");return i===at.PREFERRED||i===at.FIXED}).each(function(r){n+=r.size}),n}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(e=>y(e,"growth")===at.STRETCH).size()}render(e=!0){const n=this.parent,{width:r,height:i}=R.getHTMLElementSize(n.node()),s=this.configs.direction===Ot.ROW||this.configs.direction===Ot.ROW_REVERSE,o=y(this.model.getOptions(),"style","prefix"),a=n.classed(`${Jt}--${o}--layout-row`,this.configs.direction===Ot.ROW).classed(`${Jt}--${o}--layout-row-reverse`,this.configs.direction===Ot.ROW_REVERSE).classed(`${Jt}--${o}--layout-column`,this.configs.direction===Ot.COLUMN).classed(`${Jt}--${o}--layout-column-reverse`,this.configs.direction===Ot.COLUMN_REVERSE).classed(`${Jt}--${o}--layout-alignitems-center`,this.configs.alignItems===Qr.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,c=>c.id);a.enter().append("div").merge(n.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",c=>`layout-child layout-child-${this._instanceID} ${c.id}`).each(function(c){c.components.forEach(u=>{const h=D(this),d=y(c,"renderType")===ot.SVG;u.setParent(d?R.appendOrSelect(h,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):h);const f=y(c,"growth");(f===at.PREFERRED||f===at.FIXED)&&u.render(e)})}),n.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(c){const u=y(c,"growth"),h=y(c,"renderType")===ot.SVG?R.getSVGElementSize(D(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):R.getHTMLElementSize(this);if(u===at.PREFERRED){const d=s?h.width:h.height,f=s?r:i;c.size=d/f*100}}),a.exit().remove(),this.children.filter(c=>y(c,"growth")===at.STRETCH).forEach(c=>{c.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});const l=n.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,c=>c.id);s?l.style("width",c=>`${c.size/100*r}px`).style("height","100%"):l.style("height",c=>`${c.size/100*i}px`).style("width","100%"),l.each(function(c){c.components.forEach(u=>{y(c,"growth")===at.STRETCH&&u.render(e)})})}setModel(e){super.setModel(e),this.children.forEach(n=>{n.components.forEach(r=>r.setModel(e))})}setServices(e){super.setServices(e),this.children.forEach(n=>{n.components.forEach(r=>r.setServices(e))})}destroy(){this.children.forEach(e=>{e.components.forEach(n=>n.destroy())})}};mp.instanceID=Math.floor(Math.random()*99999999999);let Ge=mp;class cr extends Et{constructor(){super(...arguments),this.type="spacer"}render(e=!1){this.getComponentContainer().style("width",`${this.configs.size||Tu.default.size}px`).style("height",`${this.configs.size||Tu.default.size}px`).attr("opacity",0)}}var lA={prefix:"bx",selectorTabbable:`
    a[href], area[href], input:not([disabled]):not([tabindex='-1']),
    button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),
    textarea:not([disabled]):not([tabindex='-1']),
    iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]
  `,selectorFocusable:`
    a[href], area[href], input:not([disabled]),
    button:not([disabled]),select:not([disabled]),
    textarea:not([disabled]),
    iframe, object, embed, *[tabindex], *[contenteditable=true]
  `},yo=lA;function cA(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}function uA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hA(t){return mA(t)||pA(t)||fA(t)||dA()}function dA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fA(t,e){if(t){if(typeof t=="string")return ea(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ea(t,e)}}function pA(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mA(t){if(Array.isArray(t))return ea(t)}function ea(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vp(t){return t.reduce(function(e,n){return Array.isArray(n)?e.push.apply(e,hA(vp(n))):e.push(n),e},[])}function gA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return vp(e).reduce(function(r,i){return i(r)},function(){function r(){uA(this,r)}return cA(r)}())}function na(t){"@babel/helpers - typeof";return na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(t)}function vA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yA(t,e,n){return e&&Zu(t.prototype,e),n&&Zu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _A(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ra(t,e)}function ra(t,e){return ra=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ra(t,e)}function bA(t){var e=xA();return function(){var n=ls(t),r;if(e){var i=ls(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wA(this,r)}}function wA(t,e){if(e&&(na(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yp(t)}function yp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ls(t){return ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ls(t)}function EA(t){var e=function(n){_A(i,n);var r=bA(i);function i(s){var o,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(vA(this,i),o=r.call(this,s,a),o.children=[],!s||s.nodeType!==Node.ELEMENT_NODE)throw new TypeError("DOM element should be given to initialize this widget.");return o.element=s,o.options=Object.assign(Object.create(o.constructor.options),a),o.constructor.components.set(o.element,yp(o)),o}return yA(i,[{key:"release",value:function(){for(var s=this.children.pop();s;s=this.children.pop())s.release();return this.constructor.components.delete(this.element),null}}],[{key:"create",value:function(s,o){return this.components.get(s)||new this(s,o)}}]),i}(t);return e}function ia(t){"@babel/helpers - typeof";return ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ia(t)}function TA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function OA(t,e,n){return e&&SA(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ri(){return typeof Reflect<"u"&&Reflect.get?Ri=Reflect.get:Ri=function(t,e,n){var r=MA(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Ri.apply(this,arguments)}function MA(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=ur(t),t!==null););return t}function AA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sa(t,e)}function sa(t,e){return sa=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},sa(t,e)}function CA(t){var e=kA();return function(){var n=ur(t),r;if(e){var i=ur(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return DA(this,r)}}function DA(t,e){if(e&&(ia(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LA(t)}function LA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ur(t){return ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ur(t)}function RA(t){var e=function(n){AA(i,n);var r=CA(i);function i(){var s;TA(this,i);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=r.call.apply(r,[this].concat(a)),s.handles=new Set,s}return OA(i,[{key:"manage",value:function(s){return this.handles.add(s),s}},{key:"unmanage",value:function(s){return this.handles.delete(s),s}},{key:"release",value:function(){var s=this;return this.handles.forEach(function(o){o.release(),s.handles.delete(o)}),Ri(ur(i.prototype),"release",this).call(this)}}]),i}(t);return e}function Lr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.addEventListener.apply(t,n),{release:function(){return t.removeEventListener.apply(t,n),null}}}function oa(t){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa(t)}function $A(t){return BA(t)||NA(t)||PA(t)||IA()}function IA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PA(t,e){if(t){if(typeof t=="string")return aa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aa(t,e)}}function NA(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BA(t){if(Array.isArray(t))return aa(t)}function aa(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function FA(t,e,n){return e&&HA(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&la(t,e)}function la(t,e){return la=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},la(t,e)}function zA(t){var e=WA();return function(){var n=cs(t),r;if(e){var i=cs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return GA(this,r)}}function GA(t,e){if(e&&(oa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jA(t)}function jA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cs(t){return cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cs(t)}function YA(t){var e=function(n){VA(i,n);var r=zA(i);function i(){return UA(this,i),r.apply(this,arguments)}return FA(i,[{key:"_changeState",value:function(){throw new Error("_changeState() should be overridden to perform actual change in state.")}},{key:"changeState",value:function(){for(var s=this,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=typeof a[0]=="string"?a.shift():void 0,u=Object(a[0])===a[0]&&typeof a[0]!="function"?a.shift():void 0,h=typeof a[0]=="function"?a.shift():void 0;if(typeof this.shouldStateBeChanged=="function"&&!this.shouldStateBeChanged(c,u)){h&&h(null,!0);return}var d={group:u&&u.group,state:c},f=[d.group,c].filter(Boolean).join("-").split("-").map(function(_){return _[0].toUpperCase()+_.substr(1)}).join(""),p=new CustomEvent(this.options["eventBefore".concat(f)],{bubbles:!0,cancelable:!0,detail:u}),m=u&&u.delegatorNode||this.element,g=!m.dispatchEvent(p);if(g){if(h){var v=new Error("Changing state (".concat(JSON.stringify(d),") has been canceled."));v.canceled=!0,h(v)}}else{var b=[c,u].filter(Boolean);this._changeState.apply(this,$A(b).concat([function(){m.dispatchEvent(new CustomEvent(s.options["eventAfter".concat(f)],{bubbles:!0,cancelable:!0,detail:u})),h&&h()}]))}}}]),i}(t);return e}function ca(t,e){var n=t.target,r=t.currentTarget;if(typeof n.matches=="function"){if(n.matches(e))return n;if(n.matches("".concat(e," *"))){var i=n.closest(e);if((r.nodeType===Node.DOCUMENT_NODE?r.documentElement:r).contains(i))return i}}}function Ku(t){if(!t||typeof t=="function")return{launchingElement:null,launchingEvent:null};var e=t.delegateTarget||t.currentTarget||t,n=t.currentTarget&&t;if(e&&!e.nodeType)throw new TypeError("DOM Node should be given for launching element.");if(n&&!n.type)throw new TypeError("DOM event should be given for launching event.");return{launchingElement:e,launchingEvent:n}}function ua(t){"@babel/helpers - typeof";return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(t)}function XA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ZA(t,e,n){return e&&qA(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function KA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ha(t,e)}function ha(t,e){return ha=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ha(t,e)}function QA(t){var e=eC();return function(){var n=us(t),r;if(e){var i=us(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return JA(this,r)}}function JA(t,e){if(e&&(ua(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tC(t)}function tC(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function us(t){return us=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},us(t)}function nC(t){var e=function(n){KA(i,n);var r=QA(i);function i(){return XA(this,i),r.apply(this,arguments)}return ZA(i,[{key:"show",value:function(s,o){(!s||typeof s=="function")&&(o=s),this.changeState("shown",Ku(s),o)}},{key:"hide",value:function(s,o){(!s||typeof s=="function")&&(o=s),this.changeState("hidden",Ku(s),o)}}]),i}(t);return e}var rC=[YA,nC];const iC=rC;function da(t){"@babel/helpers - typeof";return da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},da(t)}function sC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aC(t,e,n){return n&&oC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lC(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fa(t,e)}function fa(t,e){return fa=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},fa(t,e)}function cC(t){var e=dC();return function(){var n=hs(t),r;if(e){var i=hs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uC(this,r)}}function uC(t,e){if(e&&(da(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hC(t)}function hC(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hs(t){return hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hs(t)}function fC(t){var e=function(n){lC(i,n);var r=cC(i);function i(){return sC(this,i),r.apply(this,arguments)}return aC(i,null,[{key:"init",value:function(){var s=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=Object.assign(Object.create(this.options),a);if(!o||o.nodeType!==Node.ELEMENT_NODE&&o.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to search for and initialize this widget.");if(o.nodeType===Node.ELEMENT_NODE&&o.matches(l.selectorInit))this.create(o,a);else{var c=l.initEventNames.map(function(u){return Lr(o,u,function(h){var d=ca(h,"[".concat(l.attribInitTarget,"]"));if(d){h.delegateTarget=d;var f=d.ownerDocument.querySelectorAll(d.getAttribute(l.attribInitTarget));if(f.length>1)throw new Error("Target widget must be unique.");if(f.length===1){d.tagName==="A"&&h.preventDefault();var p=s.create(f[0],a);typeof p.createdByLauncher=="function"&&p.createdByLauncher(h)}}})});return{release:function(){for(var u=c.pop();u;u=c.pop())u.release()}}}return""}}]),i.forLazyInit=!0,i}(t);return e}function pa(t){"@babel/helpers - typeof";return pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pa(t)}function pC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mC(t,e,n){return e&&Qu(t.prototype,e),n&&Qu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gC(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ma(t,e)}function ma(t,e){return ma=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ma(t,e)}function vC(t){var e=bC();return function(){var n=ds(t),r;if(e){var i=ds(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yC(this,r)}}function yC(t,e){if(e&&(pa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _C(t)}function _C(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ds(t){return ds=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ds(t)}var wC=function(t){gC(n,t);var e=vC(n);function n(r,i){var s;return pC(this,n),s=e.call(this,r,i),s._handleFocusinListener=void 0,s._handleKeydownListener=void 0,s._handleFocusin=function(o){var a=s.element.querySelector(s.options.selectorModalContainer)||s.element;s.element.classList.contains(s.options.classVisible)&&!a.contains(o.target)&&s.options.selectorsFloatingMenus.every(function(l){return!ca(o,l)})&&s.element.querySelector(yo.selectorTabbable).focus()},s._hookCloseActions(),s}return mC(n,[{key:"createdByLauncher",value:function(r){this.show(r)}},{key:"shouldStateBeChanged",value:function(r){return r==="shown"?!this.element.classList.contains(this.options.classVisible):this.element.classList.contains(this.options.classVisible)}},{key:"_changeState",value:function(r,i,s){var o=this,a,l=function(){if(a&&(a=o.unmanage(a).release()),r==="shown"&&o.element.offsetWidth>0&&o.element.offsetHeight>0){o.previouslyFocusedNode=o.element.ownerDocument.activeElement;var h=o.element.querySelector(o.options.selectorPrimaryFocus)||o.element.querySelector(yo.selectorTabbable);h.focus()}s()};if(this._handleFocusinListener&&(this._handleFocusinListener=this.unmanage(this._handleFocusinListener).release()),r==="shown"){var c="onfocusin"in this.element.ownerDocument.defaultView,u=c?"focusin":"focus";this._handleFocusinListener=this.manage(Lr(this.element.ownerDocument,u,this._handleFocusin,!c))}r==="hidden"?(this.element.classList.toggle(this.options.classVisible,!1),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!1),(this.options.selectorFocusOnClose||this.previouslyFocusedNode)&&(this.element.ownerDocument.querySelector(this.options.selectorFocusOnClose)||this.previouslyFocusedNode).focus()):r==="shown"&&(this.element.classList.toggle(this.options.classVisible,!0),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!0)),a=this.manage(Lr(this.element,"transitionend",l))}},{key:"_hookCloseActions",value:function(){var r=this;this.manage(Lr(this.element,"click",function(i){var s=ca(i,r.options.selectorModalClose);s&&(i.delegateTarget=s),(s||i.target===r.element)&&r.hide(i)})),this._handleKeydownListener&&(this._handleKeydownListener=this.unmanage(this._handleKeydownListener).release()),this._handleKeydownListener=this.manage(Lr(this.element.ownerDocument.body,"keydown",function(i){i.which===27&&r.shouldStateBeChanged("hidden")&&(i.stopPropagation(),r.hide(i))}))}}],[{key:"options",get:function(){var r=yo.prefix;return{selectorInit:"[data-modal]",selectorModalClose:"[data-modal-close]",selectorPrimaryFocus:"[data-modal-primary-focus]",selectorsFloatingMenus:[".".concat(r,"--overflow-menu-options"),".".concat(r,"--tooltip"),".flatpickr-calendar"],selectorModalContainer:".".concat(r,"--modal-container"),classVisible:"is-visible",classBody:"".concat(r,"--body--with-modal-open"),attribInitTarget:"data-modal-target",initEventNames:["click"],eventBeforeShown:"modal-beingshown",eventAfterShown:"modal-shown",eventBeforeHidden:"modal-beinghidden",eventAfterHidden:"modal-hidden"}}}]),n.components=new WeakMap,n}(gA(EA,fC,iC,RA));class vl extends Et{constructor(e,n,r){super(e,n,r),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{const i=this.services.domUtils.getChartID();this.modal.attr("data-modal",!0).attr("class","cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby",`${i}__modal-title`).attr("aria-describedby",`${i}__modal-description`).attr("tabindex",-1),this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),wC.create(this.modal.node()).show(),document.addEventListener("modal-hidden",this.handleHideModal)},this.handleHideModal=()=>{this.modal.attr("role",null).attr("aria-modal",null).attr("aria-labelledby",null).attr("aria-describedby",null).attr("tabindex",null),document.removeEventListener("modal-hidden",this.handleHideModal)},this.init()}addEventListeners(){this.services.events.addEventListener(S.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(S.Modal.SHOW,this.handleShowModal)}getModalHTML(){const e=this.services.domUtils.getChartID(),n=this.model.getOptions(),{title:r,downloadAsCSV:i}=y(n,"locale","translations","tabularRep"),s=y(n,"style","prefix"),o=this.model.getTabularDataArray();return`
		<div class="cds--modal-container">
			<div class="cds--modal-header">

				<p class="cds--modal-header__label cds--type-delta" id="modal-title">${r}</p>

				<p class="cds--modal-header__heading cds--type-beta" id="${e}__modal-description">${Le(n.title)}</p>

				<button class="cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							${rn(o,0).map(a=>`<th scope="col">
								<div class="cds--table-header-label">${Le(a)}</div>
							</th>`).join("")}
						</tr>
					</thead>

					<tbody>${o.slice(1).map(a=>`
							<tr>
								${a.map(l=>`<td>${Le(l)}</td>`).join("")}
							</tr>`).join("")}
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer">
			  <div class="${Jt}--${s}-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary" type="button" data-modal-primary-focus>${i}</button>
			</div>
		</div>`}render(e=!1){const n=this.model.getOptions();if(!this.isEventListenerAdded){const r=D(this.services.domUtils.getHolder()),i=y(n,"style","prefix");this.modal=R.appendOrSelect(r,`div.${Jt}--${i}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class yl extends Et{constructor(){super(...arguments),this.type="title",this.renderType=ot.HTML}render(e=!1){const n=this.getComponentContainer(),r=y(this.getOptions(),"title"),i=n.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(s=>Le(s)),i.node()&&i.node().offsetWidth<i.node().scrollWidth){const s=this;i.on("mouseover",function(o){s.services.events.dispatchEvent(S.Tooltip.SHOW,{event:o,hoveredElement:i,content:i.text()})}).on("mousemove",function(o){s.services.events.dispatchEvent(S.Tooltip.MOVE,{event:o})}).on("mouseout",function(){s.services.events.dispatchEvent(S.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(e,n){if(n<=0)return;const r=e.text();if(e.node().getComputedTextLength()>n){e.append("tspan").text("...");const i=R.appendOrSelect(e,"tspan").node().getComputedTextLength(),s=e.text(),o=this.getSubstringIndex(e.node(),0,s.length-1,n-i);e.html(s.substring(0,o-1)).append("tspan").text("...");const a=this;e.on("mouseover",function(l){a.services.events.dispatchEvent(S.Tooltip.SHOW,{event:l,hoveredElement:e,content:r})}).on("mousemove",function(l){a.services.events.dispatchEvent(S.Tooltip.MOVE,{event:l})}).on("mouseout",function(){a.services.events.dispatchEvent(S.Tooltip.HIDE)})}}getMaxTitleWidth(){return R.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(e,n,r,i){const s=Math.floor((r+n)/2);return e.getSubStringLength(0,s)>i?this.getSubstringIndex(e,n,s,i):e.getSubStringLength(0,s)<i?e.getSubStringLength(0,s+1)>i?s:this.getSubstringIndex(e,s,r,i):s}}class _l extends Et{constructor(){super(...arguments),this.type="legend",this.renderType=ot.HTML}render(e=!1){const n=this.getOptions(),r=y(n,"legend"),i=y(r,"alignment"),s=y(n,"legend","orientation");let o=this.model.getDataGroups();const{DISABLED:a}=Tt.items.status,l=o.some(b=>b.status===a),c=y(r,"order"),u=this.getComponentContainer().classed("center-aligned",i===ae.CENTER).classed("right-aligned",i===ae.RIGHT).classed(s,!0).classed("has-deactivated-items",l).attr("role",xt.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(o=this.sortDataGroups(o,c));const h=u.selectAll("div.legend-item").data(o,b=>b.name),d=h.enter().append("div").attr("class","legend-item");d.merge(u.selectAll("div.legend-item")).classed("active",function(b){return b.status===Tt.items.status.ACTIVE});const f=y(this.getOptions(),"legend","clickable");u.classed("clickable",f&&o.length>1);const p=Tt.checkbox.radius,m=d.append("div").classed("checkbox",!0),g=m.merge(h.select("div.checkbox")).attr("role",xt.CHECKBOX).attr("tabindex",f?0:-1).attr("aria-labelledby",(b,_)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${_}-title`)).attr("aria-checked",({status:b})=>b===Tt.items.status.ACTIVE).attr("width",p*2).attr("height",p*2).attr("class",b=>this.model.getColorClassName({classNameTypes:[Ut.BACKGROUND],dataGroupName:b.name,originalClassName:"checkbox"})).style("background",b=>b.status===Tt.items.status.ACTIVE?this.model.getFillColor(b.name)||this.model.getStrokeColor(b.name):null).classed("active",function(b){return b.status===Tt.items.status.ACTIVE});m.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),d.append("p").merge(h.select("p"));const v=y(n,"legend","additionalItems");if(v&&o.length){const b=this,_=u.selectAll("div.additional-item").data(v);_.exit().remove();const T=_.enter().append("div").merge(_).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",(O,A)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${g.size()+A}-title`));T.selectAll("*").remove();let x,E=1;T.append("svg").classed("icon",!0).each(function(O){const A=D(this);!x||x!=O.type?(x=O.type,E=1):E++,b.addAdditionalItem(A,O,E)}),T.append("p").merge(T.select("p")),this.truncateLegendText()}h.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),f&&d.size()>1&&this.addEventListeners()}sortDataGroups(e,n){if(e.sort((r,i)=>n.indexOf(r.name)-n.indexOf(i.name)),n.length<e.length){const r=e.length-n.length;return e.slice(r).concat(e.slice(0,r))}return e}addAdditionalItem(e,n,r){const{width:i,height:s}=Tt.area;if(n.type===Bt.RADIUS?e.style("width",`${s}px`).style("height",`${s}px`):e.style("width",`${i}px`).style("height",`${s}px`),n.type===Bt.RADIUS){const{iconData:o,fill:a,stroke:l}=Tt.radius;e.attr("fill","none").selectAll("circle").data(o).enter().append("circle").classed("radius",!0).attr("role",xt.IMG).attr("aria-label","radius").attr("cx",c=>c.cx).attr("cy",c=>c.cy).attr("r",c=>c.r).style("fill",n.fill?n.fill:a).style("stroke",n.stroke?n.stroke:l)}else if(n.type===Bt.LINE){const o=Tt.line;e.select("line.line").empty()&&e.append("line").classed(`line-${r}`,!0).attr("role",xt.IMG).attr("aria-label","line").attr("x1",0).attr("y1",o.yPosition).attr("x2",i).attr("y2",o.yPosition).style("stroke",n.stroke?n.stroke:o.stroke).style("stroke-width",o.strokeWidth)}else if(n.type===Bt.AREA)e.select("rect.area").empty()&&e.append("rect").classed(`area-${r}`,!0).attr("role",xt.IMG).attr("aria-label","area").attr("width",i).attr("height",s).style("fill",r>3&&!n.fill?Tt.area.fill:n.fill).style("stroke",n.stroke);else if(n.type===Bt.SIZE){const{iconData:o,fill:a,stroke:l}=Tt.size;e.attr("fill","none").attr("role",xt.IMG).attr("aria-label","size").selectAll("rect").data(o).enter().append("rect").classed("size",!0).attr("width",c=>c.width).attr("height",c=>c.height).attr("y",()=>0).style("fill",n.fill?n.fill:a).style("stroke",n.stroke?n.stroke:l).style("stroke-width",1)}else if(n.type===Bt.QUARTILE){const{iconData:o}=Tt.quartile;e.selectAll("rect").attr("role",xt.IMG).attr("aria-label","quartile").data(o).enter().append("rect").attr("class",(a,l)=>`quartile-${l===0?"wrapper":"line"}`).attr("x",a=>a.x).attr("y",a=>a.y).attr("width",a=>a.width).attr("height",a=>a.height)}else if(n.type===Bt.ZOOM){const{iconData:o,color:a}=y(Tt,"zoom"),l=e.attr("role",xt.IMG).attr("aria-label","zoom").selectAll("g.icon").data(o).enter();l.append("g").attr("x",c=>c.x).attr("y",c=>c.y).attr("width",c=>c.width).attr("height",c=>c.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>n.color?n.color:a),l.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>n.color?n.color:a)}}truncateLegendText(){const e=this.getComponentContainer(),n=y(this.getOptions(),"legend","truncation"),r=y(n,"type"),i=y(n,"threshold"),s=y(n,"numCharacter"),o=e.selectAll("div.legend-item p");o.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),r!==ve.NONE?o.html(function(a){const l=Le(a.name);return l.length>i&&l.length!==s?Zr(l,r,s):l}):o.html(a=>Le(a.name))}addEventListeners(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=y(r,"legend"),s=y(i,"truncation");n.selectAll("div.legend-item").on("mouseover",function(o){e.services.events.dispatchEvent(S.Legend.ITEM_HOVER,{hoveredElement:D(this)});const a=D(this);a.select("div.checkbox").classed("hovered",!0);const l=a.datum();l.name.length>s.threshold&&s.numCharacter<l.name.length&&s.type!==ve.NONE&&e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:o,hoveredElement:a,content:l.name})}).on("mousemove",function(o){D(this).datum().name.length>s.threshold&&s.type!==ve.NONE&&e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:o})}).on("click",function(){e.services.events.dispatchEvent(S.Legend.ITEM_CLICK,{clickedElement:D(this)});const o=D(this).datum();e.model.toggleDataLabel(o.name)}).on("mouseout",function(){const o=D(this);o.select("div.checkbox").classed("hovered",!1),o.datum().name.length>s.threshold&&s.type!==ve.NONE&&e.services.events.dispatchEvent(S.Tooltip.HIDE),e.services.events.dispatchEvent(S.Legend.ITEM_MOUSEOUT,{hoveredElement:o})}),n.selectAll("div.legend-item div.checkbox").on("keyup",function(o){o.key&&o.key==="Tab"&&e.services.events.dispatchEvent(S.Legend.ITEM_HOVER,{hoveredElement:D(this)})}),n.selectAll("div.legend-item div.checkbox").on("keydown",function(o,a){o.key&&o.key===" "?(o.preventDefault(),e.model.toggleDataLabel(a.name)):o.key&&o.key==="Tab"&&e.services.events.dispatchEvent(S.Legend.ITEM_MOUSEOUT,{hoveredElement:D(this)})}),n.selectAll("g.additional-item").on("mouseover",function(o){const a=D(this),l=a.datum();l.name.length>s.threshold&&e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:o,hoveredElement:a,content:l.name})})}}class _p extends Et{constructor(e,n,r){super(e,n,r),this.type="chart-clip",this.renderType=ot.SVG,this.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(e=!0){this.createClipPath()}createClipPath(){const e=this.parent,{cartesianScales:n}=this.services;if(!n)throw new Error("Service cartesianScales was undefined");const r=n.getMainXScale(),i=n.getMainYScale(),[s,o]=r.range(),[a,l]=i.range();if(!e)throw new Error("svg is undefined");this.chartClipPath=R.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const c=R.appendOrSelect(this.chartClipPath,`rect.${this.type}`);o-s>0&&c.attr("x",s).attr("y",l).attr("width",o-s).attr("height",a-l),this.chartClipPath.merge(c).lower()}}class xC extends _p{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999)}createClipPath(){const e=this.parent,{width:n,height:r}=R.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=R.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const i=R.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",n).attr("height",r),this.chartClipPath.merge(i).lower()}}var Vn,Ct;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(Ct||(Ct={}));var Ju=(Vn={},Vn[Ct.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},Vn[Ct.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},Vn[Ct.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},Vn[Ct.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},Vn),th=typeof window<"u"?window:{innerHeight:0,scrollY:0,innerWidth:0,scrollX:0},$s=function(){function t(e){e===void 0&&(e={}),this.positions=Ju,this.positions=Object.assign({},Ju,e)}return t.prototype.getRelativeOffset=function(e){for(var n={left:e.offsetLeft,top:e.offsetTop};e.offsetParent&&getComputedStyle(e.offsetParent).position==="static";)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},t.prototype.getAbsoluteOffset=function(e){for(var n=e,r={top:0,left:0};n.offsetParent;){var i=getComputedStyle(n.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),n=n.offsetParent}var s=e.getBoundingClientRect(),o=document.body.getBoundingClientRect();return{top:s.top-o.top+r.top,left:s.left-o.left+r.left}},t.prototype.findRelative=function(e,n,r){var i=this.getRelativeOffset(e),s=e.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},t.prototype.findAbsolute=function(e,n,r){var i=this.getAbsoluteOffset(e),s=e.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},t.prototype.findPosition=function(e,n,r,i){i===void 0&&(i=this.getAbsoluteOffset.bind(this));var s=i(e),o=e.getBoundingClientRect();return this.calculatePosition(s,o,n,r)},t.prototype.findPositionAt=function(e,n,r){return this.calculatePosition(e,{top:0,left:0,height:0,width:0},n,r)},t.prototype.getPlacementBox=function(e,n){var r=e.offsetHeight+n.top,i=e.offsetWidth+n.left;return{top:n.top,bottom:r,left:n.left,right:i}},t.prototype.addOffset=function(e,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),Object.assign({},e,{top:e.top+n,left:e.left+r})},t.prototype.setElement=function(e,n){e.style.top=n.top+"px",e.style.left=n.left+"px"},t.prototype.findBestPlacement=function(e,n,r,i,s){var o=this;i===void 0&&(i=this.defaultContainerFunction.bind(this)),s===void 0&&(s=this.findPosition.bind(this));var a=r.map(function(l){var c=s(e,n,l),u=o.getPlacementBox(n,c),h=0,d=0,f=i();u.top<f.top?h=f.top-u.top:u.bottom>f.height&&(h=u.bottom-f.height),u.left<f.left?d=f.left-u.left:u.right>f.width&&(d=u.right-f.width),h&&!d?d=1:d&&!h&&(h=1);var p=n.offsetHeight*n.offsetWidth,m=h*d,g=p-m,v=g/p;return{placement:l,weight:v}});return a.sort(function(l,c){return c.weight-l.weight}),a[0].placement},t.prototype.findBestPlacementAt=function(e,n,r,i){var s=this;i===void 0&&(i=this.defaultContainerFunction.bind(this));var o=function(a,l,c){return s.findPositionAt(e,l,c)};return this.findBestPlacement(null,n,r,i,o)},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:th.innerHeight,width:th.innerWidth}},t.prototype.calculatePosition=function(e,n,r,i){return this.positions[i]?this.positions[i](e,r,n):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new $s;class bp extends Et{constructor(e,n,r){super(e,n,r),this.type="tooltip",this.renderType=ot.HTML,this.isEventListenerAdded=!1,this.lastTriggeredEventType="",this.positionService=new $s,this.handleShowTooltip=i=>{const s=i.detail.data||i.detail.items;let o;const a=this.formatItems(this.getItems(i));i.detail.content?o=`<div class="title-tooltip"><p>${yi(i.detail.content)}</p></div>`:o=yi(this.getTooltipHTML(a));const l=R.appendOrSelect(this.tooltip,"div.content-box");if(y(this.getOptions(),"tooltip","customHTML"))if(i.detail.content){const c=`<div class="title-tooltip"><p>${yi(i.detail.content)}</p></div>`;l.html(c)}else l.html(`<div class="title-tooltip"><p>${yi(this.model.getOptions().tooltip.customHTML(s,o))}</p></div>`);else l.html(o);l.selectAll(".datapoint-tooltip").each(function(c,u){const h=a[u];a[u]&&a[u].color&&D(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",h.color)}),this.positionTooltip(i),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1),this.lastTriggeredEventType=i.type},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(S.Tooltip.MOVE,e=>{this.lastTriggeredEventType!==S.Toolbar.SHOW_TOOLTIP&&this.tooltip.classed("hidden")===!1&&this.positionTooltip(e)}),this.services.events.addEventListener(S.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(S.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(S.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.addEventListener(S.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.addEventListener(S.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(S.Tooltip.MOVE,null),this.services.events.removeEventListener(S.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(S.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(S.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.removeEventListener(S.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.removeEventListener(S.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}getItems(e){return e.detail.items?e.detail.items:[]}formatItems(e){const n=this.getOptions(),r=y(n,"tooltip","truncation","type"),i=y(n,"tooltip","truncation","threshold"),s=y(n,"tooltip","truncation","numCharacter");return r!==ve.NONE?e.map(o=>{const a=o.labelIcon?12:0;return o.value=o.value?this.valueFormatter(o.value,o.label):o.value,o.label&&o.label.length+a>i&&(o.label=Zr(o.label,r,s)),o.value&&o.value.length>i&&(o.value=Zr(o.value,r,s)),o}):e.map(o=>(o.value=o.value?this.valueFormatter(o.value,o.label):o.value,o))}getTooltipHTML(e){return'<ul class="multi-tooltip">'+e.map(n=>`<li>
					<div class="datapoint-tooltip${n.bold?" bold":""}">
						${n.class||n.color?`<div class="tooltip-color ${n.class}"></div>`:""}
						<div class="label">
						<p>${n.label||""}</p>
						${n.labelIcon?`<span class="label-icon"/>${n.labelIcon}</span>`:""}
						</div>
						${n.value===void 0||n.value===null?"":`<p class="value"/>${n.value}</p>`}
					</div>
				</li>`).join("")+"</ul>"}valueFormatter(e,n){const r=this.getOptions(),i=y(r,"tooltip","valueFormatter"),{code:s,number:o,date:a}=y(r,"locale");if(i)return i(e,n);if(typeof e.getTime=="function")return a(e,s,{month:"short",day:"numeric",year:"numeric"});try{if(typeof e=="string"&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e)){const l=new Date(e);return a(l,s,{month:"short",day:"numeric",year:"numeric"})}}catch{}return o(e,s)}render(e=!1){const n=this.getOptions(),r=y(n,"tooltip","enabled");if(r){const i=D(this.services.domUtils.getHolder()),s=y(n,"style","prefix");this.tooltip=R.appendOrSelect(i,`div.${Jt}--${s}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}addOffsetByPlacement(e,n,r){const i=Object.assign({},e);return n==Ct.LEFT?i.left-=r:n==Ct.RIGHT?i.left+=r:n==Ct.TOP?i.top-=r:n==Ct.BOTTOM&&(i.top+=r),i}positionTooltip(e){const n=this.services.domUtils.getHolder(),r=n.offsetWidth,i=n.offsetHeight,s=this.tooltip.node(),o=this.getOptions(),a=y(o,"zoomBar","top","enabled"),l=!!y(e,"detail","noWrap"),c=Array.isArray(y(e,"detail","placements")),u=c?y(e,"detail","placements"):[Ct.RIGHT,Ct.LEFT,Ct.TOP,Ct.BOTTOM];let h,{horizontalOffset:d,defaultOffset:f}=lS;if(this.tooltip.select("div.title-tooltip").classed("title-tooltip-nowrap",l),c){const g=y(e,"detail","event","target"),v=this.services.domUtils.getElementOffset(g,!0);h=this.positionService.findBestPlacementAt(v,s,u,()=>({top:0,left:0,width:r,height:i}));let b=this.positionService.findPosition(g,s,h,()=>this.services.domUtils.getElementOffset(g));b=this.addOffsetByPlacement(b,h,f),this.positionService.setElement(s,b);return}let p=y(e,"detail","mousePosition");if(!p)p=wn(y(e,"detail","event"),n);else{const g=y(o,"zoomBar","top","type"),v=re.height[g];a&&(p[1]+=v+re.spacerHeight)}p[0]/r>.9?h=Ct.LEFT:p[0]/r<.1?h=Ct.RIGHT:h=this.positionService.findBestPlacementAt({left:p[0],top:p[1]},s,u,()=>({top:void 0,left:void 0,width:r,height:i})),h===Ct.LEFT&&(d*=-1);const m=this.positionService.findPositionAt({left:p[0]+d,top:p[1]},s,h);this.positionService.setElement(s,m)}}const wp=class $i extends Et{constructor(){super(...arguments),this.type="grid-brush",this.renderType=ot.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){const n=this.parent,r=this.getComponentContainer();if(!n)throw new Error("SVG was not defined");const i=R.appendOrSelect(n,"svg.chart-grid-backdrop"),s=R.appendOrSelect(i,`g.${this.type}`),o=R.appendOrSelect(s,this.selectionSelector),{width:a,height:l}=R.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),h=c.getMainXScale(),[d]=h.range();r.attr("transform",`translate(${d},0)`);const f=R.appendOrSelect(r,this.frontSelectionSelector);if(h&&u===z.TIME){let p=this.model.get("zoomDomain");p===void 0&&(p=this.services.zoom.getDefaultZoomBarDomain(),p&&this.model.set({zoomDomain:p},{animate:!1}));const m=x=>{const E=x[1]-x[0];let O="0,"+E.toString();const A=Math.floor(l/$i.DASH_LENGTH),M=A*$i.DASH_LENGTH;for(let L=0;L<A;L++)O+=","+$i.DASH_LENGTH;O+=","+(l-M),A%2===1&&(O+=",0"),O+=","+E.toString(),O+=","+l.toString(),f.attr("stroke-dasharray",O)},g=x=>{const E=x.selection;E===null||E[0]===E[1]||(f.attr("x",parseFloat(o.attr("x"))+parseFloat(i.attr("x"))).attr("y",o.attr("y")).attr("width",o.attr("width")).attr("height",o.attr("height")).style("cursor","pointer").style("display",null),m(E))},v=(x,E)=>{const O=Bd().range([0,a]).domain(p);let A=[O.invert(x),O.invert(E)];A[0].valueOf()===A[1].valueOf()&&(A=this.services.zoom.getDefaultZoomBarDomain()),(p[0].valueOf()!==A[0].valueOf()||p[1].valueOf()!==A[1].valueOf())&&this.services.zoom.handleDomainChange(A)};let b;const _=x=>{const E=x.selection;E!==null&&(v(E[0],E[1]),s.call(b.move,null),f.style("display","none"))};l!=0&&a!=0&&(b=xd().extent([[0,0],[a-1,l]]).on("start brush end",g).on("end.brushed",_),s.call(b));const T=this.services.zoom.getZoomRatio();i.on("click",function(x){if(x.shiftKey){const E=this.services.domUtils.getHolder(),O=wn(s.node(),E)[0];let A=O-a*T/2;A<0&&(A=0);let M=O+a*T/2;M>a&&(M=a),v(A,M)}})}}};wp.DASH_LENGTH=4;let EC=wp;class TC extends Et{constructor(){super(...arguments),this.type="zoom-bar",this.renderType=ot.SVG,this.MIN_SELECTION_DIFF=9e-10,this.brushSelector="g.zoom-bar-brush",this.clipId="zoomBarClip-"+Math.floor(Math.random()*99999999999),this.brush=xd(),this.highlightStrokeWidth=1}init(){this.services.events.addEventListener(S.ZoomBar.UPDATE,this.render.bind(this));const e=y(this.getOptions(),"zoomBar",C.TOP,"data");this.model.setZoomBarData(e)}render(e=!0){const n=this.getComponentContainer(),r=this.services.zoom.isZoomBarLoading(C.TOP),i=this.services.zoom.isZoomBarLocked(C.TOP),s=y(this.getOptions(),"zoomBar",C.TOP,"type"),o=y(this.getOptions(),"axes",C.BOTTOM,"highlights"),a=re.height[s],{width:l}=R.getSVGElementSize(this.parent,{useAttrs:!0});if(l===0)return;let c=0;const u=this.model.get("axesMargins");u&&u.left&&(c=u.left);const h=R.appendOrSelect(n,"svg.zoom-container").attr("width","100%").attr("height",a).attr("opacity",1);if(R.appendOrSelect(n,"rect.zoom-spacer").attr("x",0).attr("y",a).attr("width","100%").attr("height",re.spacerHeight).attr("opacity",1).attr("fill","none"),s===Te.GRAPH_VIEW?R.appendOrSelect(h,"rect.zoom-bg").attr("x",c).attr("y",0).attr("width",l-c).attr("height","100%").classed("zoom-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null):s===Te.SLIDER_VIEW&&R.appendOrSelect(h,"rect.zoom-slider-bg").attr("x",c).attr("y",a/2-1).attr("width",l-c).attr("height",2).classed("zoom-slider-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null),r){this.renderSkeleton(h,c,l);return}const{cartesianScales:d}=this.services,f=d.getMainXScale(),p=d.getMainYScale(),m=d.getMainXScaleType();if(f&&m===z.TIME){let g=this.services.zoom.getZoomBarData();if(nn(g)||g.length===1)return;this.xScale=f.copy(),this.yScale=p.copy();const v=this.services.zoom.getDefaultZoomBarDomain(g);g=this.compensateDataForDefaultDomain(g,v);const b=this.model.get("initialZoomDomain"),_=y(this.getOptions(),"zoomBar",C.TOP,"initialZoomDomain");_&&_[0]&&_[1]&&(_[0]=new Date(_[0]),_[1]=new Date(_[1])),_&&!(b&&b[0].valueOf()===_[0].valueOf()&&b[1].valueOf()===_[1].valueOf())?this.model.set({initialZoomDomain:et([],_),zoomDomain:_?et([],_):v},{skipUpdate:!0}):_===null&&b!==null&&this.model.set({initialZoomDomain:null,zoomDomain:et([],v)},{skipUpdate:!0}),this.xScale.range([c,l]).domain(v),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,a-6]).domain(on(g,E=>E.value));const T=this.model.get("zoomDomain");if(s===Te.GRAPH_VIEW&&(this.renderZoomBarArea(h,"path.zoom-graph-area-unselected",g,null),this.updateClipPath(n,this.clipId,0,0,0,0),this.renderZoomBarArea(h,"path.zoom-graph-area",g,this.clipId),this.renderZoomBarBaseline(h,c,l),o)){const E=o.highlightStartMapsTo,O=o.highlightEndMapsTo,A=o.color,M=o.labelMapsTo;o.data.forEach((L,I)=>{R.appendOrSelect(h,`rect.highlight-${I}`).attr("height",a-2*this.highlightStrokeWidth).attr("y",this.highlightStrokeWidth).attr("x",this.xScale(L[E])).attr("width",this.xScale(L[O])-this.xScale(L[E])).style("fill",A&&A.scale[L[M]]?A.scale[L[M]]:null).style("fill-opacity",.1).style("stroke",A&&A.scale[L[M]]?A.scale[L[M]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")})}this.addBrushEventListener(T,c,l);const x=R.appendOrSelect(n,this.brushSelector).call(this.brush);if(T!==void 0)if(T[0].valueOf()===T[1].valueOf())x.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range());else{const E=T.map(O=>this.xScale(O));E[1]-E[0]<this.MIN_SELECTION_DIFF||(x.call(this.brush.move,E),this.updateBrushHandle(this.getComponentContainer(),E))}i&&(this.brush.filter(()=>!1),x.selectAll("rect").attr("cursor","auto"))}}addBrushEventListener(e,n,r){const i=a=>{const l=a.selection;l===null?this.handleBrushedEvent(a,e,this.xScale,this.xScale.range()):l[0]===l[1]||this.handleBrushedEvent(a,e,this.xScale,l)},s=y(this.getOptions(),"zoomBar",C.TOP,"type"),o=re.height[s];this.brush.extent([[n,0],[r,o]]).on("start brush end",null).on("start brush end",i)}handleBrushedEvent(e,n,r,i){const s=[r.invert(i[0]),r.invert(i[1])];if(this.updateBrushHandle(this.getComponentContainer(),i),e.sourceEvent!=null&&(e.sourceEvent.type==="mousemove"||e.sourceEvent.type==="mouseup"||e.sourceEvent.type==="mousedown"||e.sourceEvent.type==="touchstart"||e.sourceEvent.type==="touchmove"||e.sourceEvent.type==="touchend")){(n===void 0||n[0]!==s[0]||n[1]!==s[1])&&this.services.zoom.handleDomainChange(s,{dispatchEvent:!1});let o;e.type==="start"?o=S.ZoomBar.SELECTION_START:e.type==="brush"?o=S.ZoomBar.SELECTION_IN_PROGRESS:e.type==="end"&&(o=S.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(S.ZoomDomain.CHANGE,{newDomain:s})),this.services.events.dispatchEvent(o,{selection:i,newDomain:s})}}updateBrushHandle(e,n){const r=this,i=re.handleWidth,s=y(this.getOptions(),"zoomBar",C.TOP,"type"),o=re.height[s],a=-i/2,l=re.handleBarWidth,c=s===Te.GRAPH_VIEW?re.handleBarHeight:6,u=-l/2,h=(o-c)/2;e.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(f){if(f.type==="w")return Math.max(n[0]+a,r.maxSelectionRange[0]);if(f.type==="e")return Math.min(n[1]+a,r.maxSelectionRange[1]-i)}).attr("y",0).attr("width",i).attr("height",o).attr("cursor","ew-resize").style("display",null);const d=e.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);d.enter().append("rect").attr("class",function(f){return"handle-bar handle-bar--"+f.type}),d.attr("x",function(f){if(f.type==="w")return Math.max(n[0]+u,r.maxSelectionRange[0]-a+u);if(f.type==="e")return Math.min(n[1]+u,r.maxSelectionRange[1]+a+u)}).attr("y",h).attr("width",l).attr("height",c).attr("cursor","ew-resize"),s===Te.SLIDER_VIEW&&this.updateSliderSelectedArea(n),this.updateClipPath(e,this.clipId,n[0],0,n[1]-n[0],o)}updateSliderSelectedArea(e){const n=y(this.getOptions(),"zoomBar",C.TOP,"type"),r=re.height[n],i=this.getComponentContainer().select("svg.zoom-container");R.appendOrSelect(i,"rect.zoom-slider-selected-area").attr("x",e[0]).attr("y",r/2-1).attr("width",e[1]-e[0]).attr("height",2)}renderZoomBarArea(e,n,r,i){const{cartesianScales:s}=this.services,o=s.getMainXAxisPosition(),a=s.getMainYAxisPosition(),l=s.getMainXScaleType(),c=s.getMainYScaleType(),u=(v,b,_)=>T=>s.getValueFromScale(v,b,_,T),h=u(this.xScale,l,o),d=u(this.yScale,c,a),f=y(this.getOptions(),"zoomBar",C.TOP,"type"),p=re.height[f],m=ja().x(v=>h(v)).y0(p).y1(v=>p-d(v)),g=R.appendOrSelect(e,n).datum(r).attr("d",m);i&&g.attr("clip-path",`url(#${i})`)}updateClipPath(e,n,r,i,s,o){const a=R.appendOrSelect(e,"clipPath").attr("id",n);R.appendOrSelect(a,"rect").attr("x",r).attr("y",i).attr("width",s).attr("height",o)}compensateDataForDefaultDomain(e,n){if(!e||e.length<2)return;const r=lr(e),i=this.services.cartesianScales.getDomainIdentifier(),s=this.services.cartesianScales.getRangeIdentifier();if(Number(n[0])<Number(r[0][i])){const o={};o[i]=n[0],o[s]=0,r.unshift(o)}if(Number(n[1])>Number(r[r.length-1][i])){const o={};o[i]=n[1],o[s]=0,r.push(o)}return r}renderZoomBarBaseline(e,n,r,i=!1){const s=y(this.model.getOptions(),"zoomBar",C.TOP,"type"),o=re.height[s],a=Ga()([[n,o],[r,o]]);R.appendOrSelect(e,"path.zoom-bg-baseline").attr("d",a).classed("zoom-bg-baseline-skeleton",i).style("stroke",i?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}renderSkeleton(e,n,r){this.renderZoomBarArea(e,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(e,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),R.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null),y(this.getOptions(),"zoomBar",C.TOP,"type")===Te.GRAPH_VIEW&&this.renderZoomBarBaseline(e,n,r,!0)}destroy(){this.brush.on("start brush end",null),this.services.events.removeEventListener(S.ZoomBar.UPDATE,this.render.bind(this))}}class SC extends Et{constructor(e,n){super(e,n),this.type="threshold",this.renderType=ot.SVG,this.positionService=new $s}render(e=!1){const n=y(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(C).includes(c)){const u=n[c];u.thresholds&&u.thresholds.length>0&&r.push({axisPosition:c,thresholds:u.thresholds,correspondingDatasets:u==null?void 0:u.correspondingDatasets,mapsTo:u==null?void 0:u.mapsTo})}});const i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-thresholds").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-thresholds ${c.axisPosition}`);const o=s.selectAll("g.threshold-group").data(c=>c.thresholds.map(u=>(u.axisPosition=c.axisPosition,u.datum=this.constructDatumObj(c,u),u)));o.exit().attr("opacity",0).remove();const a=o.enter().append("g");a.append("line").attr("class","threshold-line"),a.append("rect").attr("class","threshold-hoverable-area"),a.merge(o).attr("class","threshold-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getScaleByPosition(c),h=l.services.cartesianScales.getScaleTypeByPosition(c);let d=null,f=null;c===C.LEFT||c===C.RIGHT?(f=u,d=l.services.cartesianScales.getMainXScale()):(d=u,f=l.services.cartesianScales.getMainYScale());const p=h===z.LABELS,[m,g]=d.range(),[v,b]=f.range(),{cartesianScales:_}=l.services,T=_.getOrientation(),x=L=>_.getDomainValue(L),E=L=>_.getRangeValue(L),[O,A]=qn(x,E,T),M=D(this);c===C.TOP||c===C.BOTTOM?(M.selectAll("line.threshold-line").transition().call(L=>l.services.transitions.setupTransition({transition:L,name:"threshold-line-update",animate:e})).attr("y1",b).attr("y2",v).attr("x1",({datum:L})=>O(L)+(p?u.step()/2:0)).attr("x2",({datum:L})=>O(L)+(p?u.step()/2:0)).style("stroke",({fillColor:L})=>L),M.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",({datum:L})=>-O(L)).attr("width",Math.abs(v-b)).classed("rotate",!0)):(M.selectAll("line.threshold-line").transition().call(L=>l.services.transitions.setupTransition({transition:L,name:"threshold-line-update",animate:e})).attr("x1",m).attr("x2",g).attr("y1",({datum:L})=>A(L)+(p?u.step()/2:0)).attr("y2",({datum:L})=>A(L)+(p?u.step()/2:0)).style("stroke",({fillColor:L})=>L),M.selectAll("rect.threshold-hoverable-area").attr("x",m).attr("y",({datum:L})=>A(L)).attr("width",Math.abs(g-m)).classed("rotate",!1))}),this.services.events.addEventListener(S.Threshold.SHOW,c=>{this.setThresholdLabelPosition(c.detail),this.label.classed("hidden",!1)}),this.services.events.addEventListener(S.Threshold.HIDE,()=>{this.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()}getFormattedValue(e){const{value:n,axisPosition:r}=e,i=this.getOptions(),s=this.services.cartesianScales.getScaleTypeByPosition(r),{code:o,number:a}=y(i,"locale");if(s===z.TIME){const l=[C.LEFT,C.RIGHT].includes(r),c=this.services.cartesianScales.getMainXScale(),u=this.services.cartesianScales.getMainYScale(),h=l?u:c,d=y(i,"timeScale"),f=Zo(h.ticks(),y(d,"timeInterval"));return qo(n,0,h.ticks(),f,d,i.locale)}return a(n,o)}appendThresholdLabel(){const e=D(this.services.domUtils.getHolder()),n=y(this.getOptions(),"style","prefix");this.label=R.appendOrSelect(e,`div.${Jt}--${n}--threshold--label`).classed("hidden",!0)}setThresholdLabelPosition({event:e,datum:n}){const r=this.services.domUtils.getHolder(),i=wn(e,r),s=n.valueFormatter?n.valueFormatter(n.value):this.getFormattedValue(n);this.label.html(Le(`${n.label||"Threshold"}: ${s}`)).style("background-color",n.fillColor);const o=this.label.node(),a=this.positionService.findBestPlacementAt({left:i[0],top:i[1]},o,[Ct.RIGHT,Ct.LEFT,Ct.TOP,Ct.BOTTOM],()=>({top:void 0,left:void 0,width:r.offsetWidth,height:r.offsetHeight})),l=this.positionService.findPositionAt({left:i[0],top:i[1]},o,a);this.positionService.setElement(o,l)}constructDatumObj(e,n){const r={};return e.correspondingDatasets&&(r.group=y(e,"correspondingDatasets",0)),r[e.mapsTo]=n.value,r}addEventListeners(){const e=this;this.getComponentContainer({withinChartClip:!0}).selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(n){D(this.parentNode).select("line.threshold-line").classed("active",!0),e.services.events.dispatchEvent(S.Threshold.SHOW,{event:n,hoveredElement:D(this),datum:D(this).datum()})}).on("mouseout",function(n){D(this.parentNode).select("line.threshold-line").classed("active",!1),e.services.events.dispatchEvent(S.Threshold.HIDE,{event:n,hoveredElement:D(this),datum:D(this).datum()})})}}class OC extends Et{constructor(e,n){super(e,n),this.type="highlight",this.renderType=ot.SVG,this.positionService=new $s,this.highlightStrokeWidth=1}render(e=!1){const n=y(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(C).includes(c)){const u=n[c];u.highlights&&u.highlights.data.length>0&&r.push({axisPosition:c,highlightStartMapsTo:u.highlights.highlightStartMapsTo,highlightEndMapsTo:u.highlights.highlightEndMapsTo,labelMapsTo:u.highlights.labelMapsTo,highlight:u.highlights.data,color:u.highlights.color})}});const i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-highlight").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-highlight ${c.axisPosition}`);const o=s.selectAll("g.highlight-group").data(c=>c.highlight.map(u=>(u.axisPosition=c.axisPosition,u.highlightStartMapsTo=c.highlightStartMapsTo,u.labelMapsTo=c.labelMapsTo,u.color=c.color,u.highlightEndMapsTo=c.highlightEndMapsTo,u)));o.exit().attr("opacity",0).remove();const a=o.enter().append("g");a.append("rect").attr("class","highlight-bar"),a.append("line").attr("class","highlight-line"),a.merge(o).attr("class","highlight-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getMainXScale(),h=l.services.cartesianScales.getMainYScale(),[d,f]=u.range(),[p,m]=h.range(),{cartesianScales:g}=l.services,v=g.getOrientation(),b=O=>g.getDomainValue(O),_=O=>g.getRangeValue(O),[T,x]=qn(b,_,v),E=D(this);c===C.TOP||c===C.BOTTOM?E.selectAll("rect.highlight-bar").transition().call(O=>l.services.transitions.setupTransition({transition:O,name:"highlight-bar-update",animate:e})).attr("y",Math.max(m+l.highlightStrokeWidth,0)).attr("height",Math.max(p-2*l.highlightStrokeWidth,0)).attr("x",({highlightStartMapsTo:O,...A})=>T(A[O])).attr("width",({highlightStartMapsTo:O,highlightEndMapsTo:A,...M})=>Math.max(T(M[A])-T(M[O]),0)).style("stroke",({color:O,labelMapsTo:A,...M})=>O&&O.scale[M[A]]?O.scale[M[A]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:O,labelMapsTo:A,...M})=>O&&O.scale[M[A]]?O.scale[M[A]]:null):E.selectAll("rect.highlight-bar").transition().call(O=>l.services.transitions.setupTransition({transition:O,name:"highlight-bar-update",animate:e})).attr("x",d).attr("width",Math.max(f-d,0)).attr("y",({highlightEndMapsTo:O,...A})=>x(A[O])).attr("height",({highlightStartMapsTo:O,highlightEndMapsTo:A,...M})=>Math.max(x(M[O])-x(M[A]),0)).style("stroke",({color:O,labelMapsTo:A,...M})=>O&&O.scale[M[A]]?O.scale[M[A]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:O,labelMapsTo:A,...M})=>O&&O.scale[M[A]]?O.scale[M[A]]:null)})}}class xp extends bp{getItems(e){if(e.detail.items)return e.detail.items;const{data:n}=e.detail;if(!n||!n.length||!n[0])return[];const r=this.getOptions(),{cartesianScales:i}=this.services,s=i.getDomainIdentifier(),o=i.isDualAxes(),{groupMapsTo:a}=r.data,l=i.getDomainLabel();let c=i.getRangeLabel();const u=n[0][s];let h;if(n.length===1){const d=n[0],f=i.getRangeIdentifier(d);if(o){const m=i.getRangeAxisPosition({datum:d,groups:[d[a]]});c=i.getScaleLabel(m)}const p=d[f];h=[{label:l,value:u},...Array.isArray(p)&&p.length===2?[{label:"Start",value:p[0]},{label:"End",value:p[1]}]:[{label:c,value:d[f]}]],e.detail.additionalItems&&e.detail.additionalItems.forEach(m=>h.push({label:m.label,value:m.value})),h.push({label:rn(r,"locale.translations.group")||rn(r,"tooltip.groupLabel"),value:d[a],color:this.model.getFillColor(d[a]),class:this.model.getColorClassName({classNameTypes:[Ut.TOOLTIP],dataGroupName:d[a]})})}else if(n.length>1&&(h=[{label:l,value:u}],h=h.concat(n.map(d=>{const f=d[i.getRangeIdentifier(d)];return{label:d[a],value:Array.isArray(f)&&f.length===2?`${f[0]} - ${f[1]}`:f,color:this.model.getFillColor(d[a]),class:this.model.getColorClassName({classNameTypes:[Ut.TOOLTIP],dataGroupName:d[a]})}}).sort((d,f)=>f.value-d.value)),!o&&y(r,"tooltip","showTotal")===!0)){const d=i.getRangeIdentifier();h.push({label:rn(r,"locale.translations.total")||rn(r,"tooltip.totalLabel")||"Total",value:n.reduce((f,p)=>f+p[d],0),bold:!0})}return h}}class MC extends Et{constructor(){super(...arguments),this.type="area",this.renderType=ot.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-area"})).attr("opacity",r=>r.name!==n.datum().name?He.opacity.unselected:He.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",He.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions();let i=[0,0];const{cartesianScales:s}=this.services,o=s.getOrientation(),a=ja().curve(this.services.curves.getD3Curve()).defined(x=>{const E=s.getRangeIdentifier();return x[E]!=null}),l=this.model.getGroupedData(this.configs.groups),c=y(r,"bounds"),u=c&&l&&l.length===1;!u&&c&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${l.length}`);let h=0;const d=(x,E)=>{y(r,"axes",x,"includeZero")===!1&&E[0]>0&&E[1]>0&&(h=E[0])},f=x=>u?s.getBoundedScaledValues(x)[0]:s.getRangeValue(h),p=x=>u?s.getBoundedScaledValues(x)[1]:s.getRangeValue(x);o===qt.VERTICAL?(i=s.getMainYScale().domain(),d(s.getMainYAxisPosition(),i),a.x(x=>s.getDomainValue(x)).y0(x=>f(x)).y1(x=>p(x))):(i=s.getMainXScale().domain(),d(s.getMainXAxisPosition(),i),a.x0(x=>f(x)).x1(x=>p(x)).y(x=>s.getDomainValue(x)));const m=y(r,"color","gradient","enabled"),g=l&&l.length===1&&m;l.length>1&&m&&console.error("Gradients can only be enabled when having 1 single dataset");const v=n.selectAll("path.area").data(l,x=>x.name),b=D(this.services.domUtils.getMainContainer());if(v.exit().attr("opacity",0).remove(),!l.length)return;if(g){const x=b.select(`path.${this.model.getColorClassName({classNameTypes:[Ut.STROKE],dataGroupName:l[0].name})}`).node();let E;if(x)E=getComputedStyle(x,null).getPropertyValue("stroke");else{const O=y(this.model.getOptions(),"color","scale");if(O!==null){const A=Object.keys(O);E=O[A[0]]}}Kr.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${l[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:Kr.getStops(i,E)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});const _=this,T=v.enter().append("path");g?T.merge(v).style("fill",x=>`url(#${this.services.domUtils.generateElementIDString(`${x.name.replace(" ","")}_${this.gradient_id}`)})`).attr("class","area").attr("class",x=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:x.name,originalClassName:"area"})).attr("d",x=>{const{data:E}=x;return a(E)}):(T.attr("opacity",0).merge(v).attr("class","area").attr("class",x=>this.model.getColorClassName({classNameTypes:[Ut.FILL,Ut.STROKE],dataGroupName:x.name,originalClassName:"area"})).style("fill",x=>_.model.getFillColor(x.name,null,x.data)).transition().call(x=>this.services.transitions.setupTransition({transition:x,name:"area-update-enter",animate:e})).attr("opacity",u?1:He.opacity.selected).attr("d",x=>{const{data:E}=x;return a(E)}),u&&T.attr("fill-opacity",He.opacity.selected).style("stroke",x=>_.model.getStrokeColor(x.name,null,x.data)).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}destroy(){const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class _o extends Et{constructor(){super(...arguments),this.type="line",this.renderType=ot.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-line"})).attr("opacity",r=>r.name!==n.datum().name?ao.opacity.unselected:ao.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",ao.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),{cartesianScales:r,curves:i}=this.services,s=f=>r.getDomainValue(f),o=f=>r.getRangeValue(f),[a,l]=qn(s,o,r.getOrientation()),c=this.getOptions(),u=Ga().x(a).y(l).curve(i.getD3Curve()).defined(f=>{const p=r.getRangeIdentifier(f);return f[p]!=null});let h=[];if(this.configs.stacked){const f=Object.keys(c.axes).some(m=>c.axes[m].percentage),{groupMapsTo:p}=c.data;h=this.model.getStackedData({groups:this.configs.groups,percentage:f}).map(m=>{const g=this.services.cartesianScales.getDomainIdentifier(m),v=this.services.cartesianScales.getRangeIdentifier(m);return{name:y(m,0,p),data:m.map(b=>({[g]:b.data.sharedStackKey,[p]:b[p],[v]:b[1]})),hidden:!FM(m,b=>b[0]!==b[1])}})}else h=this.model.getGroupedData(this.configs.groups);const d=n.selectAll("path.line").data(h,f=>f.name);d.exit().attr("opacity",0).remove(),d.enter().append("path").classed("line",!0).attr("opacity",0).merge(d).data(h,f=>f.name).attr("class",f=>this.model.getColorClassName({classNameTypes:[Ut.STROKE],dataGroupName:f.name,originalClassName:"line"})).style("stroke",f=>this.model.getStrokeColor(f.name,null,f.data)).attr("role",xt.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",f=>{const{data:p}=f;return p.map(m=>{const g=this.services.cartesianScales.getRangeIdentifier(m);return m[g]}).join(",")}).transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"line-update-enter",animate:e})).attr("opacity",f=>f.hidden?0:1).attr("d",f=>{const{data:p}=f;return u(p)})}destroy(){const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}const eh=5;function AC(t,e){return t>e-eh&&t<e+eh}class CC extends Et{constructor(){super(...arguments),this.type="ruler",this.renderType=ot.SVG,this.isXGridEnabled=y(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=y(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(e=!1){const n=y(this.getOptions(),"ruler","enabled");this.drawBackdrop(),n&&!this.isEventListenerAdded?this.addBackdropEventListeners():!n&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(e){return e}showRuler(e,[n,r]){const i=this.parent,s=this.services.cartesianScales.getOrientation(),o=this.model.getDisplayData(),a=this.services.cartesianScales.getRangeScale(),[l,c]=a.range(),u=s===qt.HORIZONTAL?r:n,h=R.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),d=R.appendOrSelect(h,"line.ruler-line"),f=i.selectAll("[role=graphics-symbol]"),p=o.map(g=>({domainValue:this.services.cartesianScales.getDomainValue(g),originalData:g})).filter(g=>AC(g.domainValue,u));if(this.pointsWithinLine&&p.length===this.pointsWithinLine.length&&p.map(g=>g.domainValue).join()===this.pointsWithinLine.map(g=>g.domainValue).join())return this.pointsWithinLine=p,this.services.events.dispatchEvent(S.Tooltip.MOVE,{mousePosition:[n,r]});this.pointsWithinLine=p;const m=this.pointsWithinLine.reduce((g,v)=>{if(g.length===0)return g.push(v),g;const b=g[0].domainValue,_=Math.abs(u-v.domainValue),T=Math.abs(u-b);return _>T||(_<T?g=[v]:g.push(v)),g},[]);if(m.length>0){const g=m.map(T=>T.originalData).filter(T=>{const x=this.services.cartesianScales.getRangeIdentifier(T);return T[x]!=null}),v=m.map(T=>T.domainValue),b=f.filter(T=>{const x=this.services.cartesianScales.getDomainValue(T);return v.includes(x)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!UM(this.elementsToHighlight,b)&&this.hideRuler(),b.dispatch("mouseover"),this.elementsToHighlight=b,this.services.events.dispatchEvent(S.Tooltip.SHOW,{mousePosition:[n,r],hoveredElement:d,data:this.formatTooltipData(g)}),h.attr("opacity",1);const _=m[0];s==="horizontal"?d.attr("x1",c).attr("x2",l).attr("y1",_.domainValue).attr("y2",_.domainValue):d.attr("y1",c).attr("y2",l).attr("x1",_.domainValue).attr("x2",_.domainValue)}else this.hideRuler()}hideRuler(){const e=this.parent,n=R.appendOrSelect(e,"g.ruler");e.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent(S.Tooltip.HIDE),n.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const e=this,n=this.services.domUtils.getHolder(),r=this.model.getDisplayData();let i=function(s){const o=wn(s,e.parent.node());e.showRuler(s,o)};if(r.length>100){const s=r.length%50*12.5;i=IS(function(o){const{mousePosition:a}=this;e.showRuler(o,a)},s,n)}this.backdrop.on("mousemove mouseover",i).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const e=this.parent;this.backdrop=R.appendOrSelect(e,"svg.chart-grid-backdrop")}}class Ii extends Et{constructor(){super(...arguments),this.type="scatter",this.renderType=ot.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(i=>{var s;return(s=this.services.transitions)==null?void 0:s.setupTransition({transition:i,name:"legend-hover-scatter"})}).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"legend-mouseout-scatter"})}).attr("opacity",1)}}init(){const{events:e}=this.services;if(!e)throw new Error("Services events are undefined.");e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:n}=this.configs;n&&(e.addEventListener(S.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener(S.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(e){const{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales are undefined.");const r=n.getDomainIdentifier(e),i=this.model.get("zoomDomain");return i!==void 0?e.filter(s=>s[r].getTime()>=i[0].getTime()&&s[r].getTime()<=i[1].getTime()):e}getScatterData(){const e=this.getOptions(),{stacked:n}=this.configs;let r;if(n){const i=Object.keys(e.axes).some(s=>e.axes[s].percentage);r=this.model.getStackedData({groups:this.configs.groups,percentage:i})}else{const{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");r=this.model.getDisplayData(this.configs.groups).filter(s=>{const o=i.getRangeIdentifier(s);return s[o]!==void 0&&s[o]!==null})}return this.filterBasedOnZoomDomain(r)}render(e){if(!(y(this.getOptions(),"points","enabled")||y(this.getOptions(),"bubble","enabled")))return;const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:s}=this.services;if(!s)throw new Error("Services cartesianScales are undefined.");const o=s.getDomainIdentifier(),a=n.selectAll("circle.dot").data(this.getScatterData(),c=>`${c[i]}-${c[o]}`);a.exit().attr("opacity",0).remove();const l=a.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(a);this.styleCircles(l,e),this.addEventListeners()}isDatapointThresholdAnomaly(e){const{handleThresholds:n}=this.configs;if(!n)return!1;const{cartesianScales:r}=this.services;if(!r)throw new Error("Cartesian scales service is undefined");const i=r.getOrientation(),[s,o]=qn(r.getHighestDomainThreshold(),r.getHighestRangeThreshold(),i),[a,l]=qn(h=>r.getDomainValue(h),h=>r.getRangeValue(h),i),c=a(e),u=l(e);return o&&s?u<=o.scaleValue&&c>=s.scaleValue:o?u<=o.scaleValue:s?c>=s.scaleValue:!1}styleCircles(e,n){const r=this.getOptions(),{filled:i,fillOpacity:s}=r.points,{cartesianScales:o}=this.services;if(!o)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:a}=r.data,l=f=>o.getDomainValue(f),c=f=>o.getRangeValue(f),[u,h]=qn(l,c,o.getOrientation()),{fadeInOnChartHolderMouseover:d}=this.configs;e.raise().classed("dot",!0).attr("class",f=>{const p=o.getDomainIdentifier(f),m=this.model.getIsFilled(f[a],f[p],f,i)?[Ut.FILL,Ut.STROKE]:[Ut.STROKE];return this.model.getColorClassName({classNameTypes:m,dataGroupName:f[a],originalClassName:"dot"})||""}).classed("threshold-anomaly",f=>this.isDatapointThresholdAnomaly(f)).classed("filled",f=>{const p=o.getDomainIdentifier(f);return this.model.getIsFilled(f[a],f[p],f,i)}).classed("unfilled",f=>{const p=o.getDomainIdentifier(f);return!this.model.getIsFilled(f[a],f[p],f,i)}).transition().call(f=>{var p;return(p=this.services.transitions)==null?void 0:p.setupTransition({transition:f,name:"scatter-update-enter",animate:n})}).attr("cx",u).attr("cy",h).attr("r",r.points.radius).style("fill",f=>{const p=o.getDomainIdentifier(f);if(this.model.getIsFilled(f[a],f[p],f,i))return this.model.getFillColor(f[a],f[p],f)}).style("stroke",f=>{const p=o.getDomainIdentifier(f);return this.model.getStrokeColor(f[a],f[p],f)}).attr("fill-opacity",i?s:1).attr("opacity",d?0:1).attr("role",xt.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",f=>{const p=o.getRangeIdentifier(f);return f[p]}),this.addEventListeners()}getTooltipAdditionalItems(e){return null}addEventListeners(){const e=this,{groupMapsTo:n}=e.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle").on("mouseover",function(r,i){var s,o;const a=D(this);a.classed("hovered",!0).attr("class",l=>e.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:l[n],originalClassName:a.attr("class")})).style("fill",l=>{var c;const u=(c=e.services.cartesianScales)==null?void 0:c.getDomainIdentifier(l);return e.model.getFillColor(l[n],l[u],l)}).classed("unfilled",!1),(s=e.services.events)==null||s.dispatchEvent(S.Tooltip.SHOW,{event:r,hoveredElement:a,data:[i],additionalItems:e.getTooltipAdditionalItems(i)}),(o=e.services.events)==null||o.dispatchEvent(S.Scatter.SCATTER_MOUSEOVER,{event:r,element:a,datum:i})}).on("mousemove",function(r,i){var s,o;const a=D(this);(s=e.services.events)==null||s.dispatchEvent(S.Scatter.SCATTER_MOUSEMOVE,{event:r,element:a,datum:i}),(o=e.services.events)==null||o.dispatchEvent(S.Tooltip.MOVE,{event:r})}).on("click",function(r,i){var s;(s=e.services.events)==null||s.dispatchEvent(S.Scatter.SCATTER_CLICK,{event:r,element:D(this),datum:i})}).on("mouseout",function(r,i){var s,o,a;const l=D(this);if(l.classed("hovered",!1),!e.configs.filled){const{filled:c}=e.getOptions().points,u=(s=e.services.cartesianScales)==null?void 0:s.getDomainIdentifier(i),h=e.model.getIsFilled(i[n],i[u],i,c);l.classed("unfilled",!h).style("fill",d=>h||c?e.model.getFillColor(d[n],d[u],d):null)}(o=e.services.events)==null||o.dispatchEvent(S.Scatter.SCATTER_MOUSEOUT,{event:r,element:l,datum:i}),(a=e.services.events)==null||a.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:l})})}destroy(){var e;(e=this.parent)==null||e.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:n}=this.services;if(!n)throw new Error("Services events undefined");n.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),n.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),n.removeEventListener(S.Chart.MOUSEOVER,this.handleChartHolderOnHover),n.removeEventListener(S.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}}class Ep extends Et{constructor(e,n,r){super(e,n,r),this.type="axes",this.renderType=ot.SVG,this.truncation={[C.LEFT]:!1,[C.RIGHT]:!1,[C.TOP]:!1,[C.BOTTOM]:!1},r&&(this.configs=r),this.margins=this.configs.margins}render(e=!0){const{position:n}=this.configs,r=this.getOptions(),i=y(r,"axes",n,"visible"),s=this.getComponentContainer(),{width:o,height:a}=R.getSVGElementSize(s,{useAttrs:!0}),l=R.appendOrSelect(s,`g.axis.${n}`);let c,u;if(n===C.BOTTOM||n===C.TOP?(c=this.configs.axes[C.LEFT]?this.margins.left:0,u=this.configs.axes[C.RIGHT]?o-this.margins.right:o):(c=a-this.margins.bottom,u=this.margins.top),!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const h=this.services.cartesianScales.getScaleByPosition(n);this.scaleType===z.LABELS||this.scaleType===z.LABELS_RATIO?h.rangeRound([c,u]):h.range([c,u]);let d;switch(n){case C.LEFT:d=xm;break;case C.BOTTOM:d=Xh;break;case C.RIGHT:d=wm;break;case C.TOP:d=bm;break}l.attr("aria-label",`${n} axis`);const f=!l.select("g.ticks").empty();let p=R.appendOrSelect(l,"g.ticks");f||(p.attr("role",`${xt.GRAPHICS_OBJECT} ${xt.GROUP}`),p.attr("aria-label",`${n} ticks`));const m=R.appendOrSelect(l,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label",`invisible ${n} ticks`),g=y(r,"axes",n),v=this.scaleType===z.TIME||g.scaleType===z.TIME,b=n===C.LEFT||n===C.RIGHT,_=this.model.get("zoomDomain");if(_&&v&&!b&&h.domain(_),!i){p.attr("aria-hidden",!0);return}const T=y(g,"scaleType"),x=y(r,"data","loading"),E=y(g,"ticks","number"),O=y(g,"ticks","values"),A=y(g,"truncation","type"),M=y(g,"truncation","threshold"),L=y(g,"truncation","numCharacter"),I=E!==null,V=y(r,"timeScale"),$=R.appendOrSelect(m,"g.tick"),U=R.appendOrSelect($,"text").text("0"),K=R.getSVGElementSize(U.node(),{useBBox:!0}).height;$.remove();const W=this.scaleType||g.scaleType||z.LINEAR,N=d(h).tickSizeOuter(0);if(h.ticks){let H;if(I?H=E:(H=sn.ticks.number,b&&(H=this.getNumberOfFittingTicks(a,K,sn.ticks.verticalSpaceRatio))),h.ticks().length===1&&h.ticks()[0]===0&&(H=0),N.ticks(H),v)if(!h.ticks(H).length)N.tickValues([]);else{const X=y(r,"timeScale","addSpaceOnEdges"),st=y(r,"axes",n,"domain"),P=h.copy();X&&!st&&P.nice(H);const G=P.ticks(H);X&&G.length>2&&!st&&(G.splice(G.length-1,1),G.splice(0,1)),N.tickValues(G)}}let J;const q=y(g,"ticks","formatter"),{code:Z,number:it}=y(r,"locale");if(v){const H=Zo(N.tickValues(),y(r,"timeScale","timeInterval"));q===null?J=(X,st)=>qo(X,st,N.tickValues(),H,V,r.locale):J=(X,st)=>{const P=qo(X,st,N.tickValues(),H,V,r.locale);return q(X,st,P)}}else q===null?W===z.LINEAR&&(J=H=>it(H,Z)):J=q;N.tickFormat(J);const[Y,Lt]=this.services.cartesianScales.getScaleByPosition(n).domain();let tt;if(O){if(v)O.forEach((H,X)=>{H.getTime===void 0&&(O[X]=new Date(H))}),tt=O.filter(H=>{const X=H.getTime();return X>=new Date(Y).getTime()&&X<=new Date(Lt).getTime()});else if(T===z.LABELS){const H=this.services.cartesianScales.getScaleByPosition(n).domain();tt=O.filter(X=>H.includes(X))}else tt=O.filter(H=>H>=Y&&H<=Lt);N.tickValues(tt)}switch(n){case C.LEFT:p.attr("transform",`translate(${this.margins.left}, 0)`);break;case C.BOTTOM:p.attr("transform",`translate(0, ${a-this.margins.bottom})`);break;case C.RIGHT:p.attr("transform",`translate(${o-this.margins.right}, 0)`);break;case C.TOP:p.attr("transform",`translate(0, ${this.margins.top})`);break}const gt=this.model.isDataEmpty();if(g.title){const H=R.appendOrSelect(l,"text.axis-title").html(gt||x?"":Le(g.title)),X=y(g,"titleOrientation");let st;switch(n){case C.LEFT:X===Eo.RIGHT?H.attr("transform","rotate(90)").attr("y",0).attr("x",h.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):H.attr("transform","rotate(-90)").attr("y",0).attr("x",-(h.range()[0]/2)).attr("dy","0.75em").style("text-anchor","middle");break;case C.BOTTOM:H.attr("transform",`translate(${this.margins.left/2+h.range()[1]/2}, ${a+4})`).style("text-anchor","middle");break;case C.RIGHT:X===Eo.LEFT?H.attr("transform","rotate(-90)").attr("y",o).attr("x",-(h.range()[0]/2)).style("text-anchor","middle"):H.attr("transform","rotate(90)").attr("y",-o).attr("x",h.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case C.TOP:st=R.getSVGElementSize(H,{useBBox:!0}).height,H.attr("transform",`translate(${this.margins.left/2+h.range()[1]/2}, ${st/2})`).style("text-anchor","middle");break}}if(v){const H=Zo(N.tickValues(),y(r,"timeScale","timeInterval")),X=V.showDayName,st=p;e&&(p=p.transition().call(P=>this.services.transitions.setupTransition({transition:P,name:"axis-update",animate:e}))),p=p.call(N),st.selectAll(".tick").data(N.tickValues(),h).order().select("text").style("font-weight",(P,G)=>Zf(P,G,N.tickValues(),H,X)?"bold":"normal")}else!e||!f?p=p.call(N):p=p.transition().call(H=>this.services.transitions.setupTransition({transition:H,name:"axis-update",animate:e})).call(N);if(m.call(N),n===C.BOTTOM||n===C.TOP){let H=!1;const X=y(g,"ticks","rotation");if(X===bi.ALWAYS)H=!0;else if(X===bi.NEVER)H=!1;else if(!X||X===bi.AUTO)if(h.step)H=m.selectAll("g.tick text").nodes().some(st=>R.getSVGElementSize(st,{useBBox:!0}).width>=h.step());else{H=!1;const st=m.append("text").text("A"),P=R.getSVGElementSize(st.node(),{useBBox:!0}).width;let G;m.selectAll("g.tick").each(function(){const Q=D(this),k=parseFloat(y(PS(this),"tx"));k!==null&&G+Q.text().length*P*.8>=k&&(H=!0),G=k}),st.remove()}H?(I||(N.ticks(this.getNumberOfFittingTicks(o,K,sn.ticks.horizontalSpaceRatio)),m.call(N),p.call(N)),l.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",n===C.TOP?"start":"end")):l.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(x?l.attr("opacity",0):l.attr("opacity",1),p.selectAll("g.tick").attr("aria-label",H=>H),m.selectAll("g.tick").attr("aria-label",H=>H),A!==ve.NONE&&T===z.LABELS&&!O){const H=this.services.cartesianScales.getScaleDomain(n);if(H.length>0){const X=s.select(`g.axis.${n} g.ticks g.tick`).html();l.selectAll("g.ticks g.tick").html(X);const st=this;l.selectAll("g.tick text").data(H).text(function(P){return P.length>M?(st.truncation[n]=!0,Zr(P,A,L)):P}),this.getInvisibleAxisRef().selectAll("g.tick text").data(H).text(function(P){return P.length>M?Zr(P,A,L):P}),l.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),l.selectAll("g.tick text").data(H)}}this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=R.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),s=y(i,"axes",n),o=y(s,"scaleType"),a=y(s,"truncation","threshold"),l=this;r.selectAll("g.tick text").on("mouseover",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOVER,{event:c,element:D(this),datum:u}),o===z.LABELS&&u.length>a&&l.services.events.dispatchEvent(S.Tooltip.SHOW,{event:c,hoveredElement:D(this),content:u})}).on("mousemove",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEMOVE,{event:c,element:D(this),datum:u}),o===z.LABELS&&u.length>a&&l.services.events.dispatchEvent(S.Tooltip.MOVE,{event:c})}).on("click",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_CLICK,{event:c,element:D(this),datum:u})}).on("mouseout",function(c,u){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOUT,{event:c,element:D(this),datum:u}),o===z.LABELS&&l.services.events.dispatchEvent(S.Tooltip.HIDE)})}getInvisibleAxisRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} g.ticks.invisible`)}getTitleRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} text.axis-title`)}getNumberOfFittingTicks(e,n,r){const i=Math.floor(e/(n*r));return IM(i,2,sn.ticks.number)}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;R.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)}}class DC extends Ep{constructor(e,n,r){super(e,n,r)}render(e=!0){super.render(e),super.destroy();const n=this.configs.position,r=this.getComponentContainer(),i=R.appendOrSelect(r,`g.axis.${n}`),s=this;i.selectAll("g.tick").each(function(o,a){const l=D(this);l.classed("tick-hover",!0).attr("tabindex",a===0?0:-1);const c=l.select("text"),{width:u,height:h}=R.getSVGElementSize(c,{useBBox:!0}),d=R.appendOrSelect(l,"rect.axis-holder");let f=0,p=0;switch(n){case C.LEFT:f=-u+Number(c.attr("x")),p=-(h/2);break;case C.RIGHT:f=Math.abs(Number(c.attr("x"))),p=-(h/2);break;case C.TOP:f=-(u/2),p=-h+Number(c.attr("y"))/2,s.truncation[n]&&(f=0,d.attr("transform","rotate(-45)"));break;case C.BOTTOM:f=-(u/2),p=h/2-2,s.truncation[n]&&(f=-u,d.attr("transform","rotate(-45)"));break}d.attr("x",f-sn.hover.rectanglePadding).attr("y",p).attr("width",u+sn.hover.rectanglePadding*2).attr("height",h).lower()}),this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=R.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),s=y(i,"axes",n),o=y(s,"scaleType"),a=y(s,"truncation","threshold"),l=this;r.selectAll("g.tick.tick-hover").on("mouseover",function(c){const u=D(this).select("text"),h=u.datum();l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOVER,{event:c,element:u,datum:h}),o===z.LABELS&&h.length>a&&l.services.events.dispatchEvent(S.Tooltip.SHOW,{event:c,element:u,datum:h})}).on("mousemove",function(c){const u=D(this).select("text"),h=u.datum();l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEMOVE,{event:c,element:u,datum:h}),l.services.events.dispatchEvent(S.Tooltip.MOVE,{event:c})}).on("click",function(c){l.services.events.dispatchEvent(S.Axis.LABEL_CLICK,{event:c,element:D(this).select("text"),datum:D(this).select("text").datum()})}).on("mouseout",function(c){l.services.events.dispatchEvent(S.Axis.LABEL_MOUSEOUT,{event:c,element:D(this).select("text"),datum:D(this).select("text").datum()}),o===z.LABELS&&l.services.events.dispatchEvent(S.Tooltip.HIDE)}).on("focus",function(c){const u={clientX:0,clientY:0};if(c.target){c.target.focus();const h=c.target.getBoundingClientRect();u.clientX=h.x,u.clientY=h.y}l.services.events.dispatchEvent(S.Axis.LABEL_FOCUS,{event:{...c,...u},element:D(this),datum:D(this).select("text").datum()})}).on("blur",function(c){l.services.events.dispatchEvent(S.Axis.LABEL_BLUR,{event:c,element:D(this),datum:D(this).select("text").datum()})}).on("keydown",function(c){c.key&&c.key==="Escape"&&(l.services.events.dispatchEvent(S.Tooltip.HIDE),l.services.events.dispatchEvent(S.Axis.LABEL_BLUR,{event:c,element:D(this),datum:D(this).select("text").datum()})),n===C.LEFT||n===C.RIGHT?c.key&&c.key==="ArrowUp"?l.goNext(this,c):c.key&&c.key==="ArrowDown"&&l.goPrevious(this,c):c.key&&c.key==="ArrowLeft"?l.goPrevious(this,c):c.key&&c.key==="ArrowRight"&&l.goNext(this,c)})}goNext(e,n){e.nextElementSibling&&e.nextElementSibling.tagName!=="path"&&e.nextElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}goPrevious(e,n){e.previousElementSibling&&e.previousElementSibling.tagName!=="path"&&e.previousElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;R.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)}}class LC extends Et{constructor(){super(...arguments),this.type="2D-axes",this.renderType=ot.SVG,this.children={},this.thresholds=[],this.margins={top:0,right:0,bottom:0,left:0}}render(e=!1){const n={},r=Object.keys(C),i=y(this.getOptions(),"axes");r.forEach(o=>{i[C[o]]&&(n[C[o]]=!0)}),this.configs.axes=n,r.forEach(o=>{const a=C[o];if(this.configs.axes[a]&&!this.children[a]){const l={position:a,axes:this.configs.axes,margins:this.margins},c=this.model.axisFlavor===fs.DEFAULT?new Ep(this.model,this.services,l):new DC(this.model,this.services,l);c.setModel(this.model),c.setServices(this.services),c.setParent(this.parent),this.children[a]=c}}),Object.keys(this.children).forEach(o=>{this.children[o].render(e)});const s={};Object.keys(this.children).forEach(o=>{const a=this.children[o],l=a.configs.position,c=a.getInvisibleAxisRef(),{width:u,height:h}=R.getSVGElementSize(c,{useBBox:!0});let d;switch(a.getTitleRef().empty()?d=0:(d=R.getSVGElementSize(a.getTitleRef(),{useBBox:!0}).height,(l===C.LEFT||l===C.RIGHT)&&(d+=5)),l){case C.TOP:s.top=h+d;break;case C.BOTTOM:s.bottom=h+d;break;case C.LEFT:s.left=u+d;break;case C.RIGHT:s.right=u+d;break}}),this.services.events.dispatchEvent(S.Axis.RENDER_COMPLETE),Object.keys(s).some(o=>this.margins[o]!==s[o])&&(this.margins=Object.assign(this.margins,s),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(S.ZoomBar.UPDATE),Object.keys(this.children).forEach(o=>{const a=this.children[o];a.margins=this.margins}),this.render(!0))}}class Tp extends Et{constructor(){super(...arguments),this.type="skeleton"}render(e=!0){const n=y(this.getOptions(),"data","loading");n?this.renderSkeleton(n):this.removeSkeleton()}renderSkeleton(e){if(this.configs.skeleton===gn.GRID)this.renderGridSkeleton(e);else if(this.configs.skeleton===gn.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(e);else if(this.configs.skeleton===gn.PIE)this.renderPieSkeleton(e);else if(this.configs.skeleton===gn.DONUT)this.renderDonutSkeleton(e);else throw new Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`)}renderGridSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawXGrid(e),this.drawYGrid(e),e&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(e){const n=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(e),n===qt.VERTICAL&&this.drawYGrid(e),n===qt.HORIZONTAL&&this.drawXGrid(e),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(e){const n=this.computeOuterRadius();this.drawRing(n,0,e),e&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(e){const n=this.computeOuterRadius(),r=this.computeInnerRadius();this.drawRing(n,r,e),e&&this.setShimmerEffect("shimmer-areas")}setScales(){const e=this.services.cartesianScales.getMainXScale().range(),n=this.services.cartesianScales.getMainYScale().range();this.xScale=Tn().domain([0,1]).range(e),this.yScale=Tn().domain([0,1]).range(n)}drawBackdrop(e){const n=this.parent,{width:r,height:i}=R.getSVGElementSize(n,{useAttrs:!0});this.backdrop=R.appendOrSelect(n,"svg.chart-skeleton.DAII").attr("width",r).attr("height",i);const s=R.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");s.attr("width","100%").attr("height","100%");const[o]=this.xScale.range(),[,a]=this.yScale.range();this.backdrop.merge(s).attr("x",o).attr("y",a),s.classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(e){const n=+this.backdrop.attr("width"),r=y(this.getOptions(),"grid","x","numberOfTicks"),i=this.xScale.ticks(r).map(a=>a*n),s=R.appendOrSelect(this.backdrop,"g.x.skeleton"),o=s.selectAll("line").data(i);o.enter().append("line").merge(o).attr("x1",a=>a).attr("x2",a=>a).attr("y1",0).attr("y2","100%"),s.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(e){const n=+this.backdrop.attr("height"),r=this.backdrop.attr("width"),i=y(this.getOptions(),"grid","y","numberOfTicks"),s=this.xScale.ticks(i).map(l=>l*n),o=R.appendOrSelect(this.backdrop,"g.y.skeleton"),a=o.selectAll("line").data(s);a.enter().append("line").merge(a).attr("x1",0).attr("x2",r).attr("y1",l=>l).attr("y2",l=>l),o.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(e,n,r=!0){const i=this.parent,{width:s,height:o}=R.getSVGElementSize(i,{useAttrs:!0}),a=R.appendOrSelect(i,"svg.chart-skeleton").attr("width",s).attr("height",o),l=n===0?"pie":"donut",c=y(this.getOptions(),l,"alignment");R.appendOrSelect(a,"rect.chart-skeleton-area-container").attr("width",s).attr("height",o).attr("fill","none");const u=Ho().innerRadius(n).outerRadius(e).startAngle(0).endAngle(Math.PI*2),h=e+Math.abs(_t.radiusOffset),d=e+(Math.min(s,o)-e*2)/2,f=R.appendOrSelect(a,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${h}, ${d})`).attr("d",u).classed("shimmer-effect-areas",r).classed("empty-state-areas",!r).style("fill",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null);let p=e+_t.xOffset;c===ae.CENTER?p=s/2:c===ae.RIGHT&&(p=s-e-_t.xOffset);const m=e+_t.yOffset;f.attr("transform",`translate(${p}, ${m})`)}computeOuterRadius(){const{width:e,height:n}=R.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(e,n)/2+_t.radiusOffset}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(e){const n="stop-bg-shimmer",r="stop-shimmer",i=this.parent.select(".chart-skeleton"),{width:s}=R.getSVGElementSize(this.parent,{useAttrs:!0}),o=0,a=s,l=R.appendOrSelect(i,"defs").lower(),c=R.appendOrSelect(l,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(e)).attr("class",e).attr("x1",o-3*.2*s).attr("x2",a).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),u=`
			<stop class="${n}" offset="${o}"></stop>
			<stop class="${r}" offset="${o+.2}"></stop>
			<stop class="${n}" offset="${o+2*.2}"></stop>
		`;c.html(u),h();function h(){c.attr("gradientTransform",`translate(${o-3*.2*s}, 0)`).transition().duration(2e3).delay(1e3).ease(Fy).attr("gradientTransform",`translate(${a+3*.2*s}, 0)`).on("end",h)}}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class kC extends Et{constructor(){super(...arguments),this.type="zero-line",this.renderType=ot.SVG}render(e){const n=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),r=this.services.cartesianScales.getScaleByPosition(n),[i,s]=r.domain(),o=i>0&&s<0||i<0&&s>0,a=this.getComponentContainer();if(!o){a.selectAll("line.domain").remove();return}const[l,c]=this.services.cartesianScales.getDomainScale().range();let u=+r(0)+.5;u||(u=r.range()[0]);const h=Ff({x0:l,x1:c,y0:u,y1:u},this.services.cartesianScales.getOrientation());R.appendOrSelect(a,"line.domain").transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"zero-line-update",animate:e})).attr("y1",h.y0).attr("y2",h.y1).attr("x1",h.x0).attr("x2",h.x1)}}class nh extends CC{formatTooltipData(e){return e.reverse()}}class RC extends _l{constructor(e,n,r){super(e,n,r),this.type="color-legend",this.renderType=ot.SVG,this.gradient_id=`gradient-id-${Math.floor(Math.random()*99999999999)}`,this.handleAxisCompleteEvent=()=>{const i=this.getComponentContainer(),{width:s}=R.getSVGElementSize(i,{useAttrs:!0}),o=y(this.getOptions(),"data","loading");if(s>Tt.color.barWidth&&!o){const a=y(this.getOptions(),"heatmap","colorLegend","title"),{cartesianScales:l}=this.services,c=l.getMainXScale().range();if(c[0]>1&&(i.select("g.legend").attr("transform",`translate(${c[0]}, 0)`),a)){const{width:u}=R.getSVGElementSize(i.select("g.legend-title").select("text"),{useBBox:!0}),h=c[0]-u-9;h>1?i.select("g.legend-title").attr("transform",`translate(${h}, 0)`):(i.select("g.legend").attr("transform",`translate(${c[0]}, 16)`),i.select("g.legend-title").attr("transform",`translate(${c[0]}, 0)`))}}else i.select("g.legend-title").attr("transform","translate(0, 0)")},this.chartType=r.chartType}init(){this.chartType==="heatmap"&&this.services.events.addEventListener(S.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}render(e=!1){const n=this.getOptions(),r=this.getComponentContainer(),{width:i}=R.getSVGElementSize(r,{useAttrs:!0}),s=y(n,"color","gradient","colors"),o=y(n,this.chartType,"colorLegend","type");let a=y(n,"color","pairing","option");const l=y(n,"heatmap","colorLegend","title");if(y(this.getOptions(),"data","loading")){r.html("");return}const c=!nn(s),u=Kf(this.model.getDisplayData()),h=!(i<=Tt.color.barWidth),d=h?Tt.color.barWidth:i,f=R.appendOrSelect(r,"g.legend"),p=R.appendOrSelect(f,"g.legend-axis");if(l){const M=R.appendOrSelect(r,"g.legend-title");R.appendOrSelect(M,"text").text(l).attr("dy","0.7em"),f.attr("transform","translate(0, 16)")}const m=u[0]<0&&u[1]>0?"diverge":"mono";(a<1&&a>4&&m==="mono"||a<1&&a>2&&m==="diverge")&&(a=1);let g=[];const v=m==="diverge"?17:11;if(c)g=s;else for(let M=1;M<v+1;M++)g.push(o===wi.LINEAR?`stop-color-${m}-${a}-${M}`:`fill-${m}-${a}-${M}`);const b=oe(u[0],u[1]),_=Rv(b,3),T=Tn().domain(u).range([0,d]),x=Xh(T).tickSize(0).tickValues(_),{code:E,number:O}=y(n,"locale");x.tickFormat(M=>O(M,E));let A;switch(o){case wi.LINEAR:this.drawLinear(g,f,d);break;case wi.QUANTIZE:A=this.drawQuantize(g,m,c,f,d),T.range([A,d]);break;default:throw Error("Entered color legend type is not supported.")}p.attr("transform",`translate(0,${Tt.color.axisYTranslation})`).call(x),p.select(".domain").remove(),p.select("g.tick:last-of-type text").style("text-anchor",h?"middle":"end"),p.select("g.tick:first-of-type text").style("text-anchor",h&&this.chartType!=="choropleth"?"middle":"start")}drawLinear(e,n,r){const i=100/(e.length-1);R.appendOrSelect(n,"linearGradient").attr("id",`${this.gradient_id}-legend`).selectAll("stop").data(e).enter().append("stop").attr("offset",(s,o)=>`${o*i}%`).attr("class",(s,o)=>e[o]).attr("stop-color",s=>s),R.appendOrSelect(n,"rect").attr("width",r).attr("height",Tt.color.barHeight).style("fill",`url(#${this.gradient_id}-legend)`)}drawQuantize(e,n,r,i,s){!r&&n==="diverge"&&e.splice(e.length/2,1);const o=ys().domain(e).range([0,s]);return R.appendOrSelect(i,"g.quantized-rect").selectAll("rect").data(o.domain()).join("rect").attr("x",a=>o(a)).attr("y",0).attr("width",Math.max(0,o.bandwidth()-1)).attr("height",Tt.color.barHeight).attr("class",a=>a).attr("fill",a=>a),(!r&&n)==="mono"?o.bandwidth()-1:0}destroy(){this.chartType==="heatmap"&&this.services.events.removeEventListener(S.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}}class bl extends Et{getBarWidth(){const e=this.getOptions();if(e.bars.width)return e.bars.width;const n=this.model.getDisplayData().length,r=this.services.cartesianScales.getMainXScale(),i=R.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!r.step){const s=y(e,"bars","spacingFactor");return Math.min(e.bars.maxWidth,i*s/n)}return Math.min(e.bars.maxWidth,r.step()/2)}isOutsideZoomedDomain(e,n){if(this.model.getDisplayData().length<=1)return!1;const r=this.model.get("zoomDomain");if(r!==void 0){const i=this.services.cartesianScales.getDomainScale();return e<i(r[0])||n>i(r[1])}return!1}}function $C(t,e){const n=ei(this._current,t);return r=>(this._current=n(r),e(this._current))}class Sp extends Et{constructor(){super(...arguments),this.type="pie",this.renderType=ot.SVG,this.isRendering=!1,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.slice").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i.data[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.slice").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getInnerRadius(){return _t.innerRadius}render(e=!0){const n=this,r=this.getComponentContainer(),i=this.getOptions(),{groupMapsTo:s}=i.data,{valueMapsTo:o}=i.pie;this.isRendering=!0;const a=this.model.getDisplayData().filter(M=>M[o]>0),l=this.computeRadius();this.arc=Ho().innerRadius(this.getInnerRadius()).outerRadius(l),this.hoverArc=Ho().innerRadius(this.getInnerRadius()).outerRadius(l+_t.hoverArc.outerRadiusOffset);const c=t_().value(M=>M[o]).sort(y(i,"pie","sortFunction")).padAngle(_t.padAngle)(a),u=R.appendOrSelect(r,"g.slices").attr("role",xt.GROUP).attr("data-name","slices").selectAll("path.slice").data(c,M=>M.data[s]);u.exit().attr("opacity",0).remove(),u.enter().append("path").classed("slice",!0).attr("opacity",0).merge(u).attr("class",M=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:M.data[s],originalClassName:"slice"})).style("fill",M=>n.model.getFillColor(M.data[s],null,M.data)).attr("d",this.arc).transition().call(M=>this.services.transitions.setupTransition({transition:M,name:"pie_slice_enter_update",animate:e})).attr("opacity",1).attr("role",xt.GRAPHICS_SYMBOL).attr("aria-roledescription","slice").attr("aria-label",M=>`${M[o]}, ${lo(M.data[o],a,o)+"%"}`).attrTween("d",function(M){return $C.bind(this)(M,n.arc)}).on("end",()=>{n.isRendering=!1});const{code:h,number:d}=y(i,"locale"),f=i.pie.labels.enabled,p=f?c.filter(M=>M.data[o]>0):[],m=R.appendOrSelect(r,"g.labels").attr("role",xt.GROUP).attr("data-name","labels").selectAll("text.pie-label").data(p,M=>M.data[s]);m.exit().attr("opacity",0).remove();const g=m.enter().append("text").classed("pie-label",!0),v=[];g.merge(m).style("text-anchor","middle").text(M=>i.pie.labels.formatter?i.pie.labels.formatter({...M,percentageValue:lo(M.data[o],a,o,!0)}):d(lo(M.data[o],a,o),h)+"%").datum(function(M){const L=l+7,I=(M.endAngle-M.startAngle)/2+M.startAngle,V=I/Math.PI*180,$=this.getComputedTextLength();return M.textOffsetX=$/2,M.textOffsetY=V>90&&V<270?10:0,M.xPosition=(M.textOffsetX+L)*Math.sin(I),M.yPosition=(M.textOffsetY+L)*-Math.cos(I),M}).attr("transform",function(M,L){const I=p.length,V=(M.endAngle-M.startAngle)*(180/Math.PI);if(L>=I-2&&V<_t.callout.minSliceDegree){let $,U;return M.index===I-1?($=M.xPosition+_t.callout.offsetX+_t.callout.textMargin+M.textOffsetX,U=M.yPosition-_t.callout.offsetY,M.direction=_i.RIGHT,v.push(M)):($=M.xPosition-_t.callout.offsetX-M.textOffsetX-_t.callout.textMargin,U=M.yPosition-_t.callout.offsetY,M.direction=_i.LEFT,v.push(M)),`translate(${$}, ${U})`}return`translate(${M.xPosition}, ${M.yPosition})`}),this.renderCallouts(v);const b=y(i,"donut")?"donut":"pie",_=y(i,b,"alignment"),{width:T}=R.getSVGElementSize(this.getParent(),{useAttrs:!0}),x=f?_t.xOffset:0,E=f?_t.yOffset:0;let O=l+x;_===ae.CENTER?O=T/2:_===ae.RIGHT&&(O=T-l-_t.xOffset);let A=l+E;v.length>0&&(A+=_t.yOffsetCallout),r.attr("x",O+7).attr("y",A),this.addEventListeners()}renderCallouts(e){const n=R.appendOrSelect(this.getComponentContainer(),"g.callouts").attr("role",xt.GROUP).attr("data-name","callouts"),r=n.selectAll("g.callout").data(e);r.exit().remove();const i=r.enter().append("g").classed("callout",!0).attr("role",xt.GROUP).attr("aria-roledescription","label callout");i.merge(r).datum(function(s){const{xPosition:o,yPosition:a,direction:l}=s;return l===_i.RIGHT?(s.startPos={x:o,y:a+s.textOffsetY},s.endPos={x:o+_t.callout.offsetX,y:a-_t.callout.offsetY+s.textOffsetY},s.intersectPointX=s.endPos.x-_t.callout.horizontalLineLength):(s.startPos={x:o,y:a+s.textOffsetY},s.endPos={x:o-_t.callout.offsetX,y:a-_t.callout.offsetY+s.textOffsetY},s.intersectPointX=s.endPos.x+_t.callout.horizontalLineLength),s}),i.append("line").classed("vertical-line",!0).merge(n.selectAll("line.vertical-line")).datum(function(){return D(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",s=>s.startPos.x).attr("y1",s=>s.startPos.y).attr("x2",s=>s.intersectPointX).attr("y2",s=>s.endPos.y),i.append("line").classed("horizontal-line",!0).merge(n.selectAll("line.horizontal-line")).datum(function(){return D(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",s=>s.intersectPointX).attr("y1",s=>s.endPos.y).attr("x2",s=>s.endPos.x).attr("y2",s=>s.endPos.y)}addEventListeners(){const e=this;this.parent.selectAll("path.slice").on("mouseover",function(n,r){const i=D(this);e.isRendering||i.classed("hovered",!0).transition("pie_slice_mouseover").call(a=>e.services.transitions.setupTransition({transition:a,name:"pie_slice_mouseover"})).attr("d",e.hoverArc),e.services.events.dispatchEvent(S.Pie.SLICE_MOUSEOVER,{event:n,element:D(this),datum:r});const{groupMapsTo:s}=e.getOptions().data,{valueMapsTo:o}=e.getOptions().pie;e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{label:r.data[s],value:r.data[o]}]})}).on("mousemove",function(n,r){const i=D(this);e.services.events.dispatchEvent(S.Pie.SLICE_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(S.Pie.SLICE_CLICK,{event:n,element:D(this),datum:r})}).on("mouseout",function(n,r){const i=D(this);BM(()=>{e.isRendering||i.classed("hovered",!1).transition("pie_slice_mouseout").call(s=>e.services.transitions.setupTransition({transition:s,name:"pie_slice_mouseout"})).attr("d",e.arc)},100),e.services.events.dispatchEvent(S.Pie.SLICE_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:i})})}computeRadius(){const{width:e,height:n}=R.getSVGElementSize(this.parent,{useAttrs:!0}),r=this.getOptions(),i=Math.min(e,n)/2;return r.pie.labels.enabled?i+_t.radiusOffset:i}}class IC extends Sp{constructor(){super(...arguments),this.type="donut",this.renderType=ot.SVG}render(e=!0){super.render(e);const n=this;if(this.model.isDataEmpty()){this.getComponentContainer().select("g.center").remove();return}const r=R.appendOrSelect(this.getComponentContainer(),"g.center"),i=this.getOptions(),s=this.computeRadius(),o=y(i,"donut","center","label");R.appendOrSelect(r,"text.donut-figure").attr("text-anchor","middle").style("dominant-baseline",()=>o===null||o===""?"central":"initial").style("font-size",()=>i.donut.center.numberFontSize(s)).transition().call(a=>this.services.transitions.setupTransition({transition:a,name:"donut-figure-enter-update",animate:e})).tween("text",function(){return n.centerNumberTween(D(this))}),o!==null&&o!==""&&R.appendOrSelect(r,"text.donut-title").attr("text-anchor","middle").style("font-size",()=>i.donut.center.titleFontSize(s)).attr("y",i.donut.center.titleYPosition(s)).text(o)}getInnerRadius(){return this.computeRadius()*(3/4)}centerNumberTween(e){const n=this.getOptions();let r=y(n,"donut","center","number");r===null&&(r=this.model.getDisplayData().reduce((a,l)=>a+l[n.pie.valueMapsTo],0));const i=parseInt(e.text().replace(/[, ]+/g,""),10)||0;let s;i%1===0&&r%1===0?s=hd:s=oe;const o=s(i,r);return a=>{const{numberFormatter:l}=n.donut.center;if(l)e.text(l(o(a)));else{const{code:c,number:u}=y(n,"locale");e.text(u(Math.floor(o(a)),c))}}}}class PC extends bl{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=ot.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.model.getDisplayData(this.configs.groups),r=this.getOptions(),{groupMapsTo:i}=r.data;this.setGroupScale();const s=this.getComponentContainer({withinChartClip:!0}),o=qr(n.map(u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return u[h]&&typeof u[h].toString=="function"?u[h].toString():u[h]})),a=s.selectAll("g.bars").data(o,u=>u);a.exit().attr("opacity",0).remove();const l=a.enter().append("g").classed("bars",!0).attr("role",xt.GROUP).attr("data-name","bars").merge(a);l.transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-group-update-enter",animate:e})).attr("transform",u=>{const h=this.services.cartesianScales.getDomainValue(u)-this.getGroupWidth()/2;return this.services.cartesianScales.getOrientation()===qt.VERTICAL?`translate(${h}, 0)`:`translate(0, ${h})`});const c=l.selectAll("path.bar").data(u=>this.getDataCorrespondingToLabel(u),u=>u[i]);c.exit().attr("opacity",0).remove(),c.enter().append("path").attr("opacity",0).merge(c).classed("bar",!0).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:u[i],originalClassName:"bar"})).style("fill",u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return this.model.getFillColor(u[i],u[h],u)}).attr("d",u=>{const h=this.groupScale(u[i]),d=this.getBarWidth(),f=h,p=h+d,m=this.services.cartesianScales.getRangeAxisPosition({datum:u}),g=this.services.cartesianScales.getDomainLowerBound(m),v=this.services.cartesianScales.getValueThroughAxisPosition(m,g),b=this.services.cartesianScales.getRangeValue(u),_=this.services.cartesianScales.getDomainValue(u)-d/2,T=_+d;if(!this.isOutsideZoomedDomain(_,T))return hl({x0:f,x1:p,y0:v,y1:b},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",xt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>u.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=D(this);i.classed("hovered",!0),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){const i=D(this);e.services.events.dispatchEvent(S.Bar.BAR_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(S.Bar.BAR_CLICK,{event:n,element:D(this),datum:r})}).on("mouseout",function(n,r){const i=D(this);i.classed("hovered",!1),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(e){return this.model.getDisplayData(this.configs.groups).filter(n=>{const r=this.services.cartesianScales.getDomainIdentifier(n);return n[r].toString()===e})}getGroupWidth(){const e=this.model.getGroupedData(this.configs.groups),n=this.getTotalGroupPadding();return this.getBarWidth()*e.length+n}getDomainScaleStep(){const e=this.services.cartesianScales.getDomainScale(),n=this.model.getGroupedData(this.configs.groups);let r=this.defaultStepFactor;if(typeof e.step=="function")r=e.step();else if(n.length>0){const i=n.find(s=>{var o;return((o=s.data)==null?void 0:o.length)>1});if(i){const s=this.services.cartesianScales.getDomainIdentifier(i.data[0]);r=Math.abs(e(i.data[1][s])-e(i.data[0][s]))}}return r}getTotalGroupPadding(){const e=this.model.getGroupedData(this.configs.groups);return e.length===1?0:Math.min(5,5*(this.getDomainScaleStep()/this.defaultStepFactor))*(e.length-1)}getBarWidth(){const e=this.getOptions(),n=y(e,"bars","width"),r=y(e,"bars","maxWidth");if(n!==null&&(r===null||n<=r))return n;const i=this.model.getGroupedData(this.configs.groups).length,s=this.getTotalGroupPadding();return Math.min(r,(this.getDomainScaleStep()-s)/i)}setGroupScale(){const e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=ys().domain(e).rangeRound([0,this.getGroupWidth()])}}class NC extends Et{constructor(){super(...arguments),this.type="heatmap",this.renderType=ot.SVG,this.matrix={},this.xBandwidth=0,this.yBandwidth=0,this.translationUnits={x:0,y:0},this.handleAxisOnHover=e=>{const{detail:n}=e,{datum:r}=n,i=this.model.getUniqueRanges(),s=this.model.getUniqueDomain(),o=this.services.cartesianScales.getDomainLabel(),a=this.services.cartesianScales.getRangeLabel(),l=this.services.cartesianScales.getMainXScale(),c=this.services.cartesianScales.getMainYScale();let u="",h=null,d=null,f=null;this.matrix[r]!==void 0?(u=o,i.forEach(p=>{if(typeof this.matrix[r][p].value=="number"){const m=this.matrix[r][p].value;if(h===null){h=m,d=m,f=m;return}h+=m,d=m<d?m:d,f=m>f?m:f}})):(u=a,s.forEach(p=>{if(typeof this.matrix[p][r].value=="number"){const m=this.matrix[p][r].value;if(h===null){h=m,d=m,f=m;return}h+=m,d=m<d?m:d,f=m>f?m:f}})),l(r)!==void 0?this.parent.select("g.multi-cell.column-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${l(r)}, ${So(c.range())})`):c(r)!==void 0&&this.parent.select("g.multi-cell.row-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${So(l.range())},${c(r)})`),this.services.events.dispatchEvent(S.Tooltip.SHOW,{event:n.event,hoveredElement:D(e.detail.element),items:[{label:u,value:r,bold:!0},{label:"Min",value:d!==null?d:"-"},{label:"Max",value:f!==null?f:"-"},{label:"Average",value:h!==null?h/s.length:"-"}]})},this.handleAxisMouseOut=e=>{this.parent.selectAll("g.multi-cell").classed("highlighter-hidden",!0),this.services.events.dispatchEvent(S.Tooltip.HIDE,{event:e})}}init(){const e=this.services.events;e.addEventListener(S.Axis.LABEL_MOUSEOVER,this.handleAxisOnHover),e.addEventListener(S.Axis.LABEL_MOUSEOUT,this.handleAxisMouseOut),e.addEventListener(S.Axis.LABEL_FOCUS,this.handleAxisOnHover),e.addEventListener(S.Axis.LABEL_BLUR,this.handleAxisMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0});n.lower();const{cartesianScales:r}=this.services;if(this.matrix=this.model.getMatrix(),n.html(""),y(this.getOptions(),"data","loading"))return;const i=r.getMainXScale(),s=r.getMainYScale(),o=r.getDomainIdentifier(),a=r.getRangeIdentifier(),l=this.model.getUniqueDomain(),c=this.model.getUniqueRanges(),u=this.model.getMatrixAsArray(),h=i.range(),d=s.range();this.xBandwidth=Math.abs((h[1]-h[0])/l.length),this.yBandwidth=Math.abs((d[1]-d[0])/c.length);const f=this.services.domUtils.generateElementIDString("heatmap-pattern-stripes");n.append("defs").append("pattern").attr("id",f).attr("width",3).attr("height",3).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").classed("pattern-fill",!0).attr("width",.5).attr("height",8);const p=n.selectAll().data(u).enter().append("g").attr("class",m=>`heat-${m.index}`).classed("cell",!0).attr("transform",m=>`translate(${i(m[o])}, ${s(m[a])})`).append("rect").attr("class",m=>this.model.getColorClassName({value:m.value,originalClassName:`heat-${m.index}`})).classed("heat",!0).classed("null-state",m=>m.index===-1||m.value===null).attr("width",this.xBandwidth).attr("height",this.yBandwidth).style("fill",m=>{const g=this.services.cartesianScales.getDomainIdentifier(m);return m.index===-1||m.value===null?`url(#${f})`:this.model.getFillColor(Number(m.value),m[g],m)}).attr("aria-label",m=>m.value);this.createOuterBox("g.cell-highlight",this.xBandwidth,this.yBandwidth),this.createOuterBox("g.multi-cell.column-highlight",this.xBandwidth,Math.abs(d[1]-d[0])),this.createOuterBox("g.multi-cell.row-highlight",Math.abs(h[1]-h[0]),this.yBandwidth),this.determineDividerStatus()&&(p.style("stroke-width","1px"),this.parent.select("g.cell-highlight").classed("cell-2",!0)),this.addEventListener()}createOuterBox(e,n,r){const i=R.appendOrSelect(this.parent,e).classed("shadows",!0).classed("highlighter-hidden",!0);R.appendOrSelect(i,"line.top").attr("x1",-1).attr("x2",n+1),R.appendOrSelect(i,"line.left").attr("x1",0).attr("y1",-1).attr("x2",0).attr("y2",r+1),R.appendOrSelect(i,"line.down").attr("x1",-1).attr("x2",n+1).attr("y1",r).attr("y2",r),R.appendOrSelect(i,"line.right").attr("x1",n).attr("x2",n).attr("y1",-1).attr("y2",r+1)}determineDividerStatus(){const e=y(this.getOptions(),"heatmap","divider","state");return e!==$r.OFF&&(e===$r.AUTO&&Eu.minCellDividerDimension<=this.xBandwidth&&Eu.minCellDividerDimension<=this.yBandwidth||e===$r.ON)}addEventListener(){const e=this,{cartesianScales:n}=this.services,r=this.getOptions(),i=rn(r,"locale.translations.total")||rn(r,"tooltip.totalLabel")||"Total",s=n.getDomainIdentifier(),o=n.getRangeIdentifier(),a=n.getDomainLabel(),l=n.getRangeLabel();this.parent.selectAll("g.cell").on("mouseover",function(c,u){const h=D(this),d=h.select("rect.heat");if(!d.classed("null-state")){const f=NS(h.attr("transform"));e.parent.select("g.cell-highlight").attr("transform",`translate(${f.x+e.translationUnits.x}, ${f.y+e.translationUnits.y})`).classed("highlighter-hidden",!1),e.services.events.dispatchEvent(S.Heatmap.HEATMAP_MOUSEOVER,{event:c,element:d,datum:u}),e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:c,items:[{label:a,value:u[s]},{label:l,value:u[o]},{label:i,value:u.value,color:d.style("fill")}]})}}).on("mousemove",function(c,u){e.services.events.dispatchEvent(S.Heatmap.HEATMAP_MOUSEMOVE,{event:c,element:D(this),datum:u}),e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:c})}).on("click",function(c,u){e.services.events.dispatchEvent(S.Heatmap.HEATMAP_CLICK,{event:c,element:D(this),datum:u})}).on("mouseout",function(c,u){const h=D(this).select("rect.heat"),d=h.classed("null-state");e.parent.select("g.cell-highlight").classed("highlighter-hidden",!0),d||(e.services.events.dispatchEvent(S.Heatmap.HEATMAP_MOUSEOUT,{event:c,element:h,datum:u}),e.services.events.dispatchEvent(S.Tooltip.HIDE,{event:c,hoveredElement:h}))})}destroy(){this.parent.selectAll("rect.heat").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleAxisOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleAxisMouseOut)}}class BC extends bl{constructor(){super(...arguments),this.type="simple-bar",this.renderType=ot.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),o=this.services.cartesianScales.getOrientation(),a=i.selectAll("path.bar").data(s,l=>l[r]);a.exit().attr("opacity",0).remove(),a.enter().append("path").attr("opacity",0).merge(a).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(l=>this.services.transitions.setupTransition({transition:l,name:"bar-update-enter",animate:e})).attr("class",l=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:l[r],originalClassName:"bar"})).style("fill",l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return this.model.getFillColor(l[r],l[c],l)}).attr("d",l=>{const c=this.services.cartesianScales.getRangeIdentifier(),u=this.getBarWidth(),h=l[c],d=this.services.cartesianScales.getDomainValue(l)-u/2,f=d+u;let p,m;if(Array.isArray(h)&&h.length===2)p=this.services.cartesianScales.getRangeValue(h[0]),m=this.services.cartesianScales.getRangeValue(h[1]);else{const v=this.services.cartesianScales.getRangeScale().domain()[0];p=this.services.cartesianScales.getRangeValue(Math.max(0,v)),m=this.services.cartesianScales.getRangeValue(l)}const g=Math.abs(m-p);if(g!==0&&g<2&&(h>0&&o===qt.VERTICAL||h<0&&o===qt.HORIZONTAL?m=p-2:m=p+2),!this.isOutsideZoomedDomain(d,f))return hl({x0:d,x1:f,y0:p,y1:m},o)}).attr("opacity",1).attr("role",xt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",l=>l.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=D(this);i.classed("hovered",!0),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){e.services.events.dispatchEvent(S.Bar.BAR_MOUSEMOVE,{event:n,element:D(this),datum:r}),e.services.events.dispatchEvent(S.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(S.Bar.BAR_CLICK,{event:n,element:D(this),datum:r})}).on("mouseout",function(n,r){const i=D(this);i.classed("hovered",!1),e.services.events.dispatchEvent(S.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class UC extends Et{constructor(){super(...arguments),this.type="area-stacked",this.renderType=ot.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.area").transition("legend-hover-area").call(s=>this.services.transitions.setupTransition({transition:s,name:"legend-hover-area"})).attr("opacity",s=>y(s,0,i)!==n.datum().name?He.opacity.unselected:He.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",He.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),r=this,i=this.getOptions(),{groupMapsTo:s}=i.data,o=Object.keys(i.axes).some(f=>i.axes[f].percentage),a=this.model.getStackedData({percentage:o,groups:this.configs.groups}),l=y(a,0,0),c=this.services.cartesianScales.getDomainAxisPosition({datum:l}),u=this.services.cartesianScales.getRangeAxisPosition({datum:l}),h=this.services.cartesianScales.getScaleByPosition(u),d=n.selectAll("path.area").data(a,f=>y(f,0,s));this.areaGenerator=ja().x(f=>this.services.cartesianScales.getValueThroughAxisPosition(c,f.data.sharedStackKey)).y0(f=>h(f[0])).y1(f=>h(f[1])).curve(this.services.curves.getD3Curve()),d.exit().attr("opacity",0).remove(),d.enter().append("path").attr("opacity",0).merge(d).data(a,f=>y(f,0,s)).attr("class","area").attr("class",f=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:y(f,0,s),originalClassName:"area"})).style("fill",f=>r.model.getFillColor(y(f,0,s),null,f)).attr("role",xt.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",f=>y(f,0,s)).transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"area-update-enter",animate:e})).attr("opacity",He.opacity.selected).attr("d",this.areaGenerator)}}class HC extends bl{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=ot.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),o=this.model.getActiveDataGroupNames(),a=n.selectAll("g.bars").data(s,c=>y(c,0,i));a.exit().attr("opacity",0).remove(),a.enter().append("g").classed("bars",!0).attr("role",xt.GROUP).attr("data-name","bars");const l=n.selectAll("g.bars").selectAll("path.bar").data(c=>c,c=>c.data.sharedStackKey);l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).transition().call(c=>this.services.transitions.setupTransition({transition:c,name:"bar-update-enter",animate:e})).attr("class",c=>this.model.getColorClassName({classNameTypes:[Ut.FILL],dataGroupName:c[i],originalClassName:"bar"})).style("fill",c=>this.model.getFillColor(c[i],c.data.sharedStackKey,c.data)).attr("d",c=>{const u=c.data.sharedStackKey,h=this.getBarWidth(),d=this.services.cartesianScales.getDomainValue(u)-h/2,f=d+h,p=this.services.cartesianScales.getRangeValue(c[0]);let m=this.services.cartesianScales.getRangeValue(c[1]);if(!this.isOutsideZoomedDomain(d,f)){if(Math.abs(m-p)>0&&Math.abs(m-p)>r.bars.dividerSize){const g=c[0]<0&&c[1]<=0;g&&o.length>1?this.services.cartesianScales.getOrientation()===qt.VERTICAL?m+=c[1]===0?2:1:m-=1:g||(this.services.cartesianScales.getOrientation()===qt.VERTICAL?m+=1:m-=1)}return hl({x0:d,x1:f,y0:p,y1:m},this.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",xt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",c=>c[1]-c[0]),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this;this.parent.selectAll("path.bar").on("mouseover",function(i,s){const o=D(this);o.classed("hovered",!0),r.services.events.dispatchEvent(S.Bar.BAR_MOUSEOVER,{event:i,element:o,datum:s});let a=r.model.getDisplayData(r.configs.groups).find(l=>{const c=r.services.cartesianScales.getDomainIdentifier(l),u=r.services.cartesianScales.getRangeIdentifier(l);return l[u]===s.data[s[n]]&&l[c].toString()===s.data.sharedStackKey&&l[n]===s[n]});if(a===void 0){const l=r.services.cartesianScales.getDomainIdentifier(),c=r.services.cartesianScales.getRangeIdentifier();a={[l]:s.data.sharedStackKey,[c]:s.data[s[n]],[n]:s[n]}}r.services.events.dispatchEvent(S.Tooltip.SHOW,{event:i,hoveredElement:o,data:[a]})}).on("mousemove",function(i,s){const o=D(this);r.services.events.dispatchEvent(S.Bar.BAR_MOUSEMOVE,{event:i,element:o,datum:s}),r.services.events.dispatchEvent(S.Tooltip.MOVE,{event:i})}).on("click",function(i,s){r.services.events.dispatchEvent(S.Bar.BAR_CLICK,{event:i,element:D(this),datum:s})}).on("mouseout",function(i,s){const o=D(this);o.classed("hovered",!1),r.services.events.dispatchEvent(S.Bar.BAR_MOUSEOUT,{event:i,element:o,datum:s}),r.services.events.dispatchEvent(S.Tooltip.HIDE,{hoveredElement:o})})}getBarWidth(){const e=this.getOptions();if(y(e,"bars","width"))return e.bars.width;const n=this.services.cartesianScales.getMainXScale(),r=R.getSVGElementSize(this.parent,{useAttrs:!0}).width,i=this.model.getStackKeys().length,s=y(e,"bars","spacingFactor");return n.step?Math.min(e.bars.maxWidth,n.step()/2):Math.min(e.bars.maxWidth,r*s/i)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(S.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(S.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class FC extends Ii{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=ot.SVG}render(e){if(!y(this.getOptions(),"points","enabled"))return;const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(u=>r.axes[u].percentage),o=this.model.getStackedData({groups:this.configs.groups,percentage:s}),a=n.selectAll("g.dots").data(o,u=>y(u,0,i));a.exit().attr("opacity",0).remove();const l=a.enter().append("g").classed("dots",!0).attr("role",xt.GROUP).merge(a).selectAll("circle.dot").data(u=>u);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l).datum(u=>{const h=u[i],d=this.services.cartesianScales.getDomainIdentifier(u),f=this.services.cartesianScales.getRangeIdentifier(u);return{[i]:h,[d]:u.data.sharedStackKey,[f]:u[1]}});this.styleCircles(c,e),this.addEventListeners()}getTooltipData(e,n){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(l=>r.axes[l].percentage),o=this.model.getStackedData({groups:this.configs.groups,percentage:s}),a=[];return o.forEach((l,c)=>{l.forEach((u,h)=>{const d=u[i],f=u.data.sharedStackKey;let p=u.data[d];const m=u[1],g=this.services.cartesianScales.getDomainIdentifier(u),v=this.services.cartesianScales.getRangeIdentifier(u);p!=null&&e===this.services.cartesianScales.getDomainValue(f)&&n===this.services.cartesianScales.getRangeValue(m)&&(s&&(p=this.model.getStackedData({groups:this.configs.groups})[c][h].data[d]),p!==null&&a.push({[i]:d,[g]:f,[v]:p}))})}),this.model.getDisplayData(this.configs.groups).filter(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l),u=this.services.cartesianScales.getRangeIdentifier(l);return a.find(h=>h[i]==l[i]&&h[c]==l[c]&&h[u]==l[u])!==void 0})}}function VC(t){var e=t==null?0:t.length;return e?pf(t):[]}class zC extends Ke{zoomIn(e,n,r){let i,s,o;const a=r||xu;e&&(i=e.x,s=e.y,o=2);const{width:l,height:c}=R.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});n.transition().duration(a.duration).ease(a.ease).attr("transform",`translate(${l/2}, ${c/2}) scale(${o}) translate(${-i},${-s})`),this.services.events.dispatchEvent(S.CanvasZoom.CANVAS_ZOOM_IN,{element:D(e)})}zoomOut(e,n){const r=n||xu;e.transition().duration(r.duration).ease(r.ease).attr("transform",""),this.services.events.dispatchEvent(S.CanvasZoom.CANVAS_ZOOM_OUT)}}class GC extends Ke{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(e,n){this.documentFragment.addEventListener(e,n)}removeEventListener(e,n){this.documentFragment.removeEventListener(e,n)}dispatchEvent(e,n){let r;n?r=new CustomEvent(e,{detail:n}):(r=document.createEvent("Event"),r.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(r)}}class jC extends Ke{constructor(e,n){super(e,n)}downloadCSV(e,n){const r=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:i}),n);else if(URL&&"download"in r){const s=URL.createObjectURL(new Blob([e],{type:i}));r.href=s,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}else location.href=`data:application/octet-stream,${encodeURIComponent(e)}`}downloadImage(e,n){const r=document.createElement("a");r.download=n,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}class WC extends Ke{constructor(){super(...arguments),this.pendingTransitions={}}init(){var e;(e=this.services.events)==null||e.addEventListener(S.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:e,name:n,animate:r}){return this.pendingTransitions[e._id]=e,e.on("end interrupt cancel",()=>{delete this.pendingTransitions[e._id]}),this.model.getOptions().animations===!1||r===!1?e.duration(0):e.duration(y(Su,n,"duration")||Su.default.duration)}getPendingTransitions(){return this.pendingTransitions}}function Pr(t,e){const n=ct(t),r=ct(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function YC(t,e){const n=ct(t),r=ct(e);return n.getFullYear()-r.getFullYear()}function XC(t,e){const n=ct(t),r=ct(e),i=Pr(n,r),s=Math.abs(YC(n,r));n.setFullYear(1584),r.setFullYear(1584);const o=Pr(n,r)===-i,a=i*(s-+o);return a===0?0:a}function wl(t,e){const n=ct(t);if(isNaN(e))return _e(t,NaN);if(!e)return n;const r=n.getDate(),i=_e(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}function Op(t,e){return wl(t,e*12)}function qC(t,e){return Op(t,-e)}function ZC(t,e){const n=ct(t),r=ct(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function KC(t){const e=ct(t);return e.setHours(23,59,59,999),e}function QC(t){const e=ct(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function JC(t){const e=ct(t);return+KC(e)==+QC(e)}function t2(t,e){const n=ct(t),r=ct(e),i=Pr(n,r),s=Math.abs(ZC(n,r));let o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let a=Pr(n,r)===-i;JC(ct(t))&&s===1&&Pr(t,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function e2(t,e){return wl(t,-e)}function n2(t,e){const n=ct(t),r=ct(e),i=rh(n,r),s=Math.abs(jf(n,r));n.setDate(n.getDate()-i*s);const o=+(rh(n,r)===-i),a=i*(s-o);return a===0?0:a}function rh(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Mp(t,e){const n=ct(t);return isNaN(e)?_e(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function r2(t,e){return Mp(t,-e)}function xl(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function El(t,e){return+ct(t)-+ct(e)}function i2(t,e,n){const r=El(t,e)/Gf;return xl(void 0)(r)}function Tl(t,e){const n=+ct(t);return _e(t,n+e)}function Ap(t,e){return Tl(t,e*Gf)}function s2(t,e){return Ap(t,-e)}function ih(t,e,n){const r=El(t,e)/zf;return xl(void 0)(r)}function ga(t,e){return Tl(t,e*zf)}function sh(t,e){return ga(t,-e)}function oh(t,e,n){const r=El(t,e)/1e3;return xl(void 0)(r)}function va(t,e){return Tl(t,e*1e3)}function ah(t,e){return va(t,-e)}class o2 extends Ke{constructor(){super(...arguments),this.scaleTypes={top:null,right:null,bottom:null,left:null},this.scales={top:null,right:null,bottom:null,left:null}}getDomainAxisPosition({datum:e=null}={}){if(this.dualAxes&&e){const n=this.model.getOptions(),{groupMapsTo:r}=n.data,i=y(n,"axes",this.secondaryDomainAxisPosition),s=e[r];if(i!=null&&i.correspondingDatasets&&i.correspondingDatasets.includes(s))return this.secondaryDomainAxisPosition}return this.domainAxisPosition}getRangeAxisPosition({datum:e=null,groups:n=null}={}){if(this.dualAxes){const r=this.model.getOptions(),{groupMapsTo:i}=r.data,s=y(r,"axes",this.secondaryRangeAxisPosition);let o;if(e!==null?o=e[i]:n&&n.length>0&&(o=n[0]),s!=null&&s.correspondingDatasets&&s.correspondingDatasets.includes(o))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition}getAxisOptions(e){return y(this.model.getOptions(),"axes",e)}getDomainAxisOptions(){const e=this.getDomainAxisPosition();return this.getAxisOptions(e)}getRangeAxisOptions(){const e=this.getRangeAxisPosition();return this.getAxisOptions(e)}getScaleLabel(e){return this.getAxisOptions(e).title||(e===C.BOTTOM||e===C.TOP?"x-value":"y-value")}getDomainLabel(){return this.getScaleLabel(this.getDomainAxisPosition())}getRangeLabel(){return this.getScaleLabel(this.getRangeAxisPosition())}update(){this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation(),Object.keys(C).map(e=>C[e]).forEach(e=>{this.scales[e]=this.createScale(e)})}findDomainAndRangeAxes(){const e=this.findVerticalAxesPositions(),n=this.findHorizontalAxesPositions(),r=this.findDomainAndRangeAxesPositions(e,n);this.domainAxisPosition=r.primaryDomainAxisPosition,this.rangeAxisPosition=r.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=r.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=r.secondaryRangeAxisPosition)}determineOrientation(){(this.rangeAxisPosition===C.LEFT||this.rangeAxisPosition===C.RIGHT)&&(this.domainAxisPosition===C.BOTTOM||this.domainAxisPosition===C.TOP)?this.orientation=qt.VERTICAL:this.orientation=qt.HORIZONTAL}isDualAxes(){return this.dualAxes}determineAxisDuality(){var e,n,r,i;const s=this.model.getOptions(),o=y(s,"axes");((e=o[C.LEFT])!=null&&e.correspondingDatasets&&o[C.RIGHT]||(n=o[C.RIGHT])!=null&&n.correspondingDatasets&&o[C.LEFT]||(r=o[C.TOP])!=null&&r.correspondingDatasets&&o[C.BOTTOM]||(i=o[C.BOTTOM])!=null&&i.correspondingDatasets&&o[C.TOP])&&(this.dualAxes=!0)}getCustomDomainValuesByposition(e){const n=y(this.model.getOptions(),"axes",e,"domain");if(n&&!Array.isArray(n))throw new Error(`Domain in ${e} axis is not a valid array`);if(Array.isArray(n)&&(this.scaleTypes[e]===z.LINEAR||this.scaleTypes[e]===z.TIME)&&n.length!==2)throw new Error(`There can only be 2 elements in domain for scale type: ${this.scaleTypes[e]}`);return n}getOrientation(){return this.orientation}getScaleByPosition(e){return this.scales[e]}getScaleTypeByPosition(e){return this.scaleTypes[e]}getDomainAxisScaleType(){const e=this.getDomainAxisPosition();return this.getScaleTypeByPosition(e)}getRangeAxisScaleType(){const e=this.getRangeAxisPosition();return this.getScaleTypeByPosition(e)}getDomainScale(){return this.scales[this.domainAxisPosition]}getRangeScale(){return this.scales[this.rangeAxisPosition]}getMainXAxisPosition(){const e=[C.BOTTOM,C.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainYAxisPosition(){const e=[C.LEFT,C.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainXScale(){return this.scales[this.getMainXAxisPosition()]}getMainYScale(){return this.scales[this.getMainYAxisPosition()]}getValueFromScale(e,n,r,i){const s=this.model.getOptions(),o=y(s,"axes")[r],{mapsTo:a}=o,l=y(i,a)!==null?i[a]:i;let c;switch(n){case z.LABELS:c=e(l)+e.step()/2;break;case z.TIME:c=e(new Date(l));break;default:c=e(l)}return c}getBoundedScaledValues(e){const{bounds:n}=this.model.getOptions(),r=this.getRangeAxisPosition({datum:e}),i=this.scales[r],s=this.model.getOptions(),o=y(s,"axes")[r],{mapsTo:a}=o,l=e[a]!==void 0?e[a]:e;return[i(y(e,n.upperBoundMapsTo)!==null?e[n.upperBoundMapsTo]:l),i(y(e,n.lowerBoundMapsTo)!==null?e[n.lowerBoundMapsTo]:l)]}getValueThroughAxisPosition(e,n){const r=this.scaleTypes[e],i=this.scales[e];return this.getValueFromScale(i,r,e,n)}getDomainValue(e){const n=this.getDomainAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getRangeValue(e){const n=this.getRangeAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getMainXScaleType(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())}getMainYScaleType(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())}getDomainIdentifier(e){const n=this.model.getOptions();return y(n,"axes",this.getDomainAxisPosition({datum:e}),"mapsTo")}getRangeIdentifier(e){const n=this.model.getOptions();return y(n,"axes",this.getRangeAxisPosition({datum:e}),"mapsTo")}extendsDomain(e,n){const r=this.model.getOptions(),i=y(r,"axes",e);if(i.scaleType===z.TIME){const s=y(r,"timeScale","addSpaceOnEdges");return a2(n,s)}else return l2(n,sn.paddingRatio,i.scaleType)}findVerticalAxesPositions(){const e=this.model.getOptions(),n=y(e,"axes"),r=this.isDualAxes();return y(n,C.LEFT)===null&&y(n,C.RIGHT)!==null||y(n,C.RIGHT,"main")===!0||r&&y(n,C.LEFT,"correspondingDatasets")?{primary:C.RIGHT,secondary:C.LEFT}:{primary:C.LEFT,secondary:C.RIGHT}}findHorizontalAxesPositions(){const e=this.model.getOptions(),n=y(e,"axes"),r=this.isDualAxes();return y(n,C.BOTTOM)===null&&y(n,C.TOP)!==null||y(n,C.TOP,"main")===!0||r&&y(n,C.BOTTOM,"correspondingDatasets")?{primary:C.TOP,secondary:C.BOTTOM}:{primary:C.BOTTOM,secondary:C.TOP}}findDomainAndRangeAxesPositions(e,n){const r=this.model.getOptions(),i=y(r,"axes",e.primary),s=y(r,"axes",n.primary),o=i.scaleType||z.LINEAR,a=s.scaleType||z.LINEAR,l={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return l.primaryDomainAxisPosition=n.primary,l.primaryRangeAxisPosition=e.primary,l.secondaryDomainAxisPosition=n.secondary,l.secondaryRangeAxisPosition=e.secondary,(!(a===z.LABELS||a===z.TIME)&&o===z.LABELS||o===z.TIME)&&(l.primaryDomainAxisPosition=e.primary,l.primaryRangeAxisPosition=n.primary,l.secondaryDomainAxisPosition=e.secondary,l.secondaryRangeAxisPosition=n.secondary),l}getScaleDomain(e){const n=this.model.getOptions(),r=y(n,"axes",e),i=y(n,"bounds"),{includeZero:s}=r,o=y(r,"scaleType")||z.LINEAR;if(this.model.isDataEmpty())return[];if(r.binned){const{bins:v}=this.model.getBinConfigurations();return[0,dm(v,b=>b.length)]}else if(r.limitDomainToBins){const{bins:v}=this.model.getBinConfigurations(),b=this.model.getStackKeys({bins:v});return[b[0].split(":")[0],b[b.length-1].split(":")[1]]}const a=this.model.getDisplayData(),{extendLinearDomainBy:l,mapsTo:c,percentage:u,thresholds:h}=r,{reference:d,compareTo:f}=sn.ratio;if(r.domain)return o===z.LABELS?r.domain:(o===z.TIME&&(r.domain=r.domain.map(v=>v.getTime===void 0?new Date(v):v)),this.extendsDomain(e,r.domain));if(u)return[0,100];if(r&&o===z.LABELS)return qr(a.map(v=>v[c]));let p,m;const g=this.model.getDataGroupNames();if(o===z.LABELS_RATIO)return a.map(v=>`${v[d]}/${v[f]}`);if(o===z.TIME)m=a.map(v=>+new Date(v[c]));else if(i&&n.axes)m=[],a.forEach(v=>{m.push(v[c]),v[i.upperBoundMapsTo]&&m.push(v[i.upperBoundMapsTo]),v[i.lowerBoundMapsTo]&&m.push(v[i.lowerBoundMapsTo])});else if(r.stacked===!0&&g&&e===this.getRangeAxisPosition()){const{groupMapsTo:v}=n.data,b=this.model.getDataValuesGroupedByKeys({groups:g}),_=a.filter(x=>!g.includes(x[v])),T=[];b.forEach(x=>{const{...E}=x;let O=0,A=0;Object.values(E).forEach(M=>{isNaN(M)||(M<0?A+=M:O+=M)}),T.push([A,O])}),m=[...VC(T),..._.map(x=>x[c])]}else m=[],a.forEach(v=>{const b=v[c];Array.isArray(b)&&b.length===2?(m.push(b[0]),m.push(b[1])):(l&&m.push(Math.max(v[c],v[l])),m.push(b))});return o!==z.TIME&&o!==z.LOG&&s&&m.push(0),h&&h.length>0&&h.forEach(v=>{const b=y(v,"value");b!==null&&m.push(b)}),p=on(m),p=this.extendsDomain(e,p),p}createScale(e){const n=this.model.getOptions(),r=y(n,"axes",e);if(!r)return null;const i=y(r,"scaleType")||z.LINEAR;this.scaleTypes[e]=i;let s;return i===z.TIME?s=Bd():i===z.LOG?s=Dd().base(r.base||10):i===z.LABELS||i===z.LABELS_RATIO?s=ys():s=Tn(),s.domain(this.getScaleDomain(e)),s}getDomainLowerBound(e){let n,r=0;return this.getOrientation()===qt.VERTICAL?n=this.getMainYScale().domain():n=this.getMainXScale().domain(),y(this.model.getOptions(),"axes",e,"includeZero")===!1&&n[0]>0&&n[1]>0&&(r=n[0]),r}getHighestDomainThreshold(){const e=y(this.model.getOptions(),"axes"),n=this.getDomainAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getDomainScale(),s=r.sort((o,a)=>a.value-o.value)[0];return this.getScaleTypeByPosition(n)===z.TIME&&(typeof s.value=="string"||s.value.getTime===void 0)&&(s.value=new Date(s.value)),{threshold:s,scaleValue:i(s.value)}}getHighestRangeThreshold(){const e=y(this.model.getOptions(),"axes"),n=this.getRangeAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getRangeScale(),s=r.sort((o,a)=>a.value-o.value)[0];return{threshold:s,scaleValue:i(s.value)}}}function a2(t,e){const n=new Date(t[0]),r=new Date(t[1]);return XC(r,n)>1?[qC(n,e),Op(r,e)]:t2(r,n)>1?[e2(n,e),wl(r,e)]:n2(r,n)>1?[r2(n,e),Mp(r,e)]:i2(r,n)>1?[s2(n,e),Ap(r,e)]:ih(r,n)>30?[sh(n,e*30),ga(r,e*30)]:ih(r,n)>1?[sh(n,e),ga(r,e)]:oh(r,n)>15?[ah(n,e*15),va(r,e*15)]:oh(r,n)>1?[ah(n,e),va(r,e)]:[n,r]}function l2([t,e],n,r){const i=(e-t)*n,s=e<=0&&e+i>0?0:e+i;let o=t>=0&&t-i<0?0:t-i;if(r===z.LOG&&o<=0){if(t<=0)throw Error("Data must have values greater than 0 if log scale type is used.");o=t}return[o,s]}class c2 extends Ke{constructor(){super(...arguments),this.curveTypes={curveLinear:za,curveLinearClosed:h_,curveBasis:e_,curveBasisClosed:n_,curveBasisOpen:r_,curveBundle:i_,curveCardinal:s_,curveCardinalClosed:o_,curveCardinalOpen:a_,curveCatmullRom:l_,curveCatmullRomClosed:c_,curveCatmullRomOpen:u_,curveMonotoneX:d_,curveMonotoneY:f_,curveNatural:p_,curveStep:m_,curveStepAfter:v_,curveStepBefore:g_}}getD3Curve(){let e="curveLinear";const n=this.model.getOptions().curve;if(n&&(typeof n=="string"?e=n:e=n.name),this.curveTypes[e]){let r=this.curveTypes[e];return n&&Object.keys(n).forEach(i=>{r[i]&&(r=r[i](n[i]))}),r}return console.warn(`The curve type '${e}' is invalid, using 'curveLinear' instead`),this.curveTypes.curveLinear}}class u2 extends Ke{isZoomBarEnabled(){if(!this.services.cartesianScales||!y(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();const e=this.services.cartesianScales.getMainXAxisPosition(),n=y(this.model.getOptions(),"axes",e,"scaleType");return e===C.BOTTOM&&n===z.TIME}getZoomBarData(){const e=this.model.getZoomBarData();return e&&e.length>1?e:this.model.getDisplayData()}getDefaultZoomBarDomain(e){if(!this.services.zoom)throw new Error("Services zoom not defined");const n=e||this.services.zoom.getZoomBarData(),{cartesianScales:r}=this.services;if(!r)throw new Error("Services cartesianScales undefined");const i=r.getMainXAxisPosition(),s=r.getDomainIdentifier(),o=y(this.model.getOptions(),"axes",i,"domain");if(Array.isArray(o)&&o.length===2)return o;if(!i)throw new Error("Not defined: mainXAxisPosition");return r.extendsDomain(i,on(n,a=>a[s]))}handleDomainChange(e,n={dispatchEvent:!0}){var r;this.model.set({zoomDomain:e},{animate:!1}),n.dispatchEvent&&((r=this.services.events)==null||r.dispatchEvent(S.ZoomDomain.CHANGE,{newDomain:e}))}getZoomRatio(){return y(this.model.getOptions(),"zoomBar","zoomRatio")}filterDataForRangeAxis(e,n){var r;const i=this.model.get("zoomDomain"),s=Object.assign({stacked:!1},n),o=y(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&o&&i){const a=s.stacked?"sharedStackKey":(r=this.services.cartesianScales)==null?void 0:r.getDomainIdentifier(),l=e.filter(c=>new Date(c[a])>=i[0]&&new Date(c[a])<=i[1]);if(l.length>0)return l}return e}zoomIn(e=this.getZoomRatio()){var n;const r=this.model.get("zoomDomain"),i=re.handleWidth,s=(n=this.services.cartesianScales)==null?void 0:n.getMainXScale().copy();s.domain(this.getDefaultZoomBarDomain());const o=s(r[0]),a=s(r[1]);if(a-o<i+1)return;const l=s.range(),c=a-o,u=Math.min((l[1]-l[0])/2*(e/2),c/2);let h=o+u,d=a-u;h>=d&&(h=o+c/2-i/2,d=a-c/2+i/2);const f=[s.invert(h),s.invert(d)];(r[0].valueOf()!==f[0].valueOf()||r[1].valueOf()!==f[1].valueOf())&&this.handleDomainChange(f)}zoomOut(e=this.getZoomRatio()){const n=this.model.get("zoomDomain");if(!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const r=this.services.cartesianScales.getMainXScale().copy();r.domain(this.getDefaultZoomBarDomain());const i=r(n[0]),s=r(n[1]),o=r.range(),a=(o[1]-o[0])/2*(e/2),l=Math.max(i-a,o[0]),c=Math.min(s+a,o[1]),u=[r.invert(l),r.invert(c)];(n[0].valueOf()!==u[0].valueOf()||n[1].valueOf()!==u[1].valueOf())&&this.handleDomainChange(u)}resetZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();(e[0].valueOf()!==n[0].valueOf()||e[1].valueOf()!==n[1].valueOf())&&this.handleDomainChange(n)}isMinZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();if(!e||!n)return!1;const r=e[1].valueOf()-e[0].valueOf(),i=n[1].valueOf()-n[0].valueOf(),s=y(this.model.getOptions(),"zoomBar","minZoomRatio");return r/i<s}isMaxZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();return!!(e&&n&&e[0].valueOf()===n[0].valueOf()&&e[1].valueOf()===n[1].valueOf())}isEmptyState(){return this.getZoomBarData().length===0}isZoomBarLoading(e){return y(this.model.getOptions(),"zoomBar",e,"loading")}isZoomBarLocked(e){return y(this.model.getOptions(),"zoomBar",e,"locked")}}class Cp{constructor(e,n){this.components=[],this.services={canvasZoom:zC,domUtils:R,events:GC,files:jC,gradientUtils:Kr,transitions:WC},this.model=new dl(this.services)}init(e,n){this.model.set({holder:e},{skipUpdate:!0}),Object.keys(this.services).forEach(r=>{const i=this.services[r];this.services[r]=new i(this.model,this.services)}),this.services.events.addEventListener(S.Model.UPDATE,r=>{const i=!!y(r,"detail","animate");this.update(i)}),this.model.setData(n.data),this.services.events.addEventListener(S.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(e=!0){if(!this.components)return;Object.keys(this.services).forEach(i=>{this.services[i].update()}),this.components.forEach(i=>i.render(e));const n=this.services.transitions.getPendingTransitions(),r=Object.keys(n).map(i=>n[i].end().catch(s=>s));Promise.all(r).then(()=>this.services.events.dispatchEvent(S.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(e=>e.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(e,n){const r=this.model.getOptions(),i=y(r,"toolbar","enabled"),s={id:"legend",components:[new _l(this.model,this.services)],growth:at.PREFERRED},o=y(r,"canvasZoom","enabled");o&&o===!0&&e.push(new xC(this.model,this.services));const a=!!this.model.getOptions().title,l={id:"title",components:[new yl(this.model,this.services)],growth:at.STRETCH},c={id:"toolbar",components:[new gl(this.model,this.services)],growth:at.PREFERRED},u={id:"header",components:[new Ge(this.model,this.services,[l,...i?[c]:[]],{direction:Ot.ROW,alignItems:Qr.CENTER})],growth:at.PREFERRED},h={id:"graph-frame",components:e,growth:at.STRETCH,renderType:y(n,"graphFrameRenderType")||ot.SVG},d=y(n,"excludeLegend")!==!0&&r.legend.enabled!==!1;let f=Ot.COLUMN;if(d){const v=y(r,"legend","position");v==="left"?(f=Ot.ROW,r.legend.orientation||(r.legend.orientation=Ur.VERTICAL)):v==="right"?(f=Ot.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=Ur.VERTICAL)):v==="bottom"&&(f=Ot.COLUMN_REVERSE)}const p={id:"spacer",components:[new cr(this.model,this.services)],growth:at.PREFERRED},m={id:"full-frame",components:[new Ge(this.model,this.services,[...d?[s]:[],...d?[p]:[],h],{direction:f})],growth:at.STRETCH},g=[];if(a||i){g.push(u);const v={id:"spacer",components:[new cr(this.model,this.services,i?{size:15}:void 0)],growth:at.PREFERRED};g.push(v)}return g.push(m),[new bp(this.model,this.services),new vl(this.model,this.services),new Ge(this.model,this.services,g,{direction:Ot.COLUMN})]}}class h2 extends Cp{constructor(e,n){super(e,n),this.services=Object.assign(this.services,{cartesianScales:o2,curves:c2,zoom:u2}),this.model=new Jf(this.services)}getAxisChartComponents(e,n){const r=this.model.getOptions(),i=y(r,"zoomBar",C.TOP,"enabled"),s=y(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const o=this.services.cartesianScales.getMainXAxisPosition(),a=y(r,"axes",o,"scaleType"),l=i&&o===C.BOTTOM&&a===z.TIME,c=this.services.zoom.isZoomBarLocked(C.TOP),u=!!this.model.getOptions().title,h={id:"title",components:[new yl(this.model,this.services)],growth:at.STRETCH},d={id:"toolbar",components:[new gl(this.model,this.services)],growth:at.PREFERRED},f={id:"header",components:[new Ge(this.model,this.services,[h,...s?[d]:[]],{direction:Ot.ROW,alignItems:Qr.CENTER})],growth:at.PREFERRED},p={id:"legend",components:[new _l(this.model,this.services)],growth:at.PREFERRED};l&&!c&&e.push(new _p(this.model,this.services),new EC(this.model,this.services)),e.push(new SC(this.model,this.services)),e.push(new OC(this.model,this.services));const m={id:"graph-frame",components:e,growth:at.STRETCH,renderType:ot.SVG},g=y(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1;let v=Ot.COLUMN;if(g){const E=y(this.model.getOptions(),"legend","position");E===Rr.LEFT?(v=Ot.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Ur.VERTICAL)):E===Rr.RIGHT?(v=Ot.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Ur.VERTICAL)):E===Rr.BOTTOM&&(v=Ot.COLUMN_REVERSE)}const b={id:"spacer",components:[new cr(this.model,this.services)],growth:at.PREFERRED},_={id:"full-frame",components:[new Ge(this.model,this.services,[...g?[p]:[],...g?[b]:[],m],{direction:v})],growth:at.STRETCH},T={id:"zoom-bar",components:[new TC(this.model,this.services)],growth:at.PREFERRED,renderType:ot.SVG},x=[];if(u||s){x.push(f);const E={id:"spacer",components:[new cr(this.model,this.services,s?{size:15}:void 0)],growth:at.PREFERRED};x.push(E)}return l&&x.push(T),x.push(_),[new xp(this.model,this.services),new vl(this.model,this.services),new Ge(this.model,this.services,x,{direction:Ot.COLUMN})]}}en.LINE+"",en.SCATTER+"",en.AREA+"",en.STACKED_AREA+"",en.SIMPLE_BAR+"",en.GROUPED_BAR+"",en.STACKED_BAR+"";class d2 extends Cp{constructor(e,n,r=!1){super(e,n),this.model=new wO(this.services),!r&&(this.model.setOptions(ul(cl.pieChart,n.options)),this.init(e,n))}getComponents(){const e=[new Sp(this.model,this.services),new Tp(this.model,this.services,{skeleton:gn.PIE})];return this.getChartComponents(e)}}class f2 extends d2{constructor(e,n){super(e,n,!0),this.model.setOptions(ul(cl.donutChart,n.options)),this.init(e,n)}getComponents(){const e=[new IC(this.model,this.services),new Tp(this.model,this.services,{skeleton:gn.DONUT})];return this.getChartComponents(e)}}class p2 extends h2{constructor(e,n){super(e,n),this.model=new xO(this.services),this.model.setOptions(ul(cl.heatmapChart,n.options)),this.init(e,n)}getAxisChartComponents(e,n){const r=this.model.getOptions(),i=y(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const s=!!this.model.getOptions().title,o={id:"title",components:[new yl(this.model,this.services)],growth:at.STRETCH},a={id:"toolbar",components:[new gl(this.model,this.services)],growth:at.PREFERRED},l={id:"header",components:[new Ge(this.model,this.services,[o,...i?[a]:[]],{direction:Ot.ROW,alignItems:Qr.CENTER})],growth:at.PREFERRED},c={id:"legend",components:[new RC(this.model,this.services,{chartType:"heatmap"})],growth:at.PREFERRED,renderType:ot.SVG},u={id:"graph-frame",components:e,growth:at.STRETCH,renderType:ot.SVG},h=y(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1&&this.model.getData().length>0,d=Ot.COLUMN_REVERSE,f={id:"spacer",components:[new cr(this.model,this.services,{size:15})],growth:at.PREFERRED},p={id:"full-frame",components:[new Ge(this.model,this.services,[...h?[c]:[],...h?[f]:[],u],{direction:d})],growth:at.STRETCH},m=[];if(s||i){m.push(l);const g={id:"spacer",components:[new cr(this.model,this.services,i?{size:15}:void 0)],growth:at.PREFERRED};m.push(g)}return m.push(p),[new xp(this.model,this.services),new vl(this.model,this.services),new Ge(this.model,this.services,m,{direction:Ot.COLUMN})]}getComponents(){const e=[new LC(this.model,this.services),new NC(this.model,this.services)];return this.getAxisChartComponents(e)}}function m2(t){let e,n=[{id:t[1]},{class:lh},t[2]],r={};for(let i=0;i<n.length;i+=1)r=je(r,n[i]);return{c(){e=Mt("div"),this.h()},l(i){e=At(i,"DIV",{id:!0,class:!0}),Xt(e).forEach(wt),this.h()},h(){Vl(e,r)},m(i,s){Se(i,e,s),t[7](e)},p(i,[s]){Vl(e,r=wa(n,[s&2&&{id:i[1]},{class:lh},s&4&&i[2]]))},i:zl,o:zl,d(i){i&&wt(e),t[7](null)}}}const lh="cds--chart-holder";function g2(t,e,n){const r=["data","options","Chart","chart","ref","id"];let i=Kn(e,r),{data:s=[]}=e,{options:o={}}=e,{Chart:a=void 0}=e,{chart:l=null}=e,{ref:c=null}=e,{id:u=`chart-${Math.random().toString(36)}`}=e;const h=Vp();fh(()=>{try{n(3,l=new a(c,{data:s,options:o})),h("load")}catch(f){console.error("Failed to initialize chart:",f)}}),zp(()=>{if(l)try{l.model.setData(s),l.model.setOptions(o),h("update",{data:s,options:o})}catch(f){console.error("Failed to update chart:",f)}}),Gp(()=>{l&&(h("destroy"),l.components.forEach(f=>f.destroy()),l.model.set({destroyed:!0},{skipUpdate:!0}),n(3,l=null))});function d(f){bn[f?"unshift":"push"](()=>{c=f,n(0,c)})}return t.$$set=f=>{e=je(je({},e),_a(f)),n(2,i=Kn(e,r)),"data"in f&&n(4,s=f.data),"options"in f&&n(5,o=f.options),"Chart"in f&&n(6,a=f.Chart),"chart"in f&&n(3,l=f.chart),"ref"in f&&n(0,c=f.ref),"id"in f&&n(1,u=f.id)},[c,u,i,l,s,o,a,d]}class Dp extends cn{constructor(e){super(),un(this,e,g2,m2,ln,{data:4,options:5,Chart:6,chart:3,ref:0,id:1})}}function v2(t){let e,n,r,i;const s=[t[4],{Chart:f2},{options:t[2]},{data:t[3]}];function o(c){t[5](c)}function a(c){t[6](c)}let l={};for(let c=0;c<s.length;c+=1)l=je(l,s[c]);return t[1]!==void 0&&(l.ref=t[1]),t[0]!==void 0&&(l.chart=t[0]),e=new Dp({props:l}),bn.push(()=>Br(e,"ref",o)),bn.push(()=>Br(e,"chart",a)),e.$on("load",t[7]),e.$on("update",t[8]),e.$on("destroy",t[9]),{c(){Oe(e.$$.fragment)},l(c){Me(e.$$.fragment,c)},m(c,u){Ae(e,c,u),i=!0},p(c,[u]){const h=u&28?wa(s,[u&16&&gh(c[4]),s[1],u&4&&{options:c[2]},u&8&&{data:c[3]}]):{};!n&&u&2&&(n=!0,h.ref=c[1],Nr(()=>n=!1)),!r&&u&1&&(r=!0,h.chart=c[0],Nr(()=>r=!1)),e.$set(h)},i(c){i||(Dt(e.$$.fragment,c),i=!0)},o(c){Nt(e.$$.fragment,c),i=!1},d(c){Ce(e,c)}}}function y2(t,e,n){const r=["options","data","chart","ref"];let i=Kn(e,r),{options:s}=e,{data:o}=e,{chart:a=null}=e,{ref:l=null}=e;function c(p){l=p,n(1,l)}function u(p){a=p,n(0,a)}function h(p){yn.call(this,t,p)}function d(p){yn.call(this,t,p)}function f(p){yn.call(this,t,p)}return t.$$set=p=>{e=je(je({},e),_a(p)),n(4,i=Kn(e,r)),"options"in p&&n(2,s=p.options),"data"in p&&n(3,o=p.data),"chart"in p&&n(0,a=p.chart),"ref"in p&&n(1,l=p.ref)},[a,l,s,o,i,c,u,h,d,f]}class _2 extends cn{constructor(e){super(),un(this,e,y2,v2,ln,{options:2,data:3,chart:0,ref:1})}}function b2(t){let e,n,r,i;const s=[t[4],{Chart:p2},{options:t[2]},{data:t[3]}];function o(c){t[5](c)}function a(c){t[6](c)}let l={};for(let c=0;c<s.length;c+=1)l=je(l,s[c]);return t[1]!==void 0&&(l.ref=t[1]),t[0]!==void 0&&(l.chart=t[0]),e=new Dp({props:l}),bn.push(()=>Br(e,"ref",o)),bn.push(()=>Br(e,"chart",a)),e.$on("load",t[7]),e.$on("update",t[8]),e.$on("destroy",t[9]),{c(){Oe(e.$$.fragment)},l(c){Me(e.$$.fragment,c)},m(c,u){Ae(e,c,u),i=!0},p(c,[u]){const h=u&28?wa(s,[u&16&&gh(c[4]),s[1],u&4&&{options:c[2]},u&8&&{data:c[3]}]):{};!n&&u&2&&(n=!0,h.ref=c[1],Nr(()=>n=!1)),!r&&u&1&&(r=!0,h.chart=c[0],Nr(()=>r=!1)),e.$set(h)},i(c){i||(Dt(e.$$.fragment,c),i=!0)},o(c){Nt(e.$$.fragment,c),i=!1},d(c){Ce(e,c)}}}function w2(t,e,n){const r=["options","data","chart","ref"];let i=Kn(e,r),{options:s}=e,{data:o}=e,{chart:a=null}=e,{ref:l=null}=e;function c(p){l=p,n(1,l)}function u(p){a=p,n(0,a)}function h(p){yn.call(this,t,p)}function d(p){yn.call(this,t,p)}function f(p){yn.call(this,t,p)}return t.$$set=p=>{e=je(je({},e),_a(p)),n(4,i=Kn(e,r)),"options"in p&&n(2,s=p.options),"data"in p&&n(3,o=p.data),"chart"in p&&n(0,a=p.chart),"ref"in p&&n(1,l=p.ref)},[a,l,s,o,i,c,u,h,d,f]}class x2 extends cn{constructor(e){super(),un(this,e,w2,b2,ln,{options:2,data:3,chart:0,ref:1})}}const ya=mh([]),Lp=mh();function ch(t){let e,n;return e=new x2({props:{data:t[0],options:t[1]}}),{c(){Oe(e.$$.fragment)},l(r){Me(e.$$.fragment,r)},m(r,i){Ae(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.data=r[0]),e.$set(s)},i(r){n||(Dt(e.$$.fragment,r),n=!0)},o(r){Nt(e.$$.fragment,r),n=!1},d(r){Ce(e,r)}}}function E2(t){let e,n,r=t[0]&&ch(t);return{c(){r&&r.c(),e=Gl()},l(i){r&&r.l(i),e=Gl()},m(i,s){r&&r.m(i,s),Se(i,e,s),n=!0},p(i,[s]){i[0]?r?(r.p(i,s),s&1&&Dt(r,1)):(r=ch(i),r.c(),Dt(r,1),r.m(e.parentNode,e)):r&&(wo(),Nt(r,1,1,()=>{r=null}),xo())},i(i){n||(Dt(r),n=!0)},o(i){Nt(r),n=!1},d(i){i&&wt(e),r&&r.d(i)}}}function T2(t){return t.map(n=>({day:n.day,week:n.week,value:n.value}))}function S2(t){let e=[];for(let n=0;n<t.length;n++){const r=t[n].week;e.includes(r)||e.push(r)}return e.reverse(),e}function O2(t,e,n){let{data:r}=e;document.addEventListener("click",function(o){const a=o.target;if(!a||!a.__data__||typeof a.__data__!="object"||!("day"in a.__data__)||!("week"in a.__data__)||!("index"in a.__data__))return;const l=a.__data__.day,c=a.__data__.week,u=a.__data__.index;l!==null&&c!==null&&u!==null&&i(r,l,c,u)});function i(o,a,l,c){if(c==-1){const p=[{group:"No data",value:0}];ya.set(p)}else{const p=o.find(m=>m.day===a&&m.week===l).distribution;ya.set(p)}let u=l.split(" - ")[0].split("/")[0],h=parseInt(l.split("/")[1],10);const d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].indexOf(a),f=u+"/"+(h+d).toString().padStart(2,"0");Lp.set(f)}let s={theme:"g100",height:"300px",toolbar:{enabled:!1},axes:{bottom:{mapsTo:"day",scaleType:"labels",domain:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},left:{mapsTo:"week",scaleType:"labels",domain:S2(r)}},heatmap:{colorLegend:{title:"Stress level"}}};return t.$$set=o=>{"data"in o&&n(0,r=o.data)},t.$$.update=()=>{t.$$.dirty&1&&(T2(r),i(r,r.at(-1).day,r.at(-1).week,r.at(-1).value))},[r,s]}class M2 extends cn{constructor(e){super(),un(this,e,O2,E2,ln,{data:0})}}function A2(t){let e,n;return e=new _2({props:{data:t[0],options:t[1]}}),{c(){Oe(e.$$.fragment)},l(r){Me(e.$$.fragment,r)},m(r,i){Ae(e,r,i),n=!0},p(r,[i]){const s={};i&1&&(s.data=r[0]),e.$set(s)},i(r){n||(Dt(e.$$.fragment,r),n=!0)},o(r){Nt(e.$$.fragment,r),n=!1},d(r){Ce(e,r)}}}function C2(t,e,n){let r;ph(t,ya,o=>n(2,r=o));let i,s={theme:"g100",width:"300px",height:"300px",donut:{center:{label:"Stress level"},alignment:"center"},legend:{alignment:"center"},toolbar:{enabled:!1},resizable:!0,pie:{valueMapsTo:"value"}};return t.$$.update=()=>{t.$$.dirty&4&&n(0,i=r)},[i,s,r]}class D2 extends cn{constructor(e){super(),un(this,e,C2,A2,ln,{})}}const L2=t=>({}),uh=t=>({});function k2(t){let e,n,r,i,s,o="X",a,l,c,u,h,d;const f=t[3].header,p=jl(f,t,t[2],uh),m=t[3].default,g=jl(m,t,t[2],null);return{c(){e=Mt("dialog"),n=Mt("div"),r=Mt("div"),p&&p.c(),i=ie(),s=Mt("button"),s.textContent=o,a=ie(),l=Mt("hr"),c=ie(),g&&g.c(),this.h()},l(v){e=At(v,"DIALOG",{class:!0});var b=Xt(e);n=At(b,"DIV",{class:!0});var _=Xt(n);r=At(_,"DIV",{class:!0});var T=Xt(r);p&&p.l(T),i=se(T),s=At(T,"BUTTON",{class:!0,"data-svelte-h":!0}),kr(s)!=="svelte-8v9lg5"&&(s.textContent=o),T.forEach(wt),a=se(_),l=At(_,"HR",{class:!0}),c=se(_),g&&g.l(_),_.forEach(wt),b.forEach(wt),this.h()},h(){kt(s,"class","flex justify-center items-center text-slate-900 rounded-xl w-6 h-6"),s.autofocus=!0,kt(r,"class","flex justify-between w-full"),kt(l,"class","border-slate-900"),kt(n,"class","p-2 text-neutral-300 w-full"),kt(e,"class","bg-neutral-800 max-w-[350px] border border-slate-900 rounded-lg w-full svelte-13x2i0n")},m(v,b){Se(v,e,b),pt(e,n),pt(n,r),p&&p.m(r,null),pt(r,i),pt(r,s),pt(n,a),pt(n,l),pt(n,c),g&&g.m(n,null),t[6](e),u=!0,s.focus(),h||(d=[Or(s,"click",t[5]),Or(n,"click",jp(t[4])),Or(e,"close",t[7]),Or(e,"click",Wp(t[8]))],h=!0)},p(v,[b]){p&&p.p&&(!u||b&4)&&Wl(p,f,v,v[2],u?Xl(f,v[2],b,L2):Yl(v[2]),uh),g&&g.p&&(!u||b&4)&&Wl(g,m,v,v[2],u?Xl(m,v[2],b,null):Yl(v[2]),null)},i(v){u||(Dt(p,v),Dt(g,v),u=!0)},o(v){Nt(p,v),Nt(g,v),u=!1},d(v){v&&wt(e),p&&p.d(v),g&&g.d(v),t[6](null),h=!1,Yp(d)}}}function R2(t,e,n){let{$$slots:r={},$$scope:i}=e,{showModal:s}=e,o;function a(d){yn.call(this,t,d)}const l=()=>o.close();function c(d){bn[d?"unshift":"push"](()=>{o=d,n(1,o)})}const u=()=>n(0,s=!1),h=()=>o.close();return t.$$set=d=>{"showModal"in d&&n(0,s=d.showModal),"$$scope"in d&&n(2,i=d.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&o&&s&&o.showModal()},[s,o,i,r,a,l,c,u,h]}class $2 extends cn{constructor(e){super(),un(this,e,R2,k2,ln,{showModal:0})}}function I2(t){let e,n;return{c(){e=Mt("p"),n=Pi(t[1]),this.h()},l(r){e=At(r,"P",{class:!0});var i=Xt(e);n=Ni(i,t[1]),i.forEach(wt),this.h()},h(){kt(e,"class","text-neutral-300")},m(r,i){Se(r,e,i),pt(e,n)},p(r,i){i&2&&ba(n,r[1])},d(r){r&&wt(e)}}}function P2(t){let e,n;return{c(){e=Mt("h1"),n=Pi(t[0]),this.h()},l(r){e=At(r,"H1",{class:!0,slot:!0});var i=Xt(e);n=Ni(i,t[0]),i.forEach(wt),this.h()},h(){kt(e,"class","text-neutral-300 text-lg"),kt(e,"slot","header")},m(r,i){Se(r,e,i),pt(e,n)},p(r,i){i&1&&ba(n,r[0])},d(r){r&&wt(e)}}}function N2(t){let e,n="?",r,i,s,o,a,l;function c(h){t[4](h)}let u={$$slots:{header:[P2],default:[I2]},$$scope:{ctx:t}};return t[2]!==void 0&&(u.showModal=t[2]),i=new $2({props:u}),bn.push(()=>Br(i,"showModal",c)),{c(){e=Mt("button"),e.textContent=n,r=ie(),Oe(i.$$.fragment),this.h()},l(h){e=At(h,"BUTTON",{class:!0,"data-svelte-h":!0}),kr(e)!=="svelte-c2cggt"&&(e.textContent=n),r=se(h),Me(i.$$.fragment,h),this.h()},h(){kt(e,"class","flex justify-center items-center bg-neutral-700 text-neutral-300 rounded-xl border border-slate-900 w-6 h-6")},m(h,d){Se(h,e,d),Se(h,r,d),Ae(i,h,d),o=!0,a||(l=Or(e,"click",t[3]),a=!0)},p(h,[d]){const f={};d&35&&(f.$$scope={dirty:d,ctx:h}),!s&&d&4&&(s=!0,f.showModal=h[2],Nr(()=>s=!1)),i.$set(f)},i(h){o||(Dt(i.$$.fragment,h),o=!0)},o(h){Nt(i.$$.fragment,h),o=!1},d(h){h&&(wt(e),wt(r)),Ce(i,h),a=!1,l()}}}function B2(t,e,n){let r=!1,{headerText:i=""}=e,{text:s=""}=e;const o=()=>n(2,r=!0);function a(l){r=l,n(2,r)}return t.$$set=l=>{"headerText"in l&&n(0,i=l.headerText),"text"in l&&n(1,s=l.text)},[i,s,r,o,a]}class bo extends cn{constructor(e){super(),un(this,e,B2,N2,ln,{headerText:0,text:1})}}function hh(t){let e,n;return e=new M2({props:{data:t[0]}}),{c(){Oe(e.$$.fragment)},l(r){Me(e.$$.fragment,r)},m(r,i){Ae(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.data=r[0]),e.$set(s)},i(r){n||(Dt(e.$$.fragment,r),n=!0)},o(r){Nt(e.$$.fragment,r),n=!1},d(r){Ce(e,r)}}}function dh(t){let e,n;return e=new D2({}),{c(){Oe(e.$$.fragment)},l(r){Me(e.$$.fragment,r)},m(r,i){Ae(e,r,i),n=!0},i(r){n||(Dt(e.$$.fragment,r),n=!0)},o(r){Nt(e.$$.fragment,r),n=!1},d(r){Ce(e,r)}}}function U2(t){let e,n="Harmony",r,i,s,o,a,l,c="Harmony",u,h,d,f,p,m,g,v="Four-Week Stress Heatmap",b,_,T,x,E,O,A,M,L,I,V,$,U;d=new bo({props:{headerText:"Harmony",text:t[4]}}),_=new bo({props:{headerText:"Heatmap of Monthly Stress",text:t[2]}});let K=t[0]&&hh(t);V=new bo({props:{headerText:"Donut Chart of Daily Stress",text:t[3]}});let W=t[0]&&dh();return{c(){e=Mt("title"),e.textContent=n,r=ie(),i=Mt("body"),s=Mt("div"),o=Mt("div"),a=ie(),l=Mt("header"),l.textContent=c,u=ie(),h=Mt("div"),Oe(d.$$.fragment),f=ie(),p=Mt("section"),m=Mt("div"),g=Mt("h2"),g.textContent=v,b=ie(),Oe(_.$$.fragment),T=ie(),K&&K.c(),x=ie(),E=Mt("section"),O=Mt("div"),A=Mt("h2"),M=Pi("Daily Stress Distribution of "),L=Pi(t[1]),I=ie(),Oe(V.$$.fragment),$=ie(),W&&W.c(),this.h()},l(N){e=At(N,"TITLE",{"data-svelte-h":!0}),kr(e)!=="svelte-h2stam"&&(e.textContent=n),r=se(N),i=At(N,"BODY",{class:!0});var J=Xt(i);s=At(J,"DIV",{class:!0});var q=Xt(s);o=At(q,"DIV",{class:!0}),Xt(o).forEach(wt),a=se(q),l=At(q,"HEADER",{class:!0,"data-svelte-h":!0}),kr(l)!=="svelte-18sqvjl"&&(l.textContent=c),u=se(q),h=At(q,"DIV",{class:!0});var Z=Xt(h);Me(d.$$.fragment,Z),Z.forEach(wt),q.forEach(wt),f=se(J),p=At(J,"SECTION",{class:!0});var it=Xt(p);m=At(it,"DIV",{class:!0});var Y=Xt(m);g=At(Y,"H2",{class:!0,"data-svelte-h":!0}),kr(g)!=="svelte-1651va2"&&(g.textContent=v),b=se(Y),Me(_.$$.fragment,Y),Y.forEach(wt),T=se(it),K&&K.l(it),it.forEach(wt),x=se(J),E=At(J,"SECTION",{class:!0});var Lt=Xt(E);O=At(Lt,"DIV",{class:!0});var tt=Xt(O);A=At(tt,"H2",{class:!0});var gt=Xt(A);M=Ni(gt,"Daily Stress Distribution of "),L=Ni(gt,t[1]),gt.forEach(wt),I=se(tt),Me(V.$$.fragment,tt),tt.forEach(wt),$=se(Lt),W&&W.l(Lt),Lt.forEach(wt),J.forEach(wt),this.h()},h(){kt(o,"class","w-10"),kt(l,"class","text-neutral-300 text-2xl font-bold mt-3 mb-3 shadow-lg"),kt(h,"class","w-10 flex justify-end"),kt(s,"class","flex justify-between items-center w-full"),kt(g,"class","text-lg text-neutral-300 mb-4"),kt(m,"class","flex justify-between w-full"),kt(p,"class","bg-neutral-800 flex flex-col items-center rounded-lg shadow-lg p-4 mb-2 border border-slate-900"),kt(A,"class","text-lg text-neutral-300 mb-4"),kt(O,"class","flex justify-between w-full"),kt(E,"class","bg-neutral-800 flex flex-col items-center rounded-lg shadow-lg p-4 border border-slate-900"),kt(i,"class","bg-neutral-900 h-screen flex flex-col items-center")},m(N,J){Se(N,e,J),Se(N,r,J),Se(N,i,J),pt(i,s),pt(s,o),pt(s,a),pt(s,l),pt(s,u),pt(s,h),Ae(d,h,null),pt(i,f),pt(i,p),pt(p,m),pt(m,g),pt(m,b),Ae(_,m,null),pt(p,T),K&&K.m(p,null),pt(i,x),pt(i,E),pt(E,O),pt(O,A),pt(A,M),pt(A,L),pt(O,I),Ae(V,O,null),pt(E,$),W&&W.m(E,null),U=!0},p(N,[J]){N[0]?K?(K.p(N,J),J&1&&Dt(K,1)):(K=hh(N),K.c(),Dt(K,1),K.m(p,null)):K&&(wo(),Nt(K,1,1,()=>{K=null}),xo()),(!U||J&2)&&ba(L,N[1]),N[0]?W?J&1&&Dt(W,1):(W=dh(),W.c(),Dt(W,1),W.m(E,null)):W&&(wo(),Nt(W,1,1,()=>{W=null}),xo())},i(N){U||(Dt(d.$$.fragment,N),Dt(_.$$.fragment,N),Dt(K),Dt(V.$$.fragment,N),Dt(W),U=!0)},o(N){Nt(d.$$.fragment,N),Nt(_.$$.fragment,N),Nt(K),Nt(V.$$.fragment,N),Nt(W),U=!1},d(N){N&&(wt(e),wt(r),wt(i)),Ce(d),Ce(_),K&&K.d(),Ce(V),W&&W.d()}}}function H2(t,e,n){let r;ph(t,Lp,l=>n(1,r=l));let i;return fh(async()=>{try{const l=await fetch("http://localhost:3000/api/predictions",{method:"GET"});l.ok?n(0,i=await l.json()):console.error(await l.text())}catch(l){console.error("Error:",l)}}),[i,r,`The heatmap diagram displays your stress levels over the past four weeks. 
									  Each cell represents a day, with color intensity indicating the level of stress experienced. 
									  Darker shades signify higher stress levels, while lighter shades represent lower stress. 
									  Use this visualization to identify patterns and trends in your stress levels over time, 
									  helping you understand your stressors and manage them effectively.`,`The donut chart displays stress data for a single day, 
									segmented into eight groups representing three-hour intervals. 
									Each segment represents a specific time period within the day, 
									ranging from 0-3 hours to 21-24 hours. 
									The size of each segment corresponds to the level of stress experienced during that time interval. 
									Use this visualization to gain insight into how your stress fluctuates throughout the day, 
									helping you identify peak stress periods and potential triggers.`,`Harmony provides insights into stress levels, measured by the frequency of stress detections from smartwatch data. 
								   Through visualizations like heatmaps and donut charts, users gain a deeper understanding of their stress patterns, 
								   facilitating informed decisions for a balanced lifestyle.`]}class X2 extends cn{constructor(e){super(),un(this,e,H2,U2,ln,{})}}export{X2 as component};
